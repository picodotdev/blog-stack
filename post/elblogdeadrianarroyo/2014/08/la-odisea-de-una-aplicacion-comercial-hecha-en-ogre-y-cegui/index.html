<!DOCTYPE html><html data-debug-enabled="true" data-locale="es_ES" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="Apache Tapestry Framework (version 5.4-beta-16)" name="generator"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta pagina="Post"/><title>La Odisea de una aplicación comercial hecha en Ogre y CEGUI | El blog de Adrián Arroyo</title><!-- Resources --><link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/><link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link title="Portada" type="application/atom+xml" rel="alternate" href="/feed.atom.xml"/><link type="image/png" rel="icon" href="/assets/images/favicon.png"/><meta content="Post" name="tapestry-page-name"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/bootstrap/css/bootstrap.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/exception-frame.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry-console.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tree.css"/><link type="text/css" rel="stylesheet" href="/assets/css/core.css"/></head><body data-page-initialized="false"><script type="text/javascript">document.write("<div class=\"pageloading-mask\"><div></div></div>");</script><header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><h1><a class="blogstack" href="/"><span class="glyphicon glyphicon-th"></span> Blog <span class="stack">Stack</span></a></h1></div><div class="col-xs-12 col-sm-12 col-md-6"><nav role="navigation"><ul class="list-unstyled list-inline"><li><a class="header" href="/">Inicio</a></li><li><a class="header" href="/archive">Archivo</a></li><li><a class="header" href="/faq">Preguntas frecuentes</a></li><li><a class="header" href="/faq#aggregate">¿Quieres agregar tu bitácora?</a></li></ul></nav></div><div class="col-xs-6 col-sm-6 col-md-2"><a title="Fuente RSS, ¡suscríbete a BS!" alt="Fuente RSS" class="header" href="/feed.atom.xml"><span class="header icon entypo"></span></a><a title="Twitter, ¡sigue a BS!" alt="Twitter" class="header" href="http://twitter.com/blogstackinfo"><span class="header icon entypo-social"></span></a></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><h4>Un poco más que un agregador/planeta de bitácoras sobre programación, desarrollo, software libre, gnu/linux, tecnología, ...</h4></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="imagen-cabecera"><div class="imagen"><div class="col-xs-12 col-sm-12 col-md-12" id="billboard"></div></div></div></div></div></div></header><div class="container-fluid content"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8 content"><article itemtype="http://schema.org/BlogPosting" itemscope=""><a id="content"></a><header><h2><a href="/post/elblogdeadrianarroyo/2014/08/la-odisea-de-una-aplicacion-comercial-hecha-en-ogre-y-cegui"><span itemprop="headline">La Odisea de una aplicación comercial hecha en Ogre y CEGUI</span></a></h2></header><section class="post-data"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div><span>Escrito por <span itemprop="author">Adrián Arroyo</span> en la bitácora <a href="http://adrianarroyocalle.github.io/blog">El blog de Adrián Arroyo</a>, <a href="http://adrianarroyocalle.github.io/blog//2014/08/30/la-odisea-de-una-aplicacion-comercial-ogre-cegui/"><span itemprop="sameAs">artículo original</span></a></span></div><div><span datetime="2014-08-29T22:00" itemprop="dateModified">Actualizado el viernes, 29 de agosto de 2014 a las 22:00 UTC</span></div></div></div></section><div class="text-justify post-content"><div class="share-this only-twitter"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/elblogdeadrianarroyo/2014/08/la-odisea-de-una-aplicacion-comercial-hecha-en-ogre-y-cegui" st_title="La Odisea de una aplicación comercial hecha en Ogre y CEGUI | El blog de Adrián Arroyo"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><span itemprop="name"><p>&Uacute;ltimamente he estado concentrado en una tarea que considero extenuante, por la falta de informaci&oacute;n, y por la abundancia de respuestas que no aportan nada al caso. El dilema en cuesti&oacute;n es la distribuci&oacute;n de binarios en Linux de una aplicaci&oacute;n privativa, concretamente un juego hecho en <a href="http://ogre3d.org">OGRE</a> y <a href="http://cegui.org.uk">CEGUI</a>. Y la verdad es que la odisea es larga. As&iacute; que he decidido comparar todas las opciones, sus pros y sus contras.</p> 
<p><img src="http://adrianarroyocalle.github.io/blog//images/OGRE.png" alt="Ogre - Wikimedia" /></p> 
<h2>Opciones</h2> 
<p>Las opciones que he valorado para comparar son:</p> 
<ul> 
 <li>Paqueter&iacute;a nativa DEB, RPM y TAR.XZ</li> 
 <li>Distribuir un TAR.GZ binario</li> 
 <li><em>Estatificar</em> (palabro inventado) el binario</li> 
 <li>Paqueter&iacute;a multi-distro, Autopackage, Listaller</li> 
</ul> 
<h2>Paqueter&iacute;a nativa DEB, RPM y TAR.XZ</h2> 
<p>Esta opci&oacute;n, es a priori la m&aacute;s conveniente. El usuario dispondr&aacute; de un bonito paquete nativo (que se podr&aacute; actualizar) y se le gestionar&aacute;n las dependencias, por ello ahorrar&aacute; espacio en disco. Adem&aacute;s tendr&aacute; una integraci&oacute;n real con el sistema, lo podr&aacute; desinstalar desde donde acostumbra a desinstalar y el juego le aparecer&aacute; en los men&uacute;s. Sin embargo los problemas salen enseguida, por una parte tienes que centrarte en ofrecer varios sistemas de distribuci&oacute;n. Por otra parte, los paquetes nativos suelen no llevarse muy bien con otros paquetes de otras arquitecturas, ya que en algunos casos se nos pedir&aacute; instalar pr&aacute;cticamente el sistema de 32 bits encima del de 64, cuando realmente no es necesario. Adem&aacute;s el tema de las dependencias es un arma de doble filo, pues en el caso de OGRE y CEGUI, o no hay, o est&aacute;n desfasadas. As&iacute; pues nuestro paquete puede quedarse inservible pronto. Y una peculiaridad de OGRE, resulta que tenemos que definir en plugins.cfg la localizaci&oacute;n de los plugins que usemos (normalmente con definir el de OpenGL ya sirve), pero la localizaci&oacute;n de esos plugins puede estar dispersa entre sistemas y arquitecturas. Con lo que deber&iacute;amos modificar el fichero plugins.cfg en cada sistema y arquitectura.</p> 
<h2>Distribuir un TAR.GZ binario</h2> 
<p>Visto lo anterior, parece ser m&aacute;s c&oacute;modo distribuir un TAR.GZ binario. Muchas aplicaciones como <a href="http://java.com">Oracle Java</a> o <a href="http://getfirefox.com">Mozilla Firefox</a> son distribuidas desde el sitio oficial usando este sistema. Sin embargo, y aunque pueda parecer una buena idea, tiene alg&uacute;n que otro inconveniente. En primer lugar debemos intentar usar librer&iacute;as est&aacute;ticas. Si las librer&iacute;as que usamos tienen esa opci&oacute;n, correcto. Puede que esas librer&iacute;as dependan en otras que no puedan ser est&aacute;ticas, y aunque lo fueran, a&ntilde;adir&iacute;an m&aacute;s carga al ejecutable y complejidad en la compilaci&oacute;n. Si dependemos de librer&iacute;as compartidas las podemos poner en una carpeta que tengamos dentro del TAR.GZ y usar RPATH con $ORIGIN o LD_LIBRARY_PATH. El caso es que hay ciertas herramientas que nos pueden servir para ello. Por ejemplo <a href="http://codevarium.gameka.com.br/deploying-cc-linux-applications-supporting-both-32-bit-and-64-bit/"><em>cpld</em></a> nos puede servir para copiar todas las dependencias. El problema es que el proceso no puede ser automatizado completamente ya que el script no puede diferenciar una dependencia base de Linux de una que realmente debamos distribuir. As&iacute; que desp&uacute;es de usar la herramienta nos tocar&aacute; volver a revisar los ficheros que ha copiado ya que habr&aacute; copiado libc, libm, libpthread, libX11 y otras que posiblemente no necesitemos. Pero si no las copiamos podr&iacute;amos tener problemas en sistemas de 64 bits. Una soluci&oacute;n efectiva consiste en hacer un peque&ntilde;o script que cargue las librer&iacute;as seg&uacute;n el sistema en el que estemos, habiendo usado el script en un sistema de 32 bits y en otro de 64 bits. Esto puede parecer razonable, pero tanto OGRE como CEGUI usan una arquitectura basada en plugins. Estos plugins no pueden ser analizados por ninguna herramienta y deberemos saber manualmente que plugins tendremos que pasar a el comprimido. Por supuesto debemos separar las dos arquitecturas. En OGRE es f&aacute;cil pasar los plugins ya que por defecto se usa el fichero plugins.cfg para leer los plugins, pero CEGUI no tiene esa caracter&iacute;stica (o yo no la he encontrado). Sin embargo es una alternativa muy s&oacute;lida.</p> 
<h2><em>Estatificar</em></h2> 
<p>Una opci&oacute;n que encontr&eacute; mientras buscaba una soluci&oacute;n se puede llamarla como estatificar. Es un m&eacute;todo poco com&uacute;n que coge las dependencias compartidas y las empaqueta en un &uacute;nico binario. No se debe confundir con compilaci&oacute;n est&aacute;tica ya que <em>estatificar</em> requiere un binario ya compilado con dependencias. &Uacute;nicamente hay dos aplicaciones que hacen esta funci&oacute;n, y las dos son del mismo creador, aunque difieren en el funcionamiento de base. Por un lado <a href="http://statifier.sourceforge.net/">Statifier</a>, open source y gratuita, trabaja a un modo m&aacute;s rudimentario; por otro lado, <a href="http://www.magicermine.com">Magic Ermine</a>, trabaja con un sistema m&aacute;s perfeccionado, es de pago pero tiene una demo gratuita para probar. Los resultados no eran muy buenos, Statifier modific&oacute; el binario de manera que ya no arrancaba, por otro lado Magic Ermine funcionaba correctamente, pero el plugin de OpenGL de OGRE usa libGL.so, y como es cargada din&aacute;micamente, Magic Ermine no sabe que ten&iacute;a que empaquetarla y como consecuencia falla con un bonito error.</p> 
<h2>Paqueter&iacute;a multidistro</h2> 
<p>Autopackage, Listaller, 0install, … Prometen mucho pero no funcionan bien. Autopackage ha sido descontinuado en favor de Listaller, Listaller se tiene que integrar con AppStream y PackageKit, pero esos mismos componentes no est&aacute;n finalizados, <a href="https://bugs.launchpad.net/listaller/+bug/1361686">Listaller falla m&aacute;s que una escopeta de feria en la pr&aacute;ctica</a> y la documentaci&oacute;n es p&eacute;sima. Realmente espero que mejoren ya que prometen mucho, pero no se cuando ser&aacute; realmente usable. 0install trabaja de otra manera y al menos en mi caso, fallaba y no pod&iacute;a siquiera empaquetar una simple aplicaci&oacute;n. Esta opci&oacute;n quiz&aacute; en otro momento, pero ahora no.</p> 
<h2>Conclusi&oacute;n</h2> 
<p>Hemos visto 4 opciones. Dos de ellas no funcionaban bien en la pr&aacute;ctica (estatificar y la paqueter&iacute;a multidistro), las otras dos eran tediosas, pero si se estudia al detalle puede funcionar bien. As&iacute; pues podemos elegir entre la paqueter&iacute;a nativa y el TAR.GZ binario con scripts de dependencias. As&iacute; pues cada cu&aacute;l elija la que m&aacute;s le guste.</p></span></div><section><a id="share"></a><h1>Compartir</h1><div class="share-this"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/elblogdeadrianarroyo/2014/08/la-odisea-de-una-aplicacion-comercial-hecha-en-ogre-y-cegui" st_title="La Odisea de una aplicación comercial hecha en Ogre y CEGUI | El blog de Adrián Arroyo"></span><span displayText="Facebook" class="st_facebook_vcount" st_url="http://www.blogstack.info/post/elblogdeadrianarroyo/2014/08/la-odisea-de-una-aplicacion-comercial-hecha-en-ogre-y-cegui" st_title="La Odisea de una aplicación comercial hecha en Ogre y CEGUI | El blog de Adrián Arroyo"></span><span displayText="Google +" class="st_googleplus_vcount" st_url="http://www.blogstack.info/post/elblogdeadrianarroyo/2014/08/la-odisea-de-una-aplicacion-comercial-hecha-en-ogre-y-cegui" st_title="La Odisea de una aplicación comercial hecha en Ogre y CEGUI | El blog de Adrián Arroyo"></span><span displayText="LinkedIn" class="st_linkedin_vcount" st_url="http://www.blogstack.info/post/elblogdeadrianarroyo/2014/08/la-odisea-de-una-aplicacion-comercial-hecha-en-ogre-y-cegui" st_title="La Odisea de una aplicación comercial hecha en Ogre y CEGUI | El blog de Adrián Arroyo"></span><span displayText="Meneame" class="st_meneame_vcount" st_url="http://www.blogstack.info/post/elblogdeadrianarroyo/2014/08/la-odisea-de-una-aplicacion-comercial-hecha-en-ogre-y-cegui" st_title="La Odisea de una aplicación comercial hecha en Ogre y CEGUI | El blog de Adrián Arroyo"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div id="widget"></div></section><section><a id="comments"></a><h1>Comentar</h1><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = "adrianarroyocallegithub";
var disqus_title = "La Odisea de una aplicación comercial hecha en Ogre y CEGUI";
var disqus_url = "http://adrianarroyocalle.github.io/blog//2014/08/30/la-odisea-de-una-aplicacion-comercial-ogre-cegui/";
</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></section><hr/></article></div><div class="col-xs-12 col-sm-12 col-md-4"><aside><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigRectangle"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section><h3>Redes sociales</h3><p>¿Te gusta Blog Stack? ¡Compártelo!</p><div class="social-networks"><!-- Facebook --><div class="social-network"><div data-share="true" data-show-faces="false" data-action="like" data-width="310" data-layout="box_count" data-href="http://www.blogstack.info/" class="fb-like"></div></div><!-- Google+ --><div class="social-network"><div class="g-plusone" data-href="http://www.blogstack.info/" data-size="tall"></div></div></div></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts"></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigSkycraper"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts_0"></section></div></div></aside></div></div></div><footer><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="footer"><a href="/">Blog Stack</a> por <a href="https://twitter.com/picodotdev/">pico.dev</a> está publicado bajo la licencia de software libre <a href="http://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public</a> en <a href="https://github.com/picodotdev/blog-stack">GitHub <span class="entypo-social"></span></a>.<br/>
El contenido agregado conserva la licencia de su bitácora.<br/>
«Powered by» <a href="https://github.com/picodotdev/blogstack">Blog Stack</a>, <a href="http://tapestry.apache.org/">Apache Tapestry</a>, <a href="https://www.openshift.com/">OpenShift</a>, <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://www.oracle.com/es/technologies/java/overview/index.html">Java</a> y más software libre o de código abierto, inspirado en <a href="http://octopress.org/">Octopress</a>.<br/><span class="copyleft">©</span> pico.dev 2014
</div></div></div></div></footer><div id="fb-root"></div><script type="text/javascript">var require = {
  "waitSeconds" : 300,
  "shim" : {
    "t5/core/typeahead" : [
      "jquery"
    ],
    "bootstrap/affix" : [
      "bootstrap/transition"
    ],
    "bootstrap/alert" : [
      "bootstrap/transition"
    ],
    "bootstrap/modal" : [
      "bootstrap/transition"
    ],
    "bootstrap/tab" : [
      "bootstrap/transition"
    ],
    "bootstrap/transition" : [
      "jquery"
    ],
    "bootstrap/button" : [
      "bootstrap/transition"
    ],
    "bootstrap/scrollspy" : [
      "bootstrap/transition"
    ],
    "bootstrap/collapse" : [
      "bootstrap/transition"
    ],
    "bootstrap/dropdown" : [
      "bootstrap/transition"
    ],
    "bootstrap/tooltip" : [
      "bootstrap/transition"
    ],
    "bootstrap/carousel" : [
      "bootstrap/transition"
    ],
    "bootstrap/popover" : [
      "bootstrap/tooltip"
    ]
  },
  "baseUrl" : "/modules"
};
</script><script src="/assets/tapestry5/require.js" type="text/javascript"></script><script src="/assets/tapestry5/underscore-1.5.2.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/scriptaculous.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/effects.js" type="text/javascript"></script><script src="/assets/tapestry5/t53-compatibility.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery-noconflict.js" type="text/javascript"></script><script type="text/javascript">require(["t5/core/pageinit"], function(pi) { pi([], [
  "app/analytics",
  [
    "app/karmacracy:init",
    {
      "selector" : "#widget",
      "id" : 986,
      "url" : "http://www.blogstack.info/post/elblogdeadrianarroyo/2014/08/la-odisea-de-una-aplicacion-comercial-hecha-en-ogre-y-cegui"
    }
  ],
  "app/disqus",
  "app/facebook",
  "app/googleplus",
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts",
      "source" : "elblogdeadrianarroyo",
      "name" : "El blog de Adrián Arroyo"
    }
  ],
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts_0",
      "source" : "blogstack",
      "name" : "Blog Stack"
    }
  ],
  [
    "app/adsensem:init",
    {
      "blogstack" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlot" : "1397019380"
      }
    }
  ]
]); });</script></body></html>