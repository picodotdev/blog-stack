<!DOCTYPE html><html data-debug-enabled="true" data-locale="es_ES" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="Apache Tapestry Framework (version 5.4-beta-16)" name="generator"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta pagina="Post"/><title>Simulando switch cisco en GNS3 | PLEDIN</title><!-- Resources --><link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/><link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link title="Portada" type="application/atom+xml" rel="alternate" href="/feed.atom.xml"/><link type="image/png" rel="icon" href="/assets/images/favicon.png"/><meta content="Post" name="tapestry-page-name"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/bootstrap/css/bootstrap.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/exception-frame.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry-console.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tree.css"/><link type="text/css" rel="stylesheet" href="/assets/css/core.css"/></head><body data-page-initialized="false"><script type="text/javascript">document.write("<div class=\"pageloading-mask\"><div></div></div>");</script><header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><h1><a class="blogstack" href="/"><span class="glyphicon glyphicon-th"></span> Blog <span class="stack">Stack</span></a></h1></div><div class="col-xs-12 col-sm-12 col-md-6"><nav role="navigation"><ul class="list-unstyled list-inline"><li><a class="header" href="/">Inicio</a></li><li><a class="header" href="/archive">Archivo</a></li><li><a class="header" href="/faq">Preguntas frecuentes</a></li><li><a class="header" href="/faq#aggregate">¿Quieres agregar tu bitácora?</a></li></ul></nav></div><div class="col-xs-6 col-sm-6 col-md-2"><a title="Fuente RSS, ¡suscríbete a BS!" alt="Fuente RSS" class="header" href="/feed.atom.xml"><span class="header icon entypo"></span></a><a title="Twitter, ¡sigue a BS!" alt="Twitter" class="header" href="http://twitter.com/blogstackinfo"><span class="header icon entypo-social"></span></a></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><h4>Un poco más que un agregador/planeta de bitácoras sobre programación, desarrollo, software libre, gnu/linux, tecnología, ...</h4></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="imagen-cabecera"><div class="imagen"><div class="col-xs-12 col-sm-12 col-md-12" id="billboard"></div></div></div></div></div></div></header><div class="container-fluid content"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8 content"><article itemtype="http://schema.org/BlogPosting" itemscope=""><a id="content"></a><header><h2><a href="/post/pledin/2014/02/simulando-switch-cisco-en-gns3"><span itemprop="headline">Simulando switch cisco en GNS3</span></a></h2></header><div class="row labels"><div class="col-md-12"><a class="label" href="/label/virtualizacion"><img title="virtualizacion" alt="virtualizacion" src="/assets/images/labels/virtualizacion.png"/></a></div></div><section class="post-data"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div><span>Escrito por <span itemprop="author">admin</span> en la bitácora <a href="http://www.josedomingo.org/pledin/">PLEDIN</a>, <a href="http://www.josedomingo.org/pledin/2014/02/simulando-switch-cisco-en-gns3/"><span itemprop="sameAs">artículo original</span></a></span></div><div><span datetime="2014-02-17T21:34" itemprop="datePublished">Publicado el lunes, 17 de febrero de 2014 a las 21:34 UTC</span></div><div><span>
Etiquetado como
redes, <a href="/label/virtualizacion"><span itemprop="articleSection">virtualizacion</span></a>, cisco, gns3, trunk, switch, vtp, vlan, general</span></div></div></div></section><div class="text-justify post-content"><div class="share-this only-twitter"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/pledin/2014/02/simulando-switch-cisco-en-gns3" st_title="Simulando switch cisco en GNS3 | PLEDIN"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><span itemprop="name"><p><a href="http://www.josedomingo.org/pledin/wp-content/uploads/2013/11/logo_gns3_small.png"><img alt="logo_gns3_small" src="http://www.josedomingo.org/pledin/wp-content/uploads/2013/11/logo_gns3_small.png" width="250" height="177" /></a>Como vimos en una <a title="Trabajando con switch en GNS3: VLAN y Trunk" href="http://www.josedomingo.org/pledin/2014/02/trabajando-con-switch-en-gns3-vlan-y-trunk/">entrada anterior</a>, el simulador de redes GNS3 nos ofrece un switch con unas funcionalidades limitadas. Por lo tanto, el objetivo de escribir esta entrada es la de explicar mi experiencia simulando un switch cisco en GNS3. En realidad lo que vamos&nbsp; a hacer es utilizar un router cisco de la gama 3700 como un switch con el m&oacute;dulo NM-16ESW. Este m&oacute;dulo proporciona al router un switch de 16 puertos, con lo que nos permite trabajar con algunas caracter&iacute;sticas como pueden ser las vlan, trunk, vtp, port aggregation o EherChannel, port mirroring, etc.</p> 
<h2></h2> 
<h2>Preparaci&oacute;n del entorno</h2> 
<p>La configuraci&oacute;n que tenemos que hacer en GNS3 se resumen en los siguientes pasos:</p> 
<ul> 
 <li>Instalamos la imagen del sistema operativos ios del router 3725 (configuramos de forma adecuada el par&aacute;metro idle pc). A&ntilde;adimos un router a nuestro entorno de trabajo y en la configuraci&oacute;n activamos el m&oacute;dulo NM-16ESW.</li> 
</ul> 
<p><a href="http://www.josedomingo.org/pledin/wp-content/uploads/2014/02/sw1.png"><img alt="sw1" src="http://www.josedomingo.org/pledin/wp-content/uploads/2014/02/sw1.png" width="400" height="324" /></a></p> 
<ul> 
 <li>Para no confundirnos si trabajamos con router y switch, podemos cambiar el s&iacute;mbolo de nuestro nuevo switch, para ello nos vamos a la opci&oacute;n <em>Symbol manager</em> dentro del men&uacute; <em>Edit</em>.</li> 
</ul> 
<p><a href="http://www.josedomingo.org/pledin/wp-content/uploads/2014/02/sw2.png"><img alt="sw2" src="http://www.josedomingo.org/pledin/wp-content/uploads/2014/02/sw2.png" width="400" height="341" /></a></p> 
<ul> 
 <li>Ahora ya tenemos nuestro switch con 16 puertos en el rango de Fastethernet 1/0 – 15, el &uacute;ltimo paso es activar los 16 puertos:</li> 
</ul> 
<p><a href="http://www.josedomingo.org/pledin/wp-content/uploads/2014/02/sw3.png"><img alt="sw3" src="http://www.josedomingo.org/pledin/wp-content/uploads/2014/02/sw3.png" width="400" height="389" /></a></p> 
<p>Veamos informaci&oacute;n sobre los puertos:</p> 
<pre>R1#show ip interface brief</pre> 
<p>Si al ejecutar esta ordens, encontramos en la columna “Status” el valor “down”, tenemos que activar los puertos ejecutando los siguientes comandos (adem&aacute;s le voy a cambiar el nombre a sw1):</p> 
<pre>R1# configure terminal
R1(config)#hostname sw1
sw1(config)#interface range FastEthernet 1/0 - 15
sw1(config-if-range)#no shutdown
sw1(config-if-range)#switchport</pre> 
<p>En el siguiente escenario:</p> 
<p><img alt="sw4" src="http://www.josedomingo.org/pledin/wp-content/uploads/2014/02/sw4.png" width="371" height="262" />Podemos comprobar que los dos equipos tienen conectividad:</p> 
<pre>VPCS[1]&gt; ping 192.168.1.2
192.168.1.2 icmp_seq=1 ttl=64 time=0.068 ms</pre> 
<h2>Ejemplo: vlan, trunk y vtp</h2> 
<p>Vamos a realizar el ejemplo que estudiamos en una <a title="Trabajando con switch en GNS3: VLAN y Trunk" href="http://www.josedomingo.org/pledin/2014/02/trabajando-con-switch-en-gns3-vlan-y-trunk/">entrada anterior</a>.</p> 
<p><a href="http://www.josedomingo.org/pledin/wp-content/uploads/2014/02/g1.png"><img alt="g1" src="http://www.josedomingo.org/pledin/wp-content/uploads/2014/02/g1.png" width="636" height="384" /></a>En este caso vamos a crear las vlan en el switch sw1 y la vamos a propagar al otro switch utilizando el protocolo VTP (<a href="http://es.wikipedia.org/wiki/VLAN_Trunking_Protocol">Vlan Trunking Protocol</a>). Vamos a ver los pasos que tenemos que dar:</p> 
<p>1) Creamos las vlan en sw1 y asignamos el puerto FE1/0 a la primera vlan y el puerto FE1/1 a la segunda vlan.</p> 
<pre>sw1#vlan database
sw1(vlan)#vlan 10 name prof
sw1(vlan)#vlan 20 name alum
sw1(vlan)#exit 
sw1#show vlan-switch

sw1(config)#interface FA1/0
sw1(config-if)#switchport access vlan 10

sw1(config)#interface FA1/1
sw1(config-if)#switchport access vlan 20</pre> 
<p>2) Configuramos el switch sw1 como servidor VTP e indicamos un nombre de dominio. Posteriormente el otro switch se configurara como cliente VTP con el mismo nombre de dominio con lo que se crear&aacute;n las mismas vlan.</p> 
<pre>sw1(config)#vtp mode server
sw1(config)#vtp domain local</pre> 
<p>3) Configuramos el trunk, que ser&aacute; la conexi&oacute;n que vamos a realizar por los puertos FA1/15 y por donde encapsularemos el tr&aacute;fico de los dos vlan (hay que a&ntilde;adir todas las vlan 1-1005).</p> 
<pre>sw1(config)#interface FastEthernet 1/15
sw1(config-if)#switchport mode trunk
sw1(config-if)#switchport trunk allowed vlan 1-1005</pre> 
<p>4) Configuramos el segundo switch: indicamos que va a ser cliente vtp, y asignamos los distintos puertos:</p> 
<pre>sw2(config)#vtp mode client
sw2(config)#vtp domain local

sw2(config)#interface FastEthernet 1/15
sw2(config-if)#switchport mode trunk
sw2(config-if)#switchport trunk allowed vlan 1-1005 

sw2(config)#interface FA1/0
sw2(config-if)#switchport access vlan 10

sw2(config)#interface FA1/1
sw2(config-if)#switchport access vlan 20

sw2# show vlan-switch</pre> 
<p>Como hemos visto anteriormente usamos <em>show vlan-switch</em>, para obtner la informaci&oacute;n de vlan, y <em>show interface trunk</em>, para obtener informaci&oacute;n del trunk.</p> 
<p>Como podemos comprobar a continuaci&oacute;n los equipos de las dos vlan tienen conexi&oacute;n entre ellos:</p> 
<pre>VPCS[1]&gt; ping 192.168.10.2&nbsp; &nbsp;
192.168.10.2 icmp_seq=1 ttl=64 time=0.324 ms

VPCS[3]&gt; ping 192.168.20.2
192.168.20.2 icmp_seq=1 ttl=64 time=0.445 ms</pre></span></div><section><a id="share"></a><h1>Compartir</h1><div class="share-this"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/pledin/2014/02/simulando-switch-cisco-en-gns3" st_title="Simulando switch cisco en GNS3 | PLEDIN"></span><span displayText="Facebook" class="st_facebook_vcount" st_url="http://www.blogstack.info/post/pledin/2014/02/simulando-switch-cisco-en-gns3" st_title="Simulando switch cisco en GNS3 | PLEDIN"></span><span displayText="Google +" class="st_googleplus_vcount" st_url="http://www.blogstack.info/post/pledin/2014/02/simulando-switch-cisco-en-gns3" st_title="Simulando switch cisco en GNS3 | PLEDIN"></span><span displayText="LinkedIn" class="st_linkedin_vcount" st_url="http://www.blogstack.info/post/pledin/2014/02/simulando-switch-cisco-en-gns3" st_title="Simulando switch cisco en GNS3 | PLEDIN"></span><span displayText="Meneame" class="st_meneame_vcount" st_url="http://www.blogstack.info/post/pledin/2014/02/simulando-switch-cisco-en-gns3" st_title="Simulando switch cisco en GNS3 | PLEDIN"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div id="widget"></div></section><hr/></article></div><div class="col-xs-12 col-sm-12 col-md-4"><aside><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section><h3>¡Suscríbete!</h3><ul class="list-unstyled"><li><a href="/label/virtualizacion/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta virtualizacion</a></li></ul></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigRectangle"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section><h3>Redes sociales</h3><p>¿Te gusta Blog Stack? ¡Compártelo!</p><div class="social-networks"><!-- Facebook --><div class="social-network"><div data-share="true" data-show-faces="false" data-action="like" data-width="310" data-layout="box_count" data-href="http://www.blogstack.info/" class="fb-like"></div></div><!-- Google+ --><div class="social-network"><div class="g-plusone" data-href="http://www.blogstack.info/" data-size="tall"></div></div></div></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts"></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigSkycraper"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts_0"></section></div></div></aside></div></div></div><footer><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="footer"><a href="/">Blog Stack</a> por <a href="https://twitter.com/picodotdev/">pico.dev</a> está publicado bajo la licencia de software libre <a href="http://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public</a> en <a href="https://github.com/picodotdev/blog-stack">GitHub <span class="entypo-social"></span></a>.<br/>
El contenido agregado conserva la licencia de su bitácora.<br/>
«Powered by» <a href="https://github.com/picodotdev/blogstack">Blog Stack</a>, <a href="http://tapestry.apache.org/">Apache Tapestry</a>, <a href="https://www.openshift.com/">OpenShift</a>, <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://www.oracle.com/es/technologies/java/overview/index.html">Java</a> y más software libre o de código abierto, inspirado en <a href="http://octopress.org/">Octopress</a>.<br/><span class="copyleft">©</span> pico.dev 2015
</div></div></div></div></footer><div id="fb-root"></div><script type="text/javascript">var require = {
  "waitSeconds" : 300,
  "shim" : {
    "t5/core/typeahead" : [
      "jquery"
    ],
    "bootstrap/affix" : [
      "bootstrap/transition"
    ],
    "bootstrap/alert" : [
      "bootstrap/transition"
    ],
    "bootstrap/modal" : [
      "bootstrap/transition"
    ],
    "bootstrap/tab" : [
      "bootstrap/transition"
    ],
    "bootstrap/transition" : [
      "jquery"
    ],
    "bootstrap/button" : [
      "bootstrap/transition"
    ],
    "bootstrap/scrollspy" : [
      "bootstrap/transition"
    ],
    "bootstrap/collapse" : [
      "bootstrap/transition"
    ],
    "bootstrap/dropdown" : [
      "bootstrap/transition"
    ],
    "bootstrap/tooltip" : [
      "bootstrap/transition"
    ],
    "bootstrap/carousel" : [
      "bootstrap/transition"
    ],
    "bootstrap/popover" : [
      "bootstrap/tooltip"
    ]
  },
  "baseUrl" : "/modules"
};
</script><script src="/assets/tapestry5/require.js" type="text/javascript"></script><script src="/assets/tapestry5/underscore-1.5.2.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/scriptaculous.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/effects.js" type="text/javascript"></script><script src="/assets/tapestry5/t53-compatibility.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery-noconflict.js" type="text/javascript"></script><script type="text/javascript">require(["t5/core/pageinit"], function(pi) { pi([], [
  "app/analytics",
  [
    "app/karmacracy:init",
    {
      "selector" : "#widget",
      "id" : 457,
      "url" : "http://www.blogstack.info/post/pledin/2014/02/simulando-switch-cisco-en-gns3"
    }
  ],
  "app/facebook",
  "app/googleplus",
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts",
      "source" : "pledin",
      "name" : "PLEDIN"
    }
  ],
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts_0",
      "source" : "blogstack",
      "name" : "Blog Stack"
    }
  ],
  [
    "app/adsensem:init",
    {
      "blogstack" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlot" : "1397019380"
      }
    }
  ]
]); });</script></body></html>