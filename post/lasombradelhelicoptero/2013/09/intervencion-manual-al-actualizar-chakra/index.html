<!DOCTYPE html><html data-debug-enabled="true" data-locale="es_ES" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="Apache Tapestry Framework (version 5.4-beta-16)" name="generator"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta pagina="Post"/><title>Intervención manual al actualizar Chakra | La sombra del helicóptero</title><!-- Resources --><link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/><link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link title="Portada" type="application/atom+xml" rel="alternate" href="/feed.atom.xml"/><link type="image/png" rel="icon" href="/assets/images/favicon.png"/><meta content="Post" name="tapestry-page-name"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/bootstrap/css/bootstrap.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/exception-frame.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry-console.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tree.css"/><link type="text/css" rel="stylesheet" href="/assets/css/core.css"/></head><body data-page-initialized="false"><script type="text/javascript">document.write("<div class=\"pageloading-mask\"><div></div></div>");</script><header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><h1><a class="blogstack" href="/"><span class="glyphicon glyphicon-th"></span> Blog <span class="stack">Stack</span></a></h1></div><div class="col-xs-12 col-sm-12 col-md-6"><nav role="navigation"><ul class="list-unstyled list-inline"><li><a class="header" href="/">Inicio</a></li><li><a class="header" href="/archive">Archivo</a></li><li><a class="header" href="/faq">Preguntas frecuentes</a></li><li><a class="header" href="/faq#aggregate">¿Quieres agregar tu bitácora?</a></li></ul></nav></div><div class="col-xs-6 col-sm-6 col-md-2"><a title="Fuente RSS, ¡suscríbete a BS!" alt="Fuente RSS" class="header" href="/feed.atom.xml"><span class="header icon entypo"></span></a><a title="Twitter, ¡sigue a BS!" alt="Twitter" class="header" href="http://twitter.com/blogstackinfo"><span class="header icon entypo-social"></span></a></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><h4>Un poco más que un agregador/planeta de bitácoras sobre programación, desarrollo, software libre, gnu/linux, tecnología, ...</h4></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="imagen-cabecera"><div class="imagen"><div class="col-xs-12 col-sm-12 col-md-12" id="billboard"></div></div></div></div></div></div></header><div class="container-fluid content"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8 content"><article itemtype="http://schema.org/BlogPosting" itemscope=""><a id="content"></a><header><h2><a href="/post/lasombradelhelicoptero/2013/09/intervencion-manual-al-actualizar-chakra"><span itemprop="headline">Intervención manual al actualizar Chakra</span></a></h2></header><div class="row labels"><div class="col-md-12"><a class="label" href="/label/kde"><img title="kde" alt="kde" src="/assets/images/labels/kde.png"/></a></div></div><section class="post-data"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div><span>Escrito por <span itemprop="author">Enrique Bravo</span> en la bitácora <a href="http://www.lasombradelhelicoptero.com">La sombra del helicóptero</a>, <a href="http://www.lasombradelhelicoptero.com/2013/09/intervencion-manual-al-actualizar-chakra.html"><span itemprop="sameAs">artículo original</span></a></span></div><div><span datetime="2013-09-17T20:26" itemprop="dateModified">Actualizado el martes, 17 de septiembre de 2013 a las 20:26 UTC</span></div><div><span>
Etiquetado como
chakra, tutorial, <a href="/label/kde"><span itemprop="articleSection">kde</span></a></span></div></div></div></section><div class="text-justify post-content"><div class="share-this only-twitter"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/lasombradelhelicoptero/2013/09/intervencion-manual-al-actualizar-chakra" st_title="Intervención manual al actualizar Chakra | La sombra del helicóptero"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><span itemprop="name">La rama estable de Chakra recibi&oacute; ayer una nueva actualizaci&oacute;n, con la particularidad de que precisa cierta intervenci&oacute;n del usuario para que no aparezcan problemas. De hecho, una mala interpretaci&oacute;n de los pasos a seguir pueden dejarte sin sistema (s&iacute;, a m&iacute; me ha pasado), por lo que creo conveniente orientar un poco sobre qu&eacute; hacer para que no ocurra semejante desgracia y como deshacer el entuerto.
<br />
<br />
<div style="clear: both; text-align: center;">
 <a href="http://1.bp.blogspot.com/-_XiczcfPQ4c/UjhlK_OupaI/AAAAAAAAD_U/PdSsavEErR8/s1600/Chakra+actualizada1.png"><img height="250" src="http://1.bp.blogspot.com/-_XiczcfPQ4c/UjhlK_OupaI/AAAAAAAAD_U/PdSsavEErR8/s400/Chakra+actualizada1.png" width="400" /></a>
</div>
<br />
<br />
<a></a>Lo primero, como es natural, el anuncio oficial de rigor, por parte de Neophytos Kolokotronis:
<br />
<br />
<blockquote>
 KDE SC 4.11.1 ya est&aacute; disponible oficialmente para todos los usuarios de Chakra:
</blockquote>
<blockquote>
 M&aacute;s de 70 correcciones de errores registradas, incluyendo mejoras en el gestor de ventanas Kwin, el gestor de archivos Dolphin, y otras. Los usuarios podr&aacute;n notar que el escritorio Plasma inicia m&aacute;s r&aacute;pido, el desplazamiento es m&aacute;s suave en Dolphin, y varias aplicaciones y herramientas usan menos memoria. Las mejoras incluyen el regreso del &quot;arrastrar y soltar&quot; desde la barra de tareas al paginador, arreglos en el subrayado y los colores para Kate, y la eliminaci&oacute;n de muchos peque&ntilde;os errores en el juego Kmahjongg. Hay muchas correcciones en la estabilidad y el habitual a&ntilde;adido de traducciones. Los cambios completos se encuentran listados 
 <a href="https://bugs.kde.org/buglist.cgi?query_format=advanced&amp;short_desc_type=allwordssubstr&amp;short_desc=&amp;long_desc_type=substring&amp;long_desc=&amp;bug_file_loc_type=allwordssubstr&amp;bug_file_loc=&amp;keywords_type=allwords&amp;keywords=&amp;bug_status=RESOLVED&amp;bug_status=VERIFIED&amp;bug_status=CLOSED&amp;emailtype1=substring&amp;email1=&amp;emailassigned_to2=1&amp;emailreporter2=1&amp;emailcc2=1&amp;emailtype2=substring&amp;email2=&amp;bugidtype=include&amp;bug_id=&amp;votes=&amp;chfieldfrom=2011-06-01&amp;chfieldto=Now&amp;chfield=cf_versionfixedin&amp;chfieldvalue=4.11.1&amp;cmdtype=doit&amp;order=Bug+Number&amp;field0-0-0=noop&amp;type0-0-0=noop&amp;value0-0-0=">aqu&iacute;</a>.
</blockquote>
<blockquote>
 Adem&aacute;s de eso, hemos actualizado el kernel de Linux a su versi&oacute;n 3.10.10. Hay que tener en cuenta que:
</blockquote>
<blockquote>
 - Se ha prescindido de madwifi, ya que ha sido discontinuado su mantenimiento y los controladores los provee ahora el kernel. Es seguro eliminar el paquete si te impide actualizar.
</blockquote>
<blockquote>
 - El m&oacute;dulo zram ha sido eliminado del kernel debido a 
 <a href="http://chakra-project.org/bbs/viewtopic.php?id=11505">problemas conocidos</a>. Estamos trabajando en el tema y lo arreglaremos tan pronto como podamos.
</blockquote>
<blockquote>
 - Notar&aacute;s algunas advertencias durante la actualizaci&oacute;n de mkinitcpio a la versi&oacute;n 0.15.0, as&iacute; como al iniciar el sistema. Por favor, consulta 
 <a href="http://chakra-project.org/bbs/viewtopic.php?id=11457">este post</a> para saber qu&eacute; hacer e informar sobre cualquier problema.
</blockquote>
<blockquote>
 - Tambi&eacute;n hemos lanzado la versi&oacute;n 319.49 de los controladores privativos de Nvidia, systemd 204 y kmod 14.
</blockquote>
<blockquote>
 &Iacute;tem m&aacute;s, hemos actualizado a udisks2. Esto no deber&iacute;a afectar al usuario, pero si tu sistema ejecuta alg&uacute;n script personal tuyo debes tener en cuenta que se ha movido el directorio /media a /run/media.
</blockquote>
<blockquote>
 Como siempre, antes de actualizar comprueba que tus repositorios est&aacute;n sincronizados con mirror-check (desde consola) o la utilidad Mirror-check, que se encuentra en la categor&iacute;a Internet del men&uacute; de aplicaciones.
</blockquote>
<br />
<b>Para actualizar sin complicaciones</b>
<br />Como indica el anuncio, los consabidos pasos que jam&aacute;s debemos olvidar:
<br />
<br />mirror-check
<br />
<br />sudo pacman -Syu
<br />
<br />Si la salida de este comando nos indica que madwifi necesita un kernel menor al que provee la nueva actualizaci&oacute;n, tendremos que eliminar el paquete:
<br />
<br />sudo pacman -R madwifi
<br />
<br />Y a lo nuestro:
<br />
<br />sudo pacman -Syu
<br />
<br />Una vez finalizada la actualizaci&oacute;n hemos de seguir los pasos que propone el 
<a href="http://chakra-project.org/bbs/viewtopic.php?id=11457">post del foro de Chakra</a> (en ingl&eacute;s):
<br />
<br />
<b>1&ordm; Modificar el mkinitcpio.conf</b>
<br />
<br />sudo nano /etc/mkinitcpio.conf
<br />
<br />En la l&iacute;nea que comienza con &quot;HOOKS&quot;, podemos eliminar varios par&aacute;metros cuyo uso se ha discontinuado o reemplazado por &quot;block&quot;. Podemos eliminar de la l&iacute;nea los par&aacute;metros fw, usb, scsi, mmc, pata, sata y virtio. L&oacute;gicamente no estar&aacute;n todos, pues depende del hardware de cada cual, en mi caso solo scsi, pata y sata.
<br />
<br />Tendremos que a&ntilde;adir tanto &quot;block&quot; como &quot;systemd&quot;. &iexcl;Ojo, el orden es muy importante! Deber&aacute; quedar tal que as&iacute;:
<br />
<br />
<b>HOOKS = &quot;base systemd autodetect block keymap resume filesystems&quot;</b>
<br />
<br />Tras guardar (CTRL+O) y salir (CTRL+X)
<b> </b>hacemos:
<br />
<br />sudo mkinitcpio -p linux
<br />
<br />
<b>2&ordm; Modificar el grub</b>
<br />
<br />sudo nano /etc/default/grub
<br />
<br />En la l&iacute;nea que se inicia con &quot;GRUB_CMDLINE_LINUX_DEFAULT&quot; hemos de a&ntilde;adir el par&aacute;metro &quot;rw&quot;, la m&iacute;a queda:
<br />
<br />GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet rw splash&quot;
<br />
<br />Tras guardar y salir como antes, rehacemos el grub. Si tenemos una partici&oacute;n con Windows debemos montarla antes (con Dolphin, por ejemplo, simplemente pulsando sobre el disco que aparecer&aacute; en el panel izquierdo) para que sea a&ntilde;adida. Como siempre, esto lo conseguimos con:
<br />
<br />sudo update-grub
<br />
<br />Ahora s&iacute;, toca reiniciar y disfrutar de KDE 4.11.1 y el kernel 3.10.10 que incorpora esta nueva actualizaci&oacute;n de nuestra distro favorita.
<br />
<br />
<div style="clear: both; text-align: center;">
 <a href="http://3.bp.blogspot.com/--Abo2Rpp0DE/UjhksjkATYI/AAAAAAAAD_M/mdw_lFy9sXw/s1600/Chakra+actualizada.png"><img height="351" src="http://3.bp.blogspot.com/--Abo2Rpp0DE/UjhksjkATYI/AAAAAAAAD_M/mdw_lFy9sXw/s400/Chakra+actualizada.png" width="400" /></a>
</div>
<br />
<b>Qu&eacute; hacer si Chakra no inicia</b>
<br />Este tipo de intervenciones manuales normalmente no suponen ning&uacute;n problema, pero para que todo vaya como la seda es muy importante hacer todos los pasos en orden y exactamente como se indica. En mi caso coloqu&eacute; el par&aacute;metro &quot;systemd&quot; donde me dio la gana (error de principiante, lo s&eacute;) y como consecuencia obtuve una bonita pantalla negra cuando deb&iacute;an iniciarse las X. Sea este tu problema o no, hay una elegante manera de tratar de solucionarlo, lo &uacute;nico que necesitaremos ser&aacute; un &quot;Live CD&quot; de una distribuci&oacute;n GNU/Linux a mano.
<br />
<br />Dispongo de un pendrive con la versi&oacute;n 2013.03 de Chakra Benz, la &uacute;ltima ISO que no causaba problemas de ning&uacute;n tipo al instalarla. Bien, tras iniciar sesi&oacute;n lo primero es abrir un terminal para crear nuestro directorio, que ser&aacute; el que acoger&aacute; nuestra partici&oacute;n ra&iacute;z. Lo llamaremos, por ejemplo, chakra. Lo haremos como root, utilizando el comando su (la contrase&ntilde;a en el &quot;Live CD&quot; de Chakra es &quot;root&quot;):
<br />
<br />su
<br />
<br />mkdir /mnt/chakra
<br />
<br />Ahora averiguamos, si es que lo ignoramos, la partici&oacute;n en que tenemos instalado nuestro Chakra habitual:
<br />
<br />fdisk -l
<br />
<br />En mi caso, dicha partici&oacute;n es sda2. Por lo tanto:
<br />
<br />mount /dev/sda2 /mnt/chakra
<br />
<br />Con lo cual estamos montando la ra&iacute;z de esa partici&oacute;n en nuestro directorio reci&eacute;n creado, de nombre chakra.&nbsp; Si tenemos particiones separadas para boot, var u otros directorios tambi&eacute;n habr&iacute;a que montarlas, aunque sospecho que si tus conocimientos dan para eso no precisas de este tutorial...
<br />
<br />A continuaci&oacute;n montamos los sistemas de ficheros:
<br />
<br />cd /mnt/chakra
<br />mount -t proc proc proc/
<br />mount -t sysfs sys sys/
<br />mount -o bind /dev dev/
<br />
<br />Y entramos como root en nuestro sistema:
<br />
<br />chroot /mnt/chakra
<br />
<br />Desde este momento podemos proceder como si estuvi&eacute;ramos (que de hecho, lo estamos) trabajando directamente con nuestro Chakra, el que no inicia. Por tanto, podemos editar como se explica m&aacute;s arriba nuestro archivo /etc/mkinitcpio.conf y dejarlo todo en orden. Para acabar, es preciso volver a generarlo:
<br />
<br />mkinitcpio -p linux
<br />
<br />O, dependiendo de d&oacute;nde estuviera el error, tambi&eacute;n har&aacute; falta editar el grub y regenerarlo con:
<br />
<br />update-grub
<br />
<br />Hecho todo lo anterior si, tras reiniciar, nuestro Chakra no ha vuelto a la vida, solo me queda recomendar que abr&aacute;is un post en los foros, ya sean los 
<a href="http://chakra-project.org/bbs/">oficiales</a> o la 
<a href="http://chaman-linux.com/chakra/index.php">comunidad en espa&ntilde;ol</a>. Saludos.</span></div><section><a id="share"></a><h1>Compartir</h1><div class="share-this"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/lasombradelhelicoptero/2013/09/intervencion-manual-al-actualizar-chakra" st_title="Intervención manual al actualizar Chakra | La sombra del helicóptero"></span><span displayText="Facebook" class="st_facebook_vcount" st_url="http://www.blogstack.info/post/lasombradelhelicoptero/2013/09/intervencion-manual-al-actualizar-chakra" st_title="Intervención manual al actualizar Chakra | La sombra del helicóptero"></span><span displayText="Google +" class="st_googleplus_vcount" st_url="http://www.blogstack.info/post/lasombradelhelicoptero/2013/09/intervencion-manual-al-actualizar-chakra" st_title="Intervención manual al actualizar Chakra | La sombra del helicóptero"></span><span displayText="LinkedIn" class="st_linkedin_vcount" st_url="http://www.blogstack.info/post/lasombradelhelicoptero/2013/09/intervencion-manual-al-actualizar-chakra" st_title="Intervención manual al actualizar Chakra | La sombra del helicóptero"></span><span displayText="Meneame" class="st_meneame_vcount" st_url="http://www.blogstack.info/post/lasombradelhelicoptero/2013/09/intervencion-manual-al-actualizar-chakra" st_title="Intervención manual al actualizar Chakra | La sombra del helicóptero"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div id="widget"></div></section><hr/></article></div><div class="col-xs-12 col-sm-12 col-md-4"><aside><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section><h3>¡Suscríbete!</h3><ul class="list-unstyled"><li><a href="/label/kde/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta kde</a></li></ul></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigRectangle"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section><h3>Redes sociales</h3><p>¿Te gusta Blog Stack? ¡Compártelo!</p><div class="social-networks"><!-- Facebook --><div class="social-network"><div data-share="true" data-show-faces="false" data-action="like" data-width="310" data-layout="box_count" data-href="http://www.blogstack.info/" class="fb-like"></div></div><!-- Google+ --><div class="social-network"><div class="g-plusone" data-href="http://www.blogstack.info/" data-size="tall"></div></div></div></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts"></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigSkycraper"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts_0"></section></div></div></aside></div></div></div><footer><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="footer"><a href="/">Blog Stack</a> por <a href="https://twitter.com/picodotdev/">pico.dev</a> está publicado bajo la licencia de software libre <a href="http://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public</a> en <a href="https://github.com/picodotdev/blog-stack">GitHub <span class="entypo-social"></span></a>.<br/>
El contenido agregado conserva la licencia de su bitácora.<br/>
«Powered by» <a href="https://github.com/picodotdev/blogstack">Blog Stack</a>, <a href="http://tapestry.apache.org/">Apache Tapestry</a>, <a href="https://www.openshift.com/">OpenShift</a>, <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://www.oracle.com/es/technologies/java/overview/index.html">Java</a> y más software libre o de código abierto, inspirado en <a href="http://octopress.org/">Octopress</a>.<br/><span class="copyleft">©</span> pico.dev 2015
</div></div></div></div></footer><div id="fb-root"></div><script type="text/javascript">var require = {
  "waitSeconds" : 300,
  "shim" : {
    "t5/core/typeahead" : [
      "jquery"
    ],
    "bootstrap/affix" : [
      "bootstrap/transition"
    ],
    "bootstrap/alert" : [
      "bootstrap/transition"
    ],
    "bootstrap/modal" : [
      "bootstrap/transition"
    ],
    "bootstrap/tab" : [
      "bootstrap/transition"
    ],
    "bootstrap/transition" : [
      "jquery"
    ],
    "bootstrap/button" : [
      "bootstrap/transition"
    ],
    "bootstrap/scrollspy" : [
      "bootstrap/transition"
    ],
    "bootstrap/collapse" : [
      "bootstrap/transition"
    ],
    "bootstrap/dropdown" : [
      "bootstrap/transition"
    ],
    "bootstrap/tooltip" : [
      "bootstrap/transition"
    ],
    "bootstrap/carousel" : [
      "bootstrap/transition"
    ],
    "bootstrap/popover" : [
      "bootstrap/tooltip"
    ]
  },
  "baseUrl" : "/modules"
};
</script><script src="/assets/tapestry5/require.js" type="text/javascript"></script><script src="/assets/tapestry5/underscore-1.5.2.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/scriptaculous.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/effects.js" type="text/javascript"></script><script src="/assets/tapestry5/t53-compatibility.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery-noconflict.js" type="text/javascript"></script><script type="text/javascript">require(["t5/core/pageinit"], function(pi) { pi([], [
  "app/analytics",
  [
    "app/karmacracy:init",
    {
      "selector" : "#widget",
      "id" : 334,
      "url" : "http://www.blogstack.info/post/lasombradelhelicoptero/2013/09/intervencion-manual-al-actualizar-chakra"
    }
  ],
  "app/facebook",
  "app/googleplus",
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts",
      "source" : "lasombradelhelicoptero",
      "name" : "La sombra del helicóptero"
    }
  ],
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts_0",
      "source" : "blogstack",
      "name" : "Blog Stack"
    }
  ],
  [
    "app/adsensem:init",
    {
      "blogstack" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlot" : "1397019380"
      }
    }
  ]
]); });</script></body></html>