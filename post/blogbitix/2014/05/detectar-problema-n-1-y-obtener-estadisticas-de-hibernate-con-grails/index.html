<!DOCTYPE html><html data-debug-enabled="true" data-locale="es_ES" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="Apache Tapestry Framework (version 5.4-beta-3)" name="generator"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta pagina="Post"/><title>Detectar problema N+1 y obtener estadísticas de Hibernate con Grails | Blog Bitix</title><!-- Resources --><link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/><link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link title="Portada" type="application/atom+xml" rel="alternate" href="/feed.atom.xml"/><link type="image/png" rel="icon" href="/assets/images/favicon.png"/><meta content="Post" name="tapestry-page-name"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/bootstrap/css/bootstrap.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/exception-frame.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry-console.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tree.css"/><link type="text/css" rel="stylesheet" href="/assets/css/core.css"/></head><body data-page-initialized="false"><header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><h1><a class="blogstack" href="/"><span class="glyphicon glyphicon-th"></span> Blog <span class="stack">Stack</span></a></h1></div><div class="col-xs-12 col-sm-12 col-md-8" id="horizontalSkycraper"></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><h4>Un poco más que un agregador/planeta de bitácoras sobre programación, desarrollo, software libre, gnu/linux, tecnología, ...</h4></div></div></div></header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><nav role="navigation"><ul class="nav nav-pills menu"><li><a href="/">Inicio</a></li><li><a href="/archive">Archivo</a></li><li><a href="/faq">Preguntas frecuentes</a></li></ul></nav></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8 content"><article itemtype="http://schema.org/BlogPosting" itemscope=""><a id="content"></a><header><h2><a href="/post/blogbitix/2014/05/detectar-problema-n-1-y-obtener-estadisticas-de-hibernate-con-grails"><span itemprop="headline">Detectar problema N+1 y obtener estadísticas de Hibernate con Grails</span></a></h2></header><section class="post-data"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div><span>Escrito por <span itemprop="author">pico.dev</span> en la bitácora <a href="http://picodotdev.github.io/blog-bitix/">Blog Bitix</a>, <a href="http://picodotdev.github.io/blog-bitix/2014/05/detectar-problema-n-plus-1-y-obtener-estadisticas-de-hibernate-con-grails/"><span itemprop="sameAs">entrada original</span></a></span></div><div><span datetime="2014-05-30T18:30" itemprop="datePublished">Publicado el viernes, 30 de mayo de 2014 a las 18:30 UTC</span></div><div><span>
Etiquetado como
blog-stack, planeta-codigo, <a href="/label/programacion"><span itemprop="articleSection">programacion</span></a>, <a href="/label/software"><span itemprop="articleSection">software</span></a>, grails, <a href="/label/java"><span itemprop="articleSection">java</span></a></span></div></div></div></section><div class="text-justify post-content"><div class="share-this only-twitter"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/blogbitix/2014/05/detectar-problema-n-1-y-obtener-estadisticas-de-hibernate-con-grails" st_title="Detectar problema N+1 y obtener estadísticas de Hibernate con Grails | Blog Bitix"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><span itemprop="name"><div style="float: right; text-align: right;"> 
 <img src="http://picodotdev.github.io/blog-bitix/images/custom/logotipos/grails.png" alt="Grails" title="Grails" />
 <br /> 
</div> 
<p>Una base de datos relacional guarda los datos de forma diferente al modelo orientado a objetos que utilizamos en lenguajes como <a href="http://www.oracle.com/us/technologies/java/overview/index.html">Java</a>, <a href="http://www.microsoft.com/net">C#</a> o <a href="https://www.python.org/">Python</a>. Los <a href="http://en.wikipedia.org/wiki/Object-relational_mapping">ORM (Object-relational mapping)</a> tratan de hacer una correspondencia entre los dos modelos, el relacional de las bases de datos y el orientado a objetos de los lenguajes. Una de las ventajas de usar en una aplicaci&oacute;n un ORM para acceder a la base de datos es que podemos hacer una correspondencia entre los datos de una base de datos relacional y trabajar con esos datos utilizando el modelo orientado a objetos del lenguaje de programaci&oacute;n que usemos.</p> 
<p>Sin embargo, el ORM env&iacute;a sentencias SQL para recuperar los datos de la base de datos relacional seg&uacute;n vamos navegando con los m&eacute;todos de acceso a otros objetos y sus relaciones. Depende de como el ORM haga las consultas para recuperar los datos de la base de datos relacional puede generar muchas SQL, producir un bajo rendimiento en la aplicaci&oacute;n y una carga de trabajo considerable para la base de datos.</p> 
<p>En los ORM es conocido el <a href="http://stackoverflow.com/questions/97197/what-is-the-n1-selects-issue">problema N+1</a>. Consiste en lo siguiente, supongamos que tenemos dos tablas relacionadas autores y libros, y que la relaci&oacute;n entre estas dos tablas es de 1 a N, de modo que un autor puede tener varios libros y un libro ha sido escrito por un &uacute;nico autor. Para recuperar todos los autores necesitar&iacute;amos una consulta y si no hacemos una join con la tabla de libros para recuperar los libros de cada autor tendr&iacute;amos que hacer otra consulta con lo que tendr&iacute;amos el problema N+1 al hacer un bucle sobre los autores (1 consulta para los autores y N para los libros de cada autor).</p> 
<p>El problema est&aacute; en que el ORM lanza las consultas de forma autom&aacute;tica seg&uacute;n necesita los datos de modo que si para un autor no tiene los libros lanza una SQL para recuperarlos, como programadores llamar a un m&eacute;todo para acceder a los libros es muy c&oacute;modo y transparente para nosotros (trabajamos solo con objetos) pero hemos de ser conscientes de las consultas que lanza el ORM porque podemos producir una situaci&oacute;n de N+1.</p> 
<p>Para evitar el problema N+1 hemos de recuperar todos los datos haciendo una &uacute;nica consulta, haciendo una join entre las tablas autor y libro. En <a href="http://hibernate.org/">Hibernate</a> podemos resolverlo con una consulta HQL como la siguiente:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/87ae5e7c184c5b51844d.js?file=hql.txt"></script> 
 <noscript>
  <pre><code>&quot;from Autor as autor left outer join autor.libros as libro&quot;</code></pre>
 </noscript>
</div> 
<p></p> 
<p>O con una criteria en Grails:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/87ae5e7c184c5b51844d.js?file=Criteria.groovy"></script> 
 <noscript>
  <pre><code>Criteria criteria = session.createCriteria(Autor.class);
criteria.setFetchMode(&quot;libros&quot;, FetchMode.EAGER);</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Pero para saber en que sitios de nuestro c&oacute;digo debemos establecer los m&eacute;todos de b&uacute;squeda EAGER necesitamos detectar los problemas N+1, con la experiencia conoceremos donde se pueden producir, otros casos se nos pueden pasar por alto y necesitaremos detectarlos. Para detectar estos problemas N+1 o para determinar si una p&aacute;gina es muy lenta porque hace muchas consultas a la base de datos Hibernate dispone de unas estad&iacute;sticas mediante las cuales podemos conocer cuantas consultas select, update, insert, conexiones, y m&aacute;s datos por entidad y relaci&oacute;n… se han lanzado por haber accedido a una p&aacute;gina. Podemos acceder a las estad&iacute;sticas de Hibernate mediante el objeto <a href="https://docs.jboss.org/hibernate/orm/4.3/javadocs/org/hibernate/SessionFactory.html">SessionFactory</a> y el m&eacute;todo <a href="https://docs.jboss.org/hibernate/orm/4.3/javadocs/org/hibernate/SessionFactory.html#getStatistics%28%29">getStatistics</a>, con ese objeto y m&eacute;todo podemos obtener estad&iacute;sticas globales y para cada una de las entidades persistidas por Hibernate.</p> 
<p>En Grails podemos hacer un controlador y gsp que nos muestre esa informaci&oacute;n que podr&iacute;an ser de la siguiente forma:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/87ae5e7c184c5b51844d.js?file=HibernateController.groovy"></script> 
 <noscript>
  <pre><code>package io.github.picodotdev.grails.controllers

import javax.servlet.http.HttpServletResponse

import grails.converters.JSON
import grails.util.Environment

import io.github.picodotdev.grails.domain.Autor
import io.github.picodotdev.grails.log.HibernateLogger

class HibernateController {

    def sessionFactory

	def doTest() {
		def autor = new Autor(nombre:'picodotdev')
		autor.save()

		autor = Autor.get(autor.id)
		autor.delete()

		return redirect(action:'index')
	}

    def index() {
    	def e = test()
    	if (!e) {
    		return response.sendError(HttpServletResponse.SC_FORBIDDEN)
    	}
    
        def model = [estadisticas:sessionFactory.statistics]
        
        return render(view:'/hibernate/index', model:model)
    }

    def enableStatistics() {
    	def e = test()
    	if (!e) {
    		return response.sendError(HttpServletResponse.SC_FORBIDDEN)
    	}

		// Habilitar estad&iacute;stics
		sessionFactory.statistics.setStatisticsEnabled(true)
    
		redirect(action:'index')
    }

    def disableStatistics() {
    	def e = test()
    	if (!e) {
    		return response.sendError(HttpServletResponse.SC_FORBIDDEN)
    	}

		// Deshabilitar estad&iacute;sticas
		sessionFactory.statistics.setStatisticsEnabled(false)
    	
		redirect(action:'index')
    }

    def clearEstadisticas() {
    	def e = test()
    	if (!e) {
    		return response.sendError(HttpServletResponse.SC_FORBIDDEN)
    	}
    
		sessionFactory.statistics.clear()
		redirect(action:'index')
    }
    
    def clearMensajesHibernate() {
    	def e = test()
    	if (!e) {
    		return response.sendError(HttpServletResponse.SC_FORBIDDEN)
    	}
    
		HibernateLogger.clear()
		redirect(action:'index')
    }

    def logSummary() {
    	def e = test()
    	if (!e) {
    		return response.sendError(HttpServletResponse.SC_FORBIDDEN)
    	}
    
		sessionFactory.statistics.logSummary()
		redirect(action:'index')
    }
    
    private boolean test() {
       	if (Environment.current != Environment.DEVELOPMENT) {
    		return false
    	}
    	return true
    }
}</code></pre>
 </noscript>
</div> 
<div>
 <script src="https://gist.github.com/picodotdev/87ae5e7c184c5b51844d.js?file=index.gsp"></script> 
 <noscript>
  <pre><code>&lt;%@ page import=&quot;java.text.SimpleDateFormat&quot; %&gt;
&lt;%@ page import=&quot;io.github.picodotdev.grails.log.HibernateLogger&quot; %&gt;
&lt;%
	SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy HH:mm:ss Z&quot;)
%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Estad&iacute;sticas de Hibernate&lt;/title&gt;
&lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
&lt;link href=&quot;//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;/&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;g:set var=&quot;o&quot; value=&quot;${null}&quot; /&gt;

	&lt;div class=&quot;container-fluid&quot;&gt;
		&lt;h1&gt;Estad&iacute;sticas de Hibernate&lt;/h1&gt;
	
		&lt;g:if test=&quot;${estadisticas.statisticsEnabled}&quot;&gt;
			&lt;g:link action=&quot;disableStatistics&quot; class=&quot;btn btn-primary&quot;&gt;Deshabilitar estad&iacute;sticas&lt;/g:link&gt;
		&lt;/g:if&gt;
		&lt;g:else&gt;
			&lt;g:link action=&quot;enableStatistics&quot; class=&quot;btn btn-primary&quot;&gt;Habilitar estad&iacute;sticas&lt;/g:link&gt;
		&lt;/g:else&gt;
		&lt;g:if test=&quot;${estadisticas.statisticsEnabled}&quot;&gt;
			&lt;g:link action=&quot;clearEstadisticas&quot; class=&quot;btn btn-primary&quot;&gt;Reiniciarlizar estad&iacute;sticas&lt;/g:link&gt;
		&lt;/g:if&gt;
		&lt;g:link action=&quot;clearMensajesHibernate&quot; class=&quot;btn btn-primary&quot;&gt;Reiniciarlizar mensajes de Hibernate&lt;/g:link&gt;
		&lt;g:link action=&quot;logSummary&quot; class=&quot;btn btn-primary&quot;&gt;Informe resumen&lt;/g:link&gt;

		&lt;h2&gt;Estad&iacute;sticas&lt;/h2&gt;
		&lt;g:if test=&quot;${!estadisticas.statisticsEnabled}&quot;&gt;
			Las estad&iacute;sticas de Hibernate no est&aacute;n habilitadas.
		&lt;/g:if&gt;
		&lt;g:else&gt;
			&lt;div class=&quot;row&quot;&gt;
				&lt;div class=&quot;col-md-4&quot;&gt;
					&lt;h3&gt;Conexiones, sesiones y transacciones&lt;/h3&gt;
					&lt;ul class=&quot;list-group&quot;&gt;
						&lt;li class=&quot;list-group-item&quot;&gt;StartTime  &lt;span class=&quot;badge&quot;&gt;${sdf.format(new Date(estadisticas.startTime))}&lt;/span&gt;&lt;/li&gt;
						&lt;li	class=&quot;list-group-item&quot; title=&quot;Get the global number of connections asked by the sessions (the actual number of connections used may be much smaller depending whether you use a connection pool or not)&quot;&gt;ConnectCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.connectCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;The number of prepared statements that were released&quot;&gt;CloseStatementCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.closeStatementCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;Global number of sessions opened&quot;&gt;SessionOpenCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.sessionOpenCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;Global number of sessions closed&quot;&gt;SessionCloseCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.sessionCloseCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;The number of transactions we know to have been successful&quot;&gt;SuccessfulTransactionCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.successfulTransactionCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;The number of transactions we know to have completed&quot;&gt;TransactionCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.transactionCount}&lt;/span&gt;&lt;/li&gt;
					&lt;/ul&gt;
				&lt;/div&gt;
				&lt;div class=&quot;col-md-4&quot;&gt;
					&lt;h3&gt;Sentencias&lt;/h3&gt;
					&lt;ul class=&quot;list-group&quot;&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;Get global number of executed queries&quot;&gt;QueryExecutionCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.queryExecutionCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;The number of prepared statements that were acquired&quot;&gt;PrepareStatementCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.prepareStatementCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;Get all executed query strings&quot;&gt;Queries: ${estadisticas.queries.join(', ')}&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;Get the query string for the slowest query&quot;&gt;QueryExecutionMaxTimeQueryString &lt;span class=&quot;badge&quot;&gt;${estadisticas.queryExecutionMaxTimeQueryString}&lt;/span&gt;&lt;/li&gt;
					&lt;/ul&gt;
				&lt;/div&gt;
				&lt;div class=&quot;col-md-4&quot;&gt;
					&lt;h3&gt;Entidades&lt;/h3&gt;
					&lt;ul class=&quot;list-group&quot;&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;Get global number of entity fetchs&quot;&gt;EntityFetchCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.entityFetchCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;Get global number of entity loads&quot;&gt;EntityLoadCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.entityLoadCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;Get global number of entity inserts&quot;&gt;EntityInsertCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.entityInsertCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;Get global number of entity updates&quot;&gt;EntityUpdateCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.entityUpdateCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;Get global number of entity deletes&quot;&gt;EntityDeleteCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.entityDeleteCount}&lt;/span&gt;&lt;/li&gt;
					&lt;/ul&gt;
				&lt;/div&gt;
			&lt;/div&gt;
			&lt;div class=&quot;row&quot;&gt;
				&lt;div class=&quot;col-md-4&quot;&gt;
					&lt;h3&gt;Colecciones&lt;/h3&gt;
					&lt;ul class=&quot;list-group&quot;&gt;
						&lt;li class=&quot;list-group-item&quot;	title=&quot;Global number of collections fetched&quot;&gt;CollectionFetchCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.collectionFetchCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot;	title=&quot;Global number of collections loaded&quot;&gt;CollectionLoadCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.collectionLoadCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot; title=&quot;Global number of collections recreated&quot;&gt;CollectionRecreateCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.collectionRecreateCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot;	title=&quot;Global number of collections updated&quot;&gt;CollectionUpdateCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.collectionUpdateCount}&lt;/span&gt;&lt;/li&gt;
						&lt;li class=&quot;list-group-item&quot;	title=&quot;Global number of collections removed&quot;&gt;CollectionRemoveCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.collectionRemoveCount}&lt;/span&gt;&lt;/li&gt;
					&lt;/ul&gt;
				&lt;/div&gt;
				&lt;div class=&quot;row&quot;&gt;
					&lt;div class=&quot;col-md-4&quot;&gt;
						&lt;h3&gt;Cache&lt;/h3&gt;
						&lt;ul class=&quot;list-group&quot;&gt;
							&lt;li class=&quot;list-group-item&quot;	title=&quot;Get the global number of flush executed by sessions (either implicit or explicit)&quot;&gt;FlushCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.flushCount}&lt;/span&gt;&lt;/li&gt;
							&lt;li class=&quot;list-group-item&quot;	title=&quot;The number of StaleObjectStateExceptions that occurred&quot;&gt;OptimisticFailureCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.optimisticFailureCount}&lt;/span&gt;&lt;/li&gt;
							&lt;li class=&quot;list-group-item&quot;	title=&quot;Get the global number of cached queries successfully retrieved from cache&quot;&gt;QueryCacheHitCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.queryCacheHitCount}&lt;/span&gt;&lt;/li&gt;
							&lt;li class=&quot;list-group-item&quot;	title=&quot;Get the global number of cached queries *not* found in cache&quot;&gt;QueryCacheMissCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.queryCacheMissCount}&lt;/span&gt;&lt;/li&gt;
							&lt;li class=&quot;list-group-item&quot;	title=&quot;Get the global number of cacheable queries put in cache&quot;&gt;QueryCachePutCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.queryCachePutCount}&lt;/span&gt;&lt;/li&gt;
							&lt;li class=&quot;list-group-item&quot;	title=&quot;Get the time in milliseconds of the slowest query&quot;&gt;QueryExecutionMaxTime	&lt;span class=&quot;badge&quot;&gt;${estadisticas.queryExecutionMaxTime}&lt;/span&gt;&lt;/li&gt;
							&lt;li class=&quot;list-group-item&quot;	title=&quot;Global number of cacheable entities/collections successfully retrieved from the cache&quot;&gt;SecondLevelCacheHitCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.secondLevelCacheHitCount}&lt;/span&gt;&lt;/li&gt;
							&lt;li class=&quot;list-group-item&quot;	title=&quot;Global number of cacheable entities/collections not found in the cache and loaded from the database&quot;&gt;SecondLevelCacheMissCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.secondLevelCacheMissCount}&lt;/span&gt;&lt;/li&gt;
							&lt;li class=&quot;list-group-item&quot;	title=&quot;Global number of cacheable entities/collections put in the cache&quot;&gt;SecondLevelCachePutCount &lt;span class=&quot;badge&quot;&gt;${estadisticas.secondLevelCachePutCount}&lt;/span&gt;&lt;/li&gt;
						&lt;/ul&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
	
			&lt;h3&gt;Detalles entidades&lt;/h3&gt;
			&lt;div class=&quot;row&quot;&gt;
				&lt;div class=&quot;col-md-12&quot;&gt;
					&lt;% o = estadisticas.entityNames.sort() %&gt; 
					&lt;g:each in=&quot;${o}&quot; var=&quot;n&quot; status=&quot;i&quot;&gt;
						&lt;g:set var=&quot;entityStatistics&quot; value=&quot;${estadisticas.getEntityStatistics(n)}&quot; /&gt;
			
						&lt;g:if test=&quot;${(i % 3) == 0}&quot;&gt;
							&lt;div class=&quot;row&quot;&gt;
						&lt;/g:if&gt;
			
						&lt;div class=&quot;col-md-4&quot;&gt;					
							&lt;ul class=&quot;list-group&quot;&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;&lt;b&gt;${n}&lt;/b&gt;&lt;/li&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;DeleteCount &lt;span class=&quot;badge&quot;&gt;${entityStatistics.deleteCount}&lt;/span&gt;&lt;/li&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;FetchCount &lt;span class=&quot;badge&quot;&gt;${entityStatistics.fetchCount}&lt;/span&gt;&lt;/li&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;InsertCount &lt;span class=&quot;badge&quot;&gt;${entityStatistics.insertCount}&lt;/span&gt;&lt;/li&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;LoadCount &lt;span class=&quot;badge&quot;&gt;${entityStatistics.loadCount}&lt;/span&gt;&lt;/li&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;OptimisticFailureCount &lt;span class=&quot;badge&quot;&gt;${entityStatistics.optimisticFailureCount}&lt;/span&gt;&lt;/li&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;UpdateCount &lt;span class=&quot;badge&quot;&gt;${entityStatistics.updateCount}&lt;/span&gt;&lt;/li&gt;
							&lt;/ul&gt;
						&lt;/div&gt;
			
						&lt;g:if test=&quot;${(i % 3) == 2 || o.length == (i + 1) }&quot;&gt;
							&lt;/div&gt;
						&lt;/g:if&gt;
					&lt;/g:each&gt;
				&lt;/div&gt;
			&lt;/div&gt;
				
			&lt;h3&gt;Detalles colecciones&lt;/h3&gt;
			&lt;div class=&quot;row&quot;&gt;
				&lt;div class=&quot;col-md-12&quot;&gt;
					&lt;% o = estadisticas.collectionRoleNames.sort() %&gt;
					&lt;g:each in=&quot;${o}&quot; var=&quot;n&quot; status=&quot;i&quot;&gt;
						&lt;g:set var=&quot;collectionStatistics&quot; value=&quot;${estadisticas.getCollectionStatistics(n)}&quot; /&gt;
			
						&lt;g:if test=&quot;${(i % 3) == 0}&quot;&gt;
							&lt;div class=&quot;row&quot;&gt;
						&lt;/g:if&gt;
			
						&lt;div class=&quot;col-md-4&quot;&gt;
							&lt;ul class=&quot;list-group&quot;&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;&lt;b&gt;${n}&lt;/b&gt;&lt;/li&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;FetchCount &lt;span class=&quot;badge&quot;&gt;${collectionStatistics.fetchCount}&lt;/span&gt;&lt;/li&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;LoadCount &lt;span class=&quot;badge&quot;&gt;${collectionStatistics.loadCount}&lt;/span&gt;&lt;/li&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;RecreateCount &lt;span class=&quot;badge&quot;&gt;${collectionStatistics.recreateCount}&lt;/span&gt;&lt;/li&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;RemoveCount &lt;span class=&quot;badge&quot;&gt;${collectionStatistics.removeCount}&lt;/span&gt;&lt;/li&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;UpdateCount &lt;span class=&quot;badge&quot;&gt;${collectionStatistics.updateCount}&lt;/span&gt;&lt;/li&gt;
							&lt;/ul&gt;
						&lt;/div&gt;
			
						&lt;g:if test=&quot;${(i % 3) == 2 || o.length == (i + 1) }&quot;&gt;
							&lt;/div&gt;
						&lt;/g:if&gt;
					&lt;/g:each&gt;
				&lt;/div&gt;
			&lt;/div&gt;
	
			&lt;h3&gt;Detalles cache segundo nivel&lt;/h3&gt;
			&lt;div class=&quot;row&quot;&gt;
				&lt;div class=&quot;col-md-12&quot;&gt;
					&lt;% o = estadisticas.secondLevelCacheRegionNames.sort() %&gt;
					&lt;g:each	in=&quot;${o}&quot; var=&quot;n&quot; status=&quot;i&quot;&gt;
						&lt;g:set var=&quot;secondLevelCacheStatistics&quot;	value=&quot;${estadisticas.getSecondLevelCacheStatistics(n)}&quot; /&gt;
								
						&lt;g:if test=&quot;${(i % 3) == 0}&quot;&gt;
							&lt;div class=&quot;row&quot;&gt;
						&lt;/g:if&gt;
								
						&lt;g:if test=&quot;${secondLevelCacheStatistics}&quot;&gt;
							&lt;ul&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;&lt;b&gt;${n}&lt;/b&gt;&lt;/li&gt;
								&lt;li class=&quot;list-group-item&quot;&gt;ElementCountInMemory &lt;span class=&quot;badge&quot;&gt;${secondLevelCacheStatistics.elementCountInMemory}&lt;/span&gt;&lt;/li&gt;
								&lt;li&gt;ElementCountOnDisk &lt;span class=&quot;badge&quot;&gt;${secondLevelCacheStatistics.elementCountOnDisk}&lt;/span&gt;&lt;/li&gt;
								&lt;li&gt;Entries &lt;span class=&quot;badge&quot;&gt;${secondLevelCacheStatistics.entries}&lt;/span&gt;&lt;/li&gt;
								&lt;li&gt;HitCount &lt;span class=&quot;badge&quot;&gt;${secondLevelCacheStatistics.hitCount}&lt;/span&gt;&lt;/li&gt;
								&lt;li&gt;MissCount &lt;span class=&quot;badge&quot;&gt;${secondLevelCacheStatistics.missCount}&lt;/span&gt;&lt;/li&gt;
								&lt;li&gt;PutCount &lt;span class=&quot;badge&quot;&gt;${secondLevelCacheStatistics.putCount}&lt;/span&gt;&lt;/li&gt;
								&lt;li&gt;izeInMemory &lt;span class=&quot;badge&quot;&gt;${secondLevelCacheStatistics.sizeInMemory}&lt;/span&gt;&lt;/li&gt;
							&lt;/ul&gt;
						&lt;/g:if&gt;
								
						&lt;g:if test=&quot;${(i % 3) == 2 || o.length == (i + 1) }&quot;&gt;
							&lt;/div&gt;
						&lt;/g:if&gt;
					&lt;/g:each&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/g:else&gt;

		&lt;h3&gt;Mensajes de Hibernate&lt;/h3&gt;
		&lt;div class=&quot;btn-group&quot;&gt;
			&lt;button id=&quot;hql&quot; type=&quot;button&quot; class=&quot;btn btn-default active&quot;&gt;HQL (${HibernateLogger.get().findAll({ it.type == HibernateLogger.Type.HQL }).size()})&lt;/button&gt;
			&lt;button id=&quot;param&quot; type=&quot;button&quot; class=&quot;btn btn-default active&quot;&gt;PARAM (${HibernateLogger.get().findAll({ it.type == HibernateLogger.Type.PARAM }).size()})&lt;/button&gt;
			&lt;button id=&quot;sql&quot; type=&quot;button&quot; class=&quot;btn btn-default active&quot;&gt;SQL (${HibernateLogger.get().findAll({ it.type == HibernateLogger.Type.SQL }).size()})&lt;/button&gt;
			&lt;button id=&quot;exception&quot; type=&quot;button&quot; class=&quot;btn btn-default active&quot;&gt;EXCEPTION (${HibernateLogger.get().findAll({ it.type == HibernateLogger.Type.EXCEPTION }).size()})&lt;/button&gt;
			&lt;button id=&quot;text&quot; type=&quot;button&quot; class=&quot;btn btn-default active&quot;&gt;TEXT (${HibernateLogger.get().findAll({ it.type == HibernateLogger.Type.TEXT }).size()})&lt;/button&gt;
		&lt;/div&gt;
		&lt;div class=&quot;row&quot;&gt;
			&lt;div class=&quot;col-md-12&quot;&gt;
				&lt;%
					o = HibernateLogger.get()
				%&gt;
				&lt;table id=&quot;logs&quot; class=&quot;table table-striped&quot;&gt;
					&lt;tr&gt;
						&lt;th class=&quot;col-md-2&quot;&gt;Fecha&lt;/th&gt;
						&lt;th&gt;Tipo&lt;/th&gt;
						&lt;th&gt;Tiempo&lt;/th&gt;
						&lt;th&gt;Mensaje&lt;/th&gt;
					&lt;/tr&gt;
					&lt;g:each	in=&quot;${o}&quot; var=&quot;n&quot; status=&quot;i&quot;&gt;
						&lt;g:if test=&quot;${(n.type == HibernateLogger.Type.HQL &amp;&amp; n.hql) || (n.type == HibernateLogger.Type.PARAM &amp;&amp; n.param) || ((n.type == HibernateLogger.Type.SQL) &amp;&amp; n.prepared &amp;&amp; n.sql) || ((n.type == HibernateLogger.Type.EXCEPTION) &amp;&amp; n.exception.messsage) || ((n.type == HibernateLogger.Type.TEXT) &amp;&amp; n.text)}&quot;&gt;
							&lt;tr class=&quot;${n.type}&quot;&gt;
								&lt;td&gt;${sdf.format(n.date)}&lt;/td&gt;
								&lt;td&gt;${n.type}&lt;/td&gt;
								&lt;g:if test=&quot;${n.type == HibernateLogger.Type.HQL &amp;&amp; n.hql}&quot;&gt;
									&lt;td&gt;&lt;/td&gt;
									&lt;td&gt;${n.hql}&lt;/td&gt;
								&lt;/g:if&gt;
								&lt;g:if test=&quot;${n.type == HibernateLogger.Type.PARAM &amp;&amp; n.param}&quot;&gt;
									&lt;td&gt;&lt;/td&gt;
									&lt;td&gt;${n.param}&lt;/td&gt;
								&lt;/g:if&gt;
								&lt;g:if test=&quot;${n.type == HibernateLogger.Type.SQL &amp;&amp; n.prepared &amp;&amp; n.sql}&quot;&gt;
									&lt;td&gt;${(n.elapsed &gt; 0)?n.elapsed:''}&lt;/td&gt;
									&lt;td&gt;${n.prepared}&lt;br/&gt;&lt;br/&gt;${n.sql}&lt;/td&gt;
								&lt;/g:if&gt;
								&lt;g:if test=&quot;${n.type == HibernateLogger.Type.EXCEPTION &amp;&amp; n.exception.messsage}&quot;&gt;
									&lt;td colspan=&quot;2&quot;&gt;${n.exception.messsage}&lt;/th&gt;
								&lt;/g:if&gt;
								&lt;g:if test=&quot;${n.type == HibernateLogger.Type.TEXT &amp;&amp; n.text}&quot;&gt;
									&lt;td colspan=&quot;2&quot;&gt;${n.text}&lt;/th&gt;
								&lt;/g:if&gt;
							&lt;/tr&gt;
						&lt;/g:if&gt;
					&lt;/g:each&gt;
				&lt;/table&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	
	&lt;r:script&gt;
		$(document).ready(function() {
			$('#hql').click(function() {
				$(this).toggleClass('active');
				var b = $(this).hasClass('active');
				if (b) {
					$('#logs tr.HQL').show();
				} else {
					$('#logs tr.HQL').hide();
				}
			});
			
			$('#param').click(function() {
				$(this).toggleClass('active');
				var b = $(this).hasClass('active');
				if (b) {
					$('#logs tr.PARAM').show();
				} else {
					$('#logs tr.PARAM').hide();
				}
			});
			
			$('#sql').click(function() {
				$(this).toggleClass('active');
				var b = $(this).hasClass('active');
				if (b) {
					$('#logs tr.SQL').show();
				} else {
					$('#logs tr.SQL').hide();
				}
			});
			
			$('#exception').click(function() {
				$(this).toggleClass('active');
				var b = $(this).hasClass('active');
				if (b) {
					$('#logs tr.EXCEPTION').show();
				} else {
					$('#logs tr.EXCEPTION').hide();
				}
			});
			
			$('#text').click(function() {
				$(this).toggleClass('active');
				var b = $(this).hasClass('active');
				if (b) {
					$('#logs tr.TEXT').show();
				} else {
					$('#logs tr.TEXT').hide();
				}
			});
		});
	&lt;/r:script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Si adem&aacute;s queremos ver las consultas HQL de Hibernate y par&aacute;metros que se est&aacute;n lanzando en cada acceso a una p&aacute;gina podemos modificar el archivo Config.goovy y a&ntilde;adir la siguiente configuraci&oacute;n en el apartado log4j:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/87ae5e7c184c5b51844d.js?file=Config.groovy"></script> 
 <noscript>
  <pre><code>// log4j configuration
log4j = {
    // Example of changing the log pattern for the default console appender:
    //
    //appenders {
    //    console name:'stdout', layout:pattern(conversionPattern: '%c{2} %m%n')
    //}

	appenders {
    	environments {
        	development {
				appender new io.github.picodotdev.grails.log.HibernateAppender(name:'hibernate')
        	}
    	}
	}

	environments {
 		development {
			debug additivity: false, hibernate:['org.hibernate.SQL']
			trace additivity: false, hibernate:['org.hibernate.type.descriptor.sql.BasicBinder']
 		}
	}

    error  'org.codehaus.groovy.grails.web.servlet',        // controllers
           'org.codehaus.groovy.grails.web.pages',          // GSP
           'org.codehaus.groovy.grails.web.sitemesh',       // layouts
           'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
           'org.codehaus.groovy.grails.web.mapping',        // URL mapping
           'org.codehaus.groovy.grails.commons',            // core / classloading
           'org.codehaus.groovy.grails.plugins',            // plugins
           'org.codehaus.groovy.grails.orm.hibernate',      // hibernate integration
           'org.springframework',
           'org.hibernate',
           'net.sf.ehcache.hibernate'
}</code></pre>
 </noscript>
</div> 
<p></p> 
<p>La implementaci&oacute;n de appender para capturar las HQL que lanza grails es la siguiente:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/87ae5e7c184c5b51844d.js?file=HibernateAppender.java"></script> 
 <noscript>
  <pre><code>package io.github.picodotdev.grails.log;

import org.apache.log4j.AppenderSkeleton;
import org.apache.log4j.spi.LoggingEvent;

public class HibernateAppender extends AppenderSkeleton {

	public void append(LoggingEvent event) {
		if (event.getLoggerName().equals(&quot;org.hibernate.SQL&quot;)) {
			HibernateLogger.getInstance().logHQL(event.getRenderedMessage());
		} else if (event.getLoggerName().equals(&quot;org.hibernate.type.descriptor.sql.BasicBinder&quot;)) {
			HibernateLogger.getInstance().logParam(event.getRenderedMessage());
		}
	}
	
	public boolean requiresLayout() {
		return false;
	}
	
	public void close() {
	}
}</code></pre>
 </noscript>
</div> 
<div>
 <script src="https://gist.github.com/picodotdev/87ae5e7c184c5b51844d.js?file=HibernateLogger.java"></script> 
 <noscript>
  <pre><code>package io.github.picodotdev.grails.log;

import java.util.Date;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.HashMap;

public class HibernateLogger {

	private static int MAX_LOGS = 1000;	
	private static LinkedList logs = new LinkedList();	
	private static HibernateLogger instance;
	
	public enum Type {
		HQL, PARAM, SQL, EXCEPTION, TEXT
	}
	
	public static HibernateLogger getInstance() {
		if (instance == null) {
			instance = new HibernateLogger();
		}
		return instance;
	}
	
	public void logHQL(String hql) {
        Map m = new HashMap();
        m.put(&quot;type&quot;, Type.HQL);
        m.put(&quot;date&quot;, new Date());
        m.put(&quot;hql&quot;, hql);
        
        add(m);
	}
	
	public void logParam(String param) {
        Map m = new HashMap();
        m.put(&quot;type&quot;, Type.PARAM);
   		m.put(&quot;date&quot;, new Date());
   		m.put(&quot;param&quot;, param);
        
        add(m);
	}
	
	public void logSQL(int connectionId, String now, long elapsed, String category, String prepared, String sql) {
        Map m = new HashMap();
        m.put(&quot;type&quot;, Type.SQL);
        m.put(&quot;date&quot;, new Date());
        m.put(&quot;connectionId&quot;, connectionId);
        m.put(&quot;now&quot;, now);
        m.put(&quot;elapsed&quot;, elapsed);
        m.put(&quot;category&quot;, category);
        m.put(&quot;prepared&quot;, prepared);
        m.put(&quot;sql&quot;, sql);
        
        add(m);
    }

    public void logException(Exception exception) {
        Map m = new HashMap();
        m.put(&quot;type&quot;, Type.EXCEPTION);
        m.put(&quot;date&quot;, new Date());
        m.put(&quot;exception&quot;, exception);

		add(m);
    }
    
    public void logText(String text) {
        Map m = new HashMap();
        m.put(&quot;type&quot;, Type.TEXT);
        m.put(&quot;date&quot;, new Date());    
        m.put(&quot;text&quot;, text);

		add(m);
    }
    
    public String getLastEntry() {
    	return &quot;&quot;;
    }
    
    public static List get() {
    	return logs;
    }

    public static void clear() {
    	logs.clear();
    }
    
    private static synchronized void add(Map m) {
    	logs.addFirst(m);
    	if (logs.size() &gt; MAX_LOGS) {
    		logs.removeLast();
    	}
    }
}</code></pre>
 </noscript>
</div> 
<p></p> 
<p>El resultado es el siguiente:</p> 
<div style="text-align: center;"> 
 <a href="http://picodotdev.github.io/blog-bitix/images/custom/posts/26/grails-hibernate-statistics.png" title="Estad&iacute;sticas de Hibernate en Grails"><img src="http://picodotdev.github.io/blog-bitix/images/custom/posts/26/grails-hibernate-statistics.png" /></a> 
</div> 
<p>En la imagen se puede apreciar las consultas lanzadas y que par&aacute;metros se han empleado. El m&eacute;todo doTest del controlador HibernateController cada vez que es ejecutado persiste una entidad de dominio Autor y posteriormente la borra lanzando una sentencia insert y otra delete, cada vez que es ejecutado las estad&iacute;sticas cambian acordemente.</p> 
<p>Obtener informaci&oacute;n de lo que sucede en la aplicaci&oacute;n es importante y el framework deber&iacute;a ayudar, tambi&eacute;n podemos <a href="http://picodotdev.github.io/blog-bitix/2014/05/pagina-de-excepcion-de-grails/">mejorar lo que ofrece Grails con una p&aacute;gina de excepci&oacute;n m&aacute;s informativa</a>. En <a href="http://tapestry.apache.org/">Tapestry</a> es m&aacute;s sencillo a&uacute;n ya que incluyendo la dependencia de tapestry-hibernate ya se a&ntilde;ade a la p&aacute;gina Dashboard y un apartado con estas estad&iacute;sticas, pero esto &uacute;ltimo ser&aacute; tema para otro art&iacute;culo.</p> 
<p>Referencia:<br /> <a href="http://picodotdev.github.io/blog-bitix/2014/05/pagina-de-excepcion-de-grails/">P&aacute;gina de excepci&oacute;n de Grails</a><br /> <a href="http://stackoverflow.com/questions/11621495/how-can-i-obtain-grails-hibernate-l2-cache-statistics">http://stackoverflow.com/questions/11621495/how-can-i-obtain-grails-hibernate-l2-cache-statistics</a><br /> <a href="http://stackoverflow.com/questions/2568507/how-to-log-sql-statements-in-grails">http://stackoverflow.com/questions/2568507/how-to-log-sql-statements-in-grails</a><br /> <a href="https://hibernate.atlassian.net/browse/HHH-3659">https://hibernate.atlassian.net/browse/HHH-3659</a></p></span></div><section><a id="share"></a><h1>Compartir</h1><div class="share-this"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/blogbitix/2014/05/detectar-problema-n-1-y-obtener-estadisticas-de-hibernate-con-grails" st_title="Detectar problema N+1 y obtener estadísticas de Hibernate con Grails | Blog Bitix"></span><span displayText="Facebook" class="st_facebook_vcount" st_url="http://www.blogstack.info/post/blogbitix/2014/05/detectar-problema-n-1-y-obtener-estadisticas-de-hibernate-con-grails" st_title="Detectar problema N+1 y obtener estadísticas de Hibernate con Grails | Blog Bitix"></span><span displayText="Google +" class="st_googleplus_vcount" st_url="http://www.blogstack.info/post/blogbitix/2014/05/detectar-problema-n-1-y-obtener-estadisticas-de-hibernate-con-grails" st_title="Detectar problema N+1 y obtener estadísticas de Hibernate con Grails | Blog Bitix"></span><span displayText="LinkedIn" class="st_linkedin_vcount" st_url="http://www.blogstack.info/post/blogbitix/2014/05/detectar-problema-n-1-y-obtener-estadisticas-de-hibernate-con-grails" st_title="Detectar problema N+1 y obtener estadísticas de Hibernate con Grails | Blog Bitix"></span><span displayText="Meneame" class="st_meneame_vcount" st_url="http://www.blogstack.info/post/blogbitix/2014/05/detectar-problema-n-1-y-obtener-estadisticas-de-hibernate-con-grails" st_title="Detectar problema N+1 y obtener estadísticas de Hibernate con Grails | Blog Bitix"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div id="widget"></div></section><section><a id="comments"></a><h1>Comentar</h1><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = "blog-bitix";
var disqus_title = "Detectar problema N+1 y obtener estadísticas de Hibernate con Grails";
var disqus_url = "http://picodotdev.github.io/blog-bitix/2014/05/detectar-problema-n-plus-1-y-obtener-estadisticas-de-hibernate-con-grails/";
</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></section><hr/></article></div><aside class="col-xs-12 col-sm-12 col-md-4"><section><h3>Redes sociales</h3><p>¿Te gusta Blog Stack? ¡Compártelo con tus amigos!</p><div class="social-networks"><!-- Facebook --><div data-share="true" data-show-faces="false" data-action="like" data-width="310" data-layout="standard" data-href="http://www.blogstack.info/" class="fb-like"></div><!-- Google+ --><g:plusone size="standard" annotation="inline" href="http://www.blogstack.info/" width="310"></g:plusone></div></section><section><h3>¡Suscríbete!</h3><ul class="list-unstyled"><li><a href="/label/programacion/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta programacion</a></li><li><a href="/label/software/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta software</a></li><li><a href="/label/java/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta java</a></li></ul></section><div id="bigRectangle"></div><section id="lastPosts"></section><div class="row"><div class="col-xs-3 col-md-2"><div id="wideSkycraper"></div></div></div><section id="lastPosts_0"></section></aside></div></div><footer><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="footer"><a href="/">Blog Stack</a> por <a href="https://twitter.com/picodotdev/">pico.dev</a> está publicado bajo la licencia de software libre <a href="http://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public</a>.<br/>
El contenido agregado conserva la licencia de su bitácora.<br/>
«Powered by» <a href="https://github.com/picodotdev/blogstack">Blog Stack</a>, <a href="http://tapestry.apache.org/">Apache Tapestry</a>, <a href="https://www.openshift.com/">OpenShift</a>, <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://www.oracle.com/es/technologies/java/overview/index.html">Java</a> y más software libre o de código abierto, inspirado en <a href="http://octopress.org/">Octopress</a>.<br/><span class="copyleft">©</span> pico.dev 2014
</div></div></div></div></footer><div id="fb-root"></div><script type="text/javascript">var require = {
  "waitSeconds" : 300,
  "shim" : {
    "t5/core/typeahead" : [
      "jquery"
    ],
    "bootstrap/affix" : [
      "bootstrap/transition"
    ],
    "bootstrap/alert" : [
      "bootstrap/transition"
    ],
    "bootstrap/modal" : [
      "bootstrap/transition"
    ],
    "bootstrap/tab" : [
      "bootstrap/transition"
    ],
    "bootstrap/transition" : [
      "jquery"
    ],
    "bootstrap/button" : [
      "bootstrap/transition"
    ],
    "bootstrap/scrollspy" : [
      "bootstrap/transition"
    ],
    "bootstrap/collapse" : [
      "bootstrap/transition"
    ],
    "bootstrap/dropdown" : [
      "bootstrap/transition"
    ],
    "bootstrap/tooltip" : [
      "bootstrap/transition"
    ],
    "bootstrap/carousel" : [
      "bootstrap/transition"
    ],
    "bootstrap/popover" : [
      "bootstrap/tooltip"
    ]
  },
  "baseUrl" : "/modules"
};
</script><script src="/assets/tapestry5/require.js" type="text/javascript"></script><script src="/assets/tapestry5/underscore-1.5.2.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/scriptaculous.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/effects.js" type="text/javascript"></script><script src="/assets/tapestry5/t53-compatibility.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery-noconflict.js" type="text/javascript"></script><script type="text/javascript">require(["t5/core/pageinit"], function(pi) { pi([], [
  "app/analytics",
  [
    "app/karmacracy:init",
    {
      "selector" : "#widget",
      "id" : 480,
      "url" : "http://www.blogstack.info/post/blogbitix/2014/05/detectar-problema-n-1-y-obtener-estadisticas-de-hibernate-con-grails"
    }
  ],
  "app/disqus",
  "app/facebook",
  "app/googleplus",
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts",
      "source" : "blogbitix",
      "name" : "Blog Bitix"
    }
  ],
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts_0",
      "source" : "blogstack",
      "name" : "Blog Stack"
    }
  ],
  [
    "app/adsensem:init",
    {
      "blogstack" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlotHorizontalSkycraper" : "1397019380",
        "adSlotBigRectangle" : "2873752587",
        "adSlotWideSkycraper" : "1896546988"
      },
      "ad" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlotHorizontalSkycraper" : "1397019380",
        "adSlotBigRectangle" : "2873752587",
        "adSlotWideSkycraper" : "1896546988"
      }
    }
  ]
]); });</script></body></html>