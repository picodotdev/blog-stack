<!DOCTYPE html><html data-debug-enabled="true" data-locale="es_ES" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="Apache Tapestry Framework (version 5.4-beta-3)" name="generator"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta pagina="Post"/><title>Anexo a la guía de instalación y del principiante de Arch Linux | Blog Bitix</title><!-- Resources --><link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/><link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link title="Portada" type="application/atom+xml" rel="alternate" href="/atom.xml"/><link type="image/png" rel="icon" href="/assets/images/favicon.png"/><meta content="Post" name="tapestry-page-name"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/bootstrap/css/bootstrap.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/exception-frame.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry-console.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tree.css"/><link type="text/css" rel="stylesheet" href="/assets/css/core.css"/></head><body data-page-initialized="false"><header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><h1><a class="blogstack" href="/"><span class="glyphicon glyphicon-th"></span> Blog <span class="stack">Stack</span></a></h1></div><div class="col-xs-12 col-sm-12 col-md-8" id="horizontalSkycraper"></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><h4>Un poco más que un agregador/planeta de bitácoras sobre programación, desarrollo, software libre, gnu/linux, tecnología, ...</h4></div></div></div></header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><nav role="navigation"><ul class="nav nav-pills menu"><li><a href="/">Inicio</a></li><li><a href="/archive">Archivo</a></li><li><a href="/faq">Preguntas frecuentes</a></li></ul></nav></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8 content"><article itemtype="http://schema.org/BlogPosting" itemscope=""><header><h2><a href="/post/blogbitix/2014/05/anexo-a-la-guia-de-instalacion-y-del-principiante-de-arch-linux"><span itemprop="headline">Anexo a la guía de instalación y del principiante de Arch Linux</span></a></h2></header><section class="post-data"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div><span>Escrito por <span itemprop="author">pico.dev</span> en la bitácora <a href="http://picodotdev.github.io/blog-bitix/">Blog Bitix</a>, <a href="http://picodotdev.github.io/blog-bitix/2014/05/anexo-a-la-guia-de-instalacion-y-del-principiante-de-arch-linux/"><span itemprop="sameAs">entrada original</span></a></span></div><div><span datetime="2014-05-02T17:09" itemprop="datePublished">Publicado el viernes, 02 de mayo de 2014 a las 17:09 UTC</span></div><div><span>
Etiquetado como
<a href="/label/blog-stack"><span itemprop="articleSection">blog-stack</span></a>
,
<a href="/label/planeta-codigo"><span itemprop="articleSection">planeta-codigo</span></a>
,
<a href="/label/software"><span itemprop="articleSection">software</span></a>
,
<a href="/label/linux"><span itemprop="articleSection">linux</span></a>
,
<a href="/label/planeta-arch-linux"><span itemprop="articleSection">planeta-arch-linux</span></a>
,
<a href="/label/planeta-linux"><span itemprop="articleSection">planeta-linux</span></a>
,
<a href="/label/software-libre"><span itemprop="articleSection">software-libre</span></a></span></div></div></div></section><div class="text-justify post-content"><div class="share-this only-twitter"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/blogbitix/2014/05/anexo-a-la-guia-de-instalacion-y-del-principiante-de-arch-linux" st_via="blogstack" st_title="Anexo a la guía de instalación y del principiante de Arch Linux | Blog Bitix"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><span itemprop="name"><div style="float: right; text-align: right;"> 
 <img src="http://picodotdev.github.io/blog-bitix/images/custom/logotipos/archlinux.png" alt="Arch Linux" title="Arch Linux" />
 <br /> 
</div> 
<p>Antes de migrar a una distribuci&oacute;n como <a href="https://www.archlinux.org/">Arch Linux</a> es recomendable ver si esta distribuci&oacute;n GNU/Linux es la adecuada para nosotros en funci&oacute;n de su <a href="https://wiki.archlinux.org/index.php/The_Arch_Way">filosof&iacute;a (The Arch Way)</a>, sus <a href="https://wiki.archlinux.org/index.php/Arch_Linux">pricipales caracter&iacute;sticas</a> y las <a href="https://wiki.archlinux.org/index.php/FAQ">preguntas frecuentes</a>. Arch Linux es una distribuci&oacute;n orientada a personas que no les importa dedicar un tiempo a aprender como instalarla y posteriormente mantenerla actualizada, esto tampoco debe asustarnos, la <a href="https://wiki.archlinux.org/">wiki de arch</a> es de las mejores fuentes de informaci&oacute;n que hay para cualquier cosa que necesitemos. Si la wiki no es suficiente ayuda en los <a href="https://bbs.archlinux.org/">foros</a> muy posiblemente encontraremos la soluci&oacute;n. Pero para alguien que vaya a <a href="http://elblogdepicodev.blogspot.com.es/2010/03/de-windows-arch-linux.html">migrar de Windows o Mac a Linux</a> creo que es m&aacute;s recomendable empezar con alguna distribuci&oacute;n que lo pone m&aacute;s f&aacute;cil para empezar con unos pocos clics, las m&aacute;s conocidas son <a href="http://www.ubuntu.com/">Ubuntu</a>, <a href="https://fedoraproject.org/">Fedora</a>, <a href="http://www.debian.org/">Debian</a>, <a href="http://www.opensuse.org/es/">openSUSE</a>, o al menos primeramente probarla en un m&aacute;quina virtual como <a href="https://www.virtualbox.org/">VirtualBox</a>.</p> 
<p>Dado que Arch Linux es una distribuci&oacute;n <a href="http://en.wikipedia.org/wiki/Rolling_release">&laquo;rolling release&raquo;</a> hacer una gu&iacute;a de instalaci&oacute;n detallada para ella har&iacute;a que se quedase obsoleta en ciertos aparatados al cabo de un tiempo. Por ello y aunque a continuaci&oacute;n escribir&eacute; una gu&iacute;a de instalaci&oacute;n es muy recomendable leer la <a href="https://wiki.archlinux.org/index.php/Beginners%27_Guide">gu&iacute;a oficial de Arch Linux</a> y la <a href="https://wiki.archlinux.org/index.php/Beginners%27_Guide">gu&iacute;a de principiante</a> m&aacute;s detallada y en cualquier caso entendamos las acciones que estamos haciendo con cada comando.</p> 
<p>Arch Linux no tiene un asistente de instalaci&oacute;n y la misma se hace desde la terminal introduciendo comandos, adem&aacute;s no hay una gu&iacute;a oficial &uacute;nica que sirva para todos los sistemas ya que algunas cosas cambian dependiendo de las caracter&iacute;sticas de nuestro sistema o preferencias, deberemos dedicar algo de tiempo a leer las gu&iacute;as oficiales y alguna otra gu&iacute;a en alguna bit&aacute;cora como esta, quiz&aacute; tambi&eacute;n alguna secci&oacute;n de la wiki. A cambio de este tiempo tendremos un sistema tal y como nosotros queremos y no como los desarrolladores del instalador quisieron. Una vez sabemos que pasos hay que realizar y que comandos hay que introducir y en que orden la instalaci&oacute;n no es complicada, lo dif&iacute;cil est&aacute; en que comandos son dependiendo de nuestro sistema, si tiene BIOS o EFI, si tiene una gr&aacute;fica AMD, Intel o NVIDIA, si tiene un disco mec&aacute;nico o SSD, y de nuestras preferencias si queremos una partici&oacute;n swap, el formato de las particiones (ext4, btrfs, …) y tama&ntilde;o para cada una.</p> 
<p>A pesar de que la gu&iacute;a oficial de Arch Linux est&aacute; muy bien hay que leer varias p&aacute;ginas de la wiki y hay algunas cosas importantes que hay que tener en cuenta. Lo que aportar&aacute; esta gu&iacute;a sobre la oficial son esos peque&ntilde;os detalles a tener en cuenta y mi experiencia con la instalaci&oacute;n en mi ordenador.</p> 
<h2>1. Instalaci&oacute;n base</h2> 
<p>Sin m&aacute;s, comencemos con la gu&iacute;a. Lo primero que deberemos hacer es <a href="https://www.archlinux.org/download/">descargar el medio de instalaci&oacute;n</a> de alg&uacute;n espejo de la red. Los medios con la coletilla -dual nos servir&aacute;n tanto para sistemas de x86 (32 bits) como para sistemas x86_64 (64 bits). Una vez descargado deberemos grabarlo en un CD o m&aacute;s recomendable en una memoria USB.</p> 
<p>Para grabarlo en una memoria USB deberemos usar el comando dd reemplazando /dev/sdx por el dispositivo de la memoria USB en la que queramos grabar el medio cosa que en linux podemos conocer usando el comando lsblk:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-0.sh"></script> 
 <noscript>
  <pre><code>$ lsblk
# dd bs=4M if=/path/to/archlinux.iso of=/dev/sdx &amp;&amp; sync</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Una vez disponemos del CD o memoria USB deberemos iniciar el sistema con &eacute;l. La forma de hacerlo cambiar&aacute; seg&uacute;n la marca de nuestro ordenador pero normalmente es usando alguna tecla de entre ESC, F2, F8, F10, F10, en el caso de mi Sony Vaio es usando la tecla ASSIST y con el sistema apagado.</p> 
<div style="text-align: center;"> 
 <a href="http://picodotdev.github.io/blog-bitix/images/custom/posts/22/instalacion-arch-linux.png" title="Men&uacute; instalaci&oacute;n Arch Linux"><img src="http://picodotdev.github.io/blog-bitix/images/custom/posts/22/instalacion-arch-linux-thumb.png" /></a> 
 <a href="http://picodotdev.github.io/blog-bitix/images/custom/posts/22/instalacion-arch-linux-prompt.png" title="Inicio instalaci&oacute;n Arch Linux"><img src="http://picodotdev.github.io/blog-bitix/images/custom/posts/22/instalacion-arch-linux-prompt-thumb.png" /></a> 
</div> 
<p>Una vez estemos en el prompt inicial de la instalaci&oacute;n deberemos cargar el mapa seg&uacute;n nuestro teclado, para un teclado espa&ntilde;ol usaremos normalmente:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-1.sh"></script> 
 <noscript>
  <pre><code># loadkeys es</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Modificamos tambi&eacute;n el archivo locale.gen y descomentamos el dato es_ES.UTF-8 UTF-8, finalmente lo exportamos para el shell:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-2.sh"></script> 
 <noscript>
  <pre><code># nano /etc/locale.gen
# export LANG=es_ES.UTF-8</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>1.1 Particionar el disco</h3> 
<p>El siguiente paso es particionar el disco duro y antes de hacerlo deberemos asegurarnos de que hemos hecho una copia de seguridad de los datos ya que en el siguiente paso se perder&aacute; el contenido del disco duro o SSD. Usaremos el siguiente comando para hacer el <a href="https://wiki.archlinux.org/index.php/GUID_Partition_Table">particionado usando GPT</a>. En funci&oacute;n de si nuestro sistema tiene BIOS o EFI las particiones son distintas, si es un ordenador de unos dos a&ntilde;os o menos o ven&iacute;a con Windows 8 preinstalador probablemente tenga EFI.</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-3.sh"></script> 
 <noscript>
  <pre><code># cgdisk /dev/sda</code></pre>
 </noscript>
</div> 
<p></p> 
<h4>1.1.1 Para un sistema con BIOS</h4> 
<p>En un sistema BIOS usando GPT el esquema de particiones ser&aacute; el siguiente:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-42.txt"></script> 
 <noscript>
  <pre><code>Tama&ntilde;o     Tipo
10 MiB     BIOS Boot Partition (ef02)
resto      Linux filesystem (8300)</code></pre>
 </noscript>
</div> 
<p></p> 
<h4>1.1.2 Para un sistema con EFI</h4> 
<p>En un sistema EFI las particiones deber&aacute;n ser las siguientes:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-43.txt"></script> 
 <noscript>
  <pre><code>Tama&ntilde;o     Tipo
512 MiB    EFI System Partition (ef00)
resto      Linux filesystem (8300)</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Si tenemos un sistema con 8 GiB o m&aacute;s de memoria probablemente podamos prescindir de la partici&oacute;n de swap. Sino podemos crear una tal que:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-44.txt"></script> 
 <noscript>
  <pre><code>Tama&ntilde;o     Tipo
4 GiB      swap (8200)</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>1.2 Formatear las particiones</h3> 
<p>Una vez tenemos las particiones creados deberemos formatearlas, sustituimos sdaX por lo que corresponda seg&uacute;n el orden en que hemos creado las particiones:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-4.sh"></script> 
 <noscript>
  <pre><code># mkfs.fat -F32 /dev/sda1
# mkfs.ext4 /dev/sda2</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Y si tenemos partici&oacute;n de swap:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-5.sh"></script> 
 <noscript>
  <pre><code># mkswap /dev/sdaX
# swapon /dev/sdaX</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>1.3 Montar las particiones</h3> 
<p>Lo siguiente que haremos es montar las particiones para empezar a usarlas, primero la partici&oacute;n root (/), que en esta gu&iacute;a es sda2 y luego la partici&oacute;n boot (/boot):</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-6.sh"></script> 
 <noscript>
  <pre><code># mount /dev/sda2 /mnt
# mkdir -p /mnt/boot
# mount /dev/sda1</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Si nuestro sistema tiene EFI hacemos:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-7.sh"></script> 
 <noscript>
  <pre><code># mount /dev/sda2 /mnt
# mkdir -p /mnt/boot/efi
# mount /dev/sda1 /mnt/boot/efi</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Si tenemos un disco SSD montamos las particiones usando las opciones de montaje adecuados para que se use TRIM:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-8.sh"></script> 
 <noscript>
  <pre><code># mount -o noatime,discard /dev/sda2 /mnt
# mkdir -p /mnt/boot/efi
# mount -o noatime,discard /dev/sda1 /mnt/boot/efi</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>1.4 Establecer el mirror</h3> 
<p>Debemos seleccionar un espejo del que se descargar&aacute;n los paquetes del sistema base, modificamos el archivo /etc/pacman.d/mirrrorlist y ponemos el primero el que deseemos, yo suelo usar:</p> 
<p>Server = <a href="http://mirrors.kernel.org/archlinux/$repo/os/$arch">http://mirrors.kernel.org/archlinux/$repo/os/$arch</a></p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-9.sh"></script> 
 <noscript>
  <pre><code># nano /etc/pacman.d/mirrrorlist</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>1.5 Instalar paquetes del sistema base</h3> 
<p>Lo siguiente ser&aacute; instalar los archivos del sistema base el siguiente comando que descargar&aacute; del espejo de paquetes que hayamos elegido los paquetes del sistema base:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-10.sh"></script> 
 <noscript>
  <pre><code># pacstrap /mnt base</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>1.6 Generar de fstab</h3> 
<p>Generamos el archivo fstab que contendr&aacute; las caracter&iacute;sticas de nuestras particiones y opciones de montaje:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-11.sh"></script> 
 <noscript>
  <pre><code># genfstab -U -p /mnt &gt;&gt; /mnt/etc/fstab</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Si usamos un disco SSD revisaremos el archivo asegur&aacute;ndonos que contiene las opciones noatime y discard.</p> 
<h3>1.7 Chroot y configuraci&oacute;n de sistema base</h3> 
<p>Hacemos un chroot para cambiar el directorio root que estamos usando para configurar nuestro sistema.</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-12.sh"></script> 
 <noscript>
  <pre><code># arch-chroot /mnt /bin/bash</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Editamos /etc/locale.gen, lo generamos y exportamos las variables:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-13.sh"></script> 
 <noscript>
  <pre><code># nano /etc/locale.gen
# locale-gen
# echo LANG=es_ES.UTF-8 &gt; /etc/locale.gen
# export LANG=es_ES.UTF-8</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Editamos el archivo /etc/vconsole.conf para cambiar el mapa de teclas de las terminales TTY:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-14.sh"></script> 
 <noscript>
  <pre><code># nano /etc/vconsole.conf</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Introducimos el siguiente contenido:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-15.txt"></script> 
 <noscript>
  <pre><code>KEYMAP=es</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>1.8 Establecer la zona horaria</h3> 
<p>Establecemos la zona horaria de nuestro sistema:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-16.sh"></script> 
 <noscript>
  <pre><code># ln -s /usr/share/zoneinfo/Europe/Madrid /etc/localtime</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>1.9 Modificar el nombre de nuesta m&aacute;quina</h3> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-17.sh"></script> 
 <noscript>
  <pre><code># echo archlinux &gt; /etc/hostname</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>1.10 Instalar el gestor de redes</h3> 
<p>NetworkManager puede servirnos, lo instalamos con el gestor de paquetes de arch pacman y activamos el servicio:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-18.sh"></script> 
 <noscript>
  <pre><code># pacman -S networkmanager
# systemctl enable NetworkManager.service</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>1.11 Cambiar la contrase&ntilde;a de root</h3> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-19.sh"></script> 
 <noscript>
  <pre><code># passwd</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>1.12 Instalar el gestor de arranque</h3> 
<p>Este es el punto m&aacute;s delicado y que m&aacute;s problemas puede dar, ya que si no lo hacemos bien probablemente nuestro sistema no arrancar&aacute; y por desgracia est&aacute; al final de todo el proceso.</p> 
<p>Para un sistema con BIOS:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-20.sh"></script> 
 <noscript>
  <pre><code># pacman -S grub
# grub-install --target=i386-pc --recheck /dev/sda
# grub-mkconfig -o /boot/grub/grub.cfg</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Para un sistema con EFI:</p> 
<p>En mi equipo que es un Sony Vaio SVE con EFI a&uacute;n no he conseguido que GRUB me arranque correctamente (al inicial parece que se queda con la pantalla en negro y aparentemente bloqueado aunque puedo reiniciarlo con ctrl-alt-supr) y he tenido que usar <a href="https://wiki.archlinux.org/index.php/REFInd">rEFInd</a>. A&uacute;n as&iacute; tambi&eacute;n tengo instalado Grub que iniciandolo a trav&eacute;s de rEFInd si funciona bien.</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-21.sh"></script> 
 <noscript>
  <pre><code># pacman -S grub efibootmgr dosfstools
# grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=grub --recheck
# grub-mkconfig -o /boot/grub/grub.cfg</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Posteriormente instalo rEFInd:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-22.sh"></script> 
 <noscript>
  <pre><code># pacman -S rEFInd
# cp /usr/share/refind/refind_x64.efi /boot/efi/EFI/refind/refind_x64.efi
# cp /usr/share/refind/refind.conf-sample  /boot/efi/EFI/refind/refind.conf
# cp -r /usr/share/refind/icons /boot/efi/EFI/refind/
# cp -r /usr/share/refind/fonts /boot/efi/EFI/refind/
# cp -r /usr/share/refind/drivers_x64 /boot/efi/EFI/refind</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Edito el archivo /boot/efi/EFI/refind/refind.conf modificando el timeout y la opci&oacute;n seleccionada por defecto:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-23.txt"></script> 
 <noscript>
  <pre><code>timeout 5
default_selection &quot;bzImage,vmlinuz&quot;</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Tambi&eacute;n debemos modificar el archivo /boot/refind_linux.conf</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-24.sh"></script> 
 <noscript>
  <pre><code># cp /usr/share/refind/refind_linux.conf-sample /boot/refind_linux.conf
# blkid &gt;&gt; /boot/refind_linux.conf</code></pre>
 </noscript>
</div> 
<p></p> 
<p>En el archivo sustituiremos los PARTUUID por los que correspondan en nuestro sistema, con el comando blkid los habremos a&ntilde;adido al final del archivo, el contenido debe quedarnos algo como:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-25.txt"></script> 
 <noscript>
  <pre><code>## This file should be present in the same directory as the EFISTUB kernel and initramfs files
## More info at http://www.rodsbooks.com/refind/linux.html , http://www.rodsbooks.com/efi-bootloaders/efistub.html

&quot;Boot with defaults&quot;    &quot;root=PARTUUID=4e1f91cf-0e6c-41df-82f0-a16134c5973a rootfstype=ext4 ro&quot;
&quot;Boot to terminal&quot;      &quot;root=PARTUUID=4e1f91cf-0e6c-41df-82f0-a16134c5973a rootfstype=ext4 ro systemd.unit=multi-user.target&quot;</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Adem&aacute;s, con rEFInd hemos de crear el gestor de arranque con el comando efobootmgr. Pero en mi caso para que funcione primero he de borrar todos los que ya existen sino parece que en mi caso se recrea y usa el gestor de arranque EFI de Windows y al inicial el sistema me sale el mensaje &laquo;Operating System Not Found&raquo;, podemos ver los gestores de arranque con:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-26.sh"></script> 
 <noscript>
  <pre><code># efibootmgr</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Los borramos con el siguiente comando, donde xxxx se corresponde con el n&uacute;mero de gestor de arranque:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-27.sh"></script> 
 <noscript>
  <pre><code># efibootmgr -b xxxx -B</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Finalmente, creamos el gestor de arranque para rEFInd:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-28.sh"></script> 
 <noscript>
  <pre><code># efibootmgr -c -d /dev/sda -p 1 -l /EFI/refind/refind_x64.efi -L &quot;rEFInd&quot;</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>1.13 Finalizar la instalaci&oacute;n</h3> 
<p>Finalmente, salimos del entorno enjaulado, desmontamos las particiones y reiniciamos el sistema:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-29.sh"></script> 
 <noscript>
  <pre><code># exit
# umount -R /mnt
# reboot</code></pre>
 </noscript>
</div> 
<p></p> 
<h2>2. Post instalaci&oacute;n base</h2> 
<p>Ya tenemos el sistema base pero para usarlo seguramente queramos un entorno gr&aacute;fico, un usuario propio para no usar el usuario root y los programas que solemos usar habitualmente. Para ellos continuaremos en la postinstalaci&oacute;n.</p> 
<h3>2.1 Creaci&oacute;n de usuario</h3> 
<p>Creamos un usuario para no usar el usuario root, sustituimos picodotdev por el nuestro:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-30.sh"></script> 
 <noscript>
  <pre><code># useradd -m -G wheel -s /bin/bash picodotdev
# passwd picodotdev</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Permitirmos a los usuarios del grupo wheel usar el comando sudo:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-31.sh"></script> 
 <noscript>
  <pre><code># pacman -S sudo
# visudo</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Descomentamos la siguiente linea:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-32.txt"></script> 
 <noscript>
  <pre><code>%wheel ALL=(ALL) ALL</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Editamos el archivo pacman.conf seg&uacute;n nuestras preferencias, por ejemplo, para permitir el color en la terminal y para mostrar el progreso global.</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-33.sh"></script> 
 <noscript>
  <pre><code># nano /etc/pacman.conf</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>2.2 Instalar el entorno gr&aacute;fico</h3> 
<p>Instalamos los paquetes b&aacute;sicos del entorno gr&aacute;fico, en este caso los controladores para una tarjeta gr&aacute;fica intel:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-34.sh"></script> 
 <noscript>
  <pre><code>$ sudo pacman -S xorg-server xorg-xinit xorg-server-utils mesa xf86-video-intel</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>2.3 Instalar el entorno de escritorio</h3> 
<p>Instalamos el entorno de escritorio seg&uacute;n nuestras preferencias, en mi caso GNOME:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-35.sh"></script> 
 <noscript>
  <pre><code>$ sudo pacman -S gnome gnome-extra gnome-tweak-tool</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Habilitamos el servicio del gestor de escritorio GDM:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-36.sh"></script> 
 <noscript>
  <pre><code>$ sudo systemctl enable gdm.service</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>2.4 Instalaci&oacute;n de yaourt</h3> 
<p>Si pretendemos usar alg&uacute;n paquete de <a href="https://wiki.archlinux.org/index.php/Arch_User_Repository">AUR</a> deberemos instalar la herramienta yaourt:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-37.sh"></script> 
 <noscript>
  <pre><code># nano /etc/pacman.conf</code></pre>
 </noscript>
</div> 
<p></p> 
<p>A&ntilde;adimos su repositorio:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-38.txt"></script> 
 <noscript>
  <pre><code>[archlinuxfr]
SigLevel=Optional TrustAll
Server=http://repo.archlinux.fr/$arch</code></pre>
 </noscript>
</div> 
<p></p> 
<p>Lo instalamos con:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-39.sh"></script> 
 <noscript>
  <pre><code>$ sudo pacman -Syu
$ sudo pacman -S yaourt</code></pre>
 </noscript>
</div> 
<p></p> 
<p>A partir de este momento podemos usar el comando yaourt en vez de pacman.</p> 
<h3>2.5 Instalar de programas</h3> 
<p>Los programas que instalaremos cambiar&aacute;n seg&uacute;n nuestras preferencias, estos son casi todos los que suelo utilizar:</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-40.sh"></script> 
 <noscript>
  <pre><code>$ yaourt -S vim vim-spell-es chromium firefox firefox-i18n-es-es ntfs-3g faenza-icon-theme gimp filezilla imagemagick gparted ufw shotwell libreoffice vlc gstreamer0.10-plugins calibre ntp flashplugin tomcat-native rsync jdk7-openjdk mariadb redis wget git subversion openssh unrar base-devel</code></pre>
 </noscript>
</div> 
<p></p> 
<h3>2.6 Activar el servicio de sincronizaci&oacute;n de hora</h3> 
<p>Para mantener la hora de nuestro sistema correctamente podemos usar un servicio que se encargue de mantenerla con un servicio a trav&eacute;s de la red.</p> 
<p></p>
<div>
 <script src="https://gist.github.com/picodotdev/00b3b985453f75696831.js?file=script-41.sh"></script> 
 <noscript>
  <pre><code>$ sudo systemctl enable ntpd.service</code></pre>
 </noscript>
</div> 
<p></p> 
<p>El resultado de la instalaci&oacute;n y usando GNOME es el siguiente:</p> 
<div style="text-align: center;"> 
 <a href="http://picodotdev.github.io/blog-bitix/images/custom/posts/22/escritorio-gnome.jpg" title="Escritorio GNOME"><img src="http://picodotdev.github.io/blog-bitix/images/custom/posts/22/escritorio-gnome-thumb.jpg" /></a> 
</div></span></div><section><h1>Compartir</h1><div class="share-this"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/blogbitix/2014/05/anexo-a-la-guia-de-instalacion-y-del-principiante-de-arch-linux" st_via="blogstack" st_title="Anexo a la guía de instalación y del principiante de Arch Linux | Blog Bitix"></span><span displayText="Facebook" class="st_facebook_vcount" st_url="http://www.blogstack.info/post/blogbitix/2014/05/anexo-a-la-guia-de-instalacion-y-del-principiante-de-arch-linux" st_title="Anexo a la guía de instalación y del principiante de Arch Linux | Blog Bitix"></span><span displayText="Google +" class="st_googleplus_vcount" st_url="http://www.blogstack.info/post/blogbitix/2014/05/anexo-a-la-guia-de-instalacion-y-del-principiante-de-arch-linux" st_title="Anexo a la guía de instalación y del principiante de Arch Linux | Blog Bitix"></span><span displayText="LinkedIn" class="st_linkedin_vcount" st_url="http://www.blogstack.info/post/blogbitix/2014/05/anexo-a-la-guia-de-instalacion-y-del-principiante-de-arch-linux" st_title="Anexo a la guía de instalación y del principiante de Arch Linux | Blog Bitix"></span><span displayText="Meneame" class="st_meneame_vcount" st_url="http://www.blogstack.info/post/blogbitix/2014/05/anexo-a-la-guia-de-instalacion-y-del-principiante-de-arch-linux" st_title="Anexo a la guía de instalación y del principiante de Arch Linux | Blog Bitix"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div id="widget"></div></section><section><h1>Comentar</h1><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = "blog-bitix";
var disqus_title = "Anexo a la guía de instalación y del principiante de Arch Linux";
var disqus_url = "http://picodotdev.github.io/blog-bitix/2014/05/anexo-a-la-guia-de-instalacion-y-del-principiante-de-arch-linux/";
</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></section><hr/></article></div><aside class="col-xs-12 col-sm-12 col-md-4"><section><h3>Redes sociales</h3><p>¿Te gusta Blog Stack? ¡Compártelo con tus amigos!</p><div class="social-networks"><!-- Facebook --><div data-share="true" data-show-faces="false" data-action="like" data-width="310" data-layout="standard" data-href="http://www.blogstack.info/" class="fb-like"></div><!-- Google+ --><g:plusone size="standard" annotation="inline" href="http://www.blogstack.info/" width="310"></g:plusone></div></section><section><h3>¡Suscríbete!</h3><ul class="list-unstyled"><li><a href="/label/blog-stack/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta blog-stack</a></li><li><a href="/label/planeta-codigo/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta planeta-codigo</a></li><li><a href="/label/software/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta software</a></li><li><a href="/label/linux/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta linux</a></li><li><a href="/label/planeta-arch-linux/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta planeta-arch-linux</a></li><li><a href="/label/planeta-linux/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta planeta-linux</a></li><li><a href="/label/software-libre/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta software-libre</a></li></ul></section><div id="bigRectangle"></div><section id="lastPosts"></section><div class="row"><div class="col-xs-3 col-md-2"><div id="wideSkycraper"></div></div></div><section id="lastPosts_0"></section></aside></div></div><footer><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="footer"><a href="/">Blog Stack</a> por <a href="https://twitter.com/picodotdev/">pico.dev</a> está publicado bajo la licencia <a href="http://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public</a>.<br/>
El contenido agregado conserva la licencia de su bitácora.<br/>
«Powered by» <a href="https://github.com/picodotdev/blogstack">Blog Stack</a>, <a href="http://tapestry.apache.org/">Apache Tapestry</a>, <a href="https://www.openshift.com/">OpenShift</a>, <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://www.oracle.com/es/technologies/java/overview/index.html">Java</a> y más software libre o de código abierto, inspirado en <a href="http://octopress.org/">Octopress</a>.<br/><span class="copyleft">©</span> pico.dev 2014
</div></div></div></div></footer><div id="fb-root"></div><script type="text/javascript">var require = {
  "waitSeconds" : 300,
  "shim" : {
    "t5/core/typeahead" : [
      "jquery"
    ],
    "bootstrap/affix" : [
      "bootstrap/transition"
    ],
    "bootstrap/alert" : [
      "bootstrap/transition"
    ],
    "bootstrap/modal" : [
      "bootstrap/transition"
    ],
    "bootstrap/tab" : [
      "bootstrap/transition"
    ],
    "bootstrap/transition" : [
      "jquery"
    ],
    "bootstrap/button" : [
      "bootstrap/transition"
    ],
    "bootstrap/scrollspy" : [
      "bootstrap/transition"
    ],
    "bootstrap/collapse" : [
      "bootstrap/transition"
    ],
    "bootstrap/dropdown" : [
      "bootstrap/transition"
    ],
    "bootstrap/tooltip" : [
      "bootstrap/transition"
    ],
    "bootstrap/carousel" : [
      "bootstrap/transition"
    ],
    "bootstrap/popover" : [
      "bootstrap/tooltip"
    ]
  },
  "baseUrl" : "/modules"
};
</script><script src="/assets/tapestry5/require.js" type="text/javascript"></script><script src="/assets/tapestry5/underscore-1.5.2.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/scriptaculous.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/effects.js" type="text/javascript"></script><script src="/assets/tapestry5/t53-compatibility.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery-noconflict.js" type="text/javascript"></script><script type="text/javascript">require(["t5/core/pageinit"], function(pi) { pi([], [
  "app/analytics",
  [
    "app/karmacracy:init",
    {
      "selector" : "#widget",
      "id" : 210,
      "url" : "http://www.blogstack.info/post/blogbitix/2014/05/anexo-a-la-guia-de-instalacion-y-del-principiante-de-arch-linux"
    }
  ],
  "app/disqus",
  "app/facebook",
  "app/googleplus",
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts",
      "source" : "blogbitix",
      "name" : "Blog Bitix"
    }
  ],
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts_0",
      "source" : "blogstack",
      "name" : "Blog Stack"
    }
  ],
  [
    "app/adsensem:init",
    {
      "blogstack" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlotHorizontalSkycraper" : "1397019380",
        "adSlotBigRectangle" : "2873752587",
        "adSlotWideSkycraper" : "1896546988"
      },
      "ad" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlotHorizontalSkycraper" : "1397019380",
        "adSlotBigRectangle" : "2873752587",
        "adSlotWideSkycraper" : "1896546988"
      }
    }
  ]
]); });</script></body></html>