<!DOCTYPE html><html data-debug-enabled="true" data-locale="es_ES" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="Apache Tapestry Framework (version 5.4-beta-16)" name="generator"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta pagina="Post"/><title>Usando Java Session en aplicaciones web | Arquitectura Java</title><!-- Resources --><link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/><link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link title="Portada" type="application/atom+xml" rel="alternate" href="/feed.atom.xml"/><link type="image/png" rel="icon" href="/assets/images/favicon.png"/><meta content="Post" name="tapestry-page-name"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/bootstrap/css/bootstrap.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/exception-frame.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry-console.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tree.css"/><link type="text/css" rel="stylesheet" href="/assets/css/core.css"/></head><body data-page-initialized="false"><script type="text/javascript">document.write("<div class=\"pageloading-mask\"><div></div></div>");</script><header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><h1><a class="blogstack" href="/"><span class="glyphicon glyphicon-th"></span> Blog <span class="stack">Stack</span></a></h1></div><div class="col-xs-12 col-sm-12 col-md-6"><nav role="navigation"><ul class="list-unstyled list-inline"><li><a class="header" href="/">Inicio</a></li><li><a class="header" href="/archive">Archivo</a></li><li><a class="header" href="/faq">Preguntas frecuentes</a></li><li><a class="header" href="/faq#aggregate">¿Quieres agregar tu bitácora?</a></li></ul></nav></div><div class="col-xs-6 col-sm-6 col-md-2"><a title="Fuente RSS, ¡suscríbete a BS!" alt="Fuente RSS" class="header" href="/feed.atom.xml"><span class="header icon entypo"></span></a><a title="Twitter, ¡sigue a BS!" alt="Twitter" class="header" href="http://twitter.com/blogstackinfo"><span class="header icon entypo-social"></span></a></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><h4>Un poco más que un agregador/planeta de bitácoras sobre programación, desarrollo, software libre, gnu/linux, tecnología, ...</h4></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="imagen-cabecera"><div class="imagen"><div class="col-xs-12 col-sm-12 col-md-12" id="billboard"></div></div></div></div></div></div></header><div class="container-fluid content"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8 content"><article itemtype="http://schema.org/BlogPosting" itemscope=""><a id="content"></a><header><h2><a href="/post/arquitecturajava/2014/10/usando-java-session-en-aplicaciones-web"><span itemprop="headline">Usando Java Session en aplicaciones web</span></a></h2></header><section class="post-data"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div><span>Escrito por <span itemprop="author">Cecilio Álvarez Caules</span> en la bitácora <a href="http://www.arquitecturajava.com/">Arquitectura Java</a>, <a href="http://www.arquitecturajava.com/usando-java-session-en-aplicaciones-web/"><span itemprop="sameAs">artículo original</span></a></span></div><div><span datetime="2014-10-15T08:13" itemprop="datePublished">Publicado el miércoles, 15 de octubre de 2014 a las 08:13 UTC</span></div><div><span>
Etiquetado como
jee, java-web, java-conceptos</span></div></div></div></section><div class="text-justify post-content"><div class="share-this only-twitter"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/arquitecturajava/2014/10/usando-java-session-en-aplicaciones-web" st_title="Usando Java Session en aplicaciones web | Arquitectura Java"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><span itemprop="name"><p><strong>Uno de los conceptos que m&aacute;s problemas produce cuando comenzamos a trabajar con aplicaciones web en Java es el concepto de java session (HttpSession)</strong> que sirve para almacenar informaci&oacute;n entre diferentes peticiones HTTP&nbsp;&nbsp;ya que este protocolo es stateless (sin estado). As&iacute; pues en muchas ocasiones nos encontraremos con el problema de compartir estado (datos usuario)&nbsp;entre un conjunto amplio de p&aacute;ginas de nuestra Aplicaci&oacute;n.</p> 
<p><a href="http://www.arquitecturajava.com/wp-content/uploads/datosusuario.gif"><img src="http://www.arquitecturajava.com/wp-content/uploads/datosusuario.gif" alt="datosusuario" width="457" height="374" /></a></p> 
<h2>Java Session</h2> 
<p>Para solventar este problema en la plataforma Java EE se usa de forma muy habitual<strong> la clase HttpSession que tiene una estructura de HashMap (Dicccionario)</strong> y &nbsp;permite almacenar cualquier tipo de objeto en ella de tal forma que pueda ser compartido por las diferentes p&aacute;ginas que como usuarios utilizamos.</p> 
<p><a href="http://www.arquitecturajava.com/wp-content/uploads/hashmap.gif"><img src="http://www.arquitecturajava.com/wp-content/uploads/hashmap.gif" alt="hashmap" width="499" height="374" /></a></p> 
<h2>Funcionamiento</h2> 
<p>El funcionamiento del sistema de sessiones es relativamente sencillo. <strong>Cada vez que un usuario crea una session accediendo a una p&aacute;gina (que la genere) se crea un&nbsp;objeto a nivel de Servidor con un HashMap vac&iacute;o que nos permite almacenar la informaci&oacute;n que necesitamos relativa a este usuario.</strong> Realizado este primer paso se env&iacute;a al navegador del usuario una Cookie que sirve para identificarle y asociarle el HashMap que se acaba de construir para que pueda almacenar informaci&oacute;n en &eacute;l. Este HashMap puede ser accedido desde cualquier otra p&aacute;gina permiti&eacute;ndonos compartir informaci&oacute;n.</p> 
<p><a href="http://www.arquitecturajava.com/wp-content/uploads/creacionSession.gif"><img src="http://www.arquitecturajava.com/wp-content/uploads/creacionSession.gif" alt="creacionSession" width="524" height="374" /></a></p> 
<h2>Usuarios y Sessiones</h2> 
<p>El concepto de Session es individual de cada usuario que se conecta a nuestra aplicaci&oacute;n y la informaci&oacute;n no es compartida entre ellos. As&iacute; pues cada usuario dispondr&aacute; de su propio HashMap en donde almacenar la informaci&oacute;n que resulte &uacute;til entre p&aacute;ginas.</p> 
<p>&nbsp;</p> 
<p><a href="http://www.arquitecturajava.com/wp-content/uploads/sessionesusuarios.gif"><img src="http://www.arquitecturajava.com/wp-content/uploads/sessionesusuarios.gif" alt="sessionesusuarios" width="533" height="467" /></a></p> 
<h2>Un ejemplo sencillo</h2> 
<p>Vamos a ver un ejemplo utilizando dos Servlets b&aacute;sicos en el cual un servlet almacena datos en la sessi&oacute;n (<strong>concretamente un objeto producto</strong>) y otro servlet lee los datos de la session y los muestra por pantalla.</p> 
<pre>

package com.arquitecturajava;

public class Producto {

private int id;
private String concepto;
private double importe;
public int getId() {
return id;
}
public void setId(int id) {
this.id = id;
}
public String getConcepto() {
return concepto;
}
public void setConcepto(String concepto) {
this.concepto = concepto;
}
public double getImporte() {
return importe;
}
public void setImporte(double importe) {
this.importe = importe;
}
public Producto(int id, String concepto, double importe) {
super();
this.id = id;
this.concepto = concepto;
this.importe = importe;
}
public Producto() {
super();
}

}

</pre> 
<pre>

package com.arquitecturajava;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

@WebServlet(&quot;/CrearSession&quot;)
public class CrearSession extends HttpServlet {
private static final long serialVersionUID = 1L;

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

HttpSession misession= request.getSession(true);
Producto miproducto= new Producto(1,&quot;telefono&quot;,300);
misession.setAttribute(&quot;producto&quot;,miproducto);
PrintWriter pw= response.getWriter();
pw.println(&quot;&lt;html&gt;&lt;body&gt;Producto en session&lt;/body&gt;&lt;/html&gt;&quot;);
pw.close();

}
}

</pre> 
<pre>

package com.arquitecturajava;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

@WebServlet(&quot;/VerSession&quot;)
public class VerSession extends HttpServlet {
private static final long serialVersionUID = 1L;

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
HttpSession misession= (HttpSession) request.getSession();

Producto miproducto= (Producto) misession.getAttribute(&quot;producto&quot;);

PrintWriter pw= response.getWriter();
pw.println(&quot;&lt;html&gt;&lt;body&gt;&quot;+ miproducto.getId()+ &quot;,&quot; +miproducto.getConcepto()+&quot;,&quot;+ miproducto.getImporte());
pw.close();
}
}

</pre> 
<p>En este caso el primer Servlet (CreaSession) se encarga de crear la session y almacenar un producto en ella. Mientras el segundo Servlet se encargar&aacute; de acceder a los datos y mostrarlos por pantalla.<br /> <a href="http://www.arquitecturajava.com/wp-content/uploads/creaVee.gif"><img src="http://www.arquitecturajava.com/wp-content/uploads/creaVee.gif" alt="creaVee" width="501" height="374" /></a></p> 
<p>&nbsp;</p> 
<p>Una vez &nbsp;invocado el Servlet que crea la session invocamos a VerSession y nos mostrar&aacute; por pantalla los datos que se han introducido.</p> 
<p><a href="http://www.arquitecturajava.com/wp-content/uploads/datosSession.png"><img src="http://www.arquitecturajava.com/wp-content/uploads/datosSession.png" alt="datosSession" width="447" height="123" /></a></p> 
<p>&nbsp;</p> 
<p>Hemos compartido informaci&oacute;n perteneciente al mismo usuario entre dos Servlets. Recordemos que no se debe abusar del almacenamiento de objetos en Session ya que al ser por cada usuario si tenemos muchos usuarios concurrentes estaremos obligando al servidor a utilizar mucha memoria para almacenarlos.</p> 
<p>Otros art&iacute;culos relacionados : <a title="Java y ServletContext" href="http://www.arquitecturajava.com/java-servletcontext/">ServletContext</a>, <a title="Servlet 3.0 y Java Filter" href="http://www.arquitecturajava.com/servlet3-java-filter/">Java Filter</a>&nbsp;, <a title="Java ServletContextListener" href="http://www.arquitecturajava.com/servletcontextlistener/">ServletContextListener</a></p> 
<p>La entrada <a href="http://www.arquitecturajava.com/usando-java-session-en-aplicaciones-web/">Usando Java Session en aplicaciones web</a> aparece primero en <a href="http://www.arquitecturajava.com">Arquitectura Java</a>.</p></span></div><section><a id="share"></a><h1>Compartir</h1><div class="share-this"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/arquitecturajava/2014/10/usando-java-session-en-aplicaciones-web" st_title="Usando Java Session en aplicaciones web | Arquitectura Java"></span><span displayText="Facebook" class="st_facebook_vcount" st_url="http://www.blogstack.info/post/arquitecturajava/2014/10/usando-java-session-en-aplicaciones-web" st_title="Usando Java Session en aplicaciones web | Arquitectura Java"></span><span displayText="Google +" class="st_googleplus_vcount" st_url="http://www.blogstack.info/post/arquitecturajava/2014/10/usando-java-session-en-aplicaciones-web" st_title="Usando Java Session en aplicaciones web | Arquitectura Java"></span><span displayText="LinkedIn" class="st_linkedin_vcount" st_url="http://www.blogstack.info/post/arquitecturajava/2014/10/usando-java-session-en-aplicaciones-web" st_title="Usando Java Session en aplicaciones web | Arquitectura Java"></span><span displayText="Meneame" class="st_meneame_vcount" st_url="http://www.blogstack.info/post/arquitecturajava/2014/10/usando-java-session-en-aplicaciones-web" st_title="Usando Java Session en aplicaciones web | Arquitectura Java"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div id="widget"></div></section><hr/></article></div><div class="col-xs-12 col-sm-12 col-md-4"><aside><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigRectangle"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section><h3>Redes sociales</h3><p>¿Te gusta Blog Stack? ¡Compártelo!</p><div class="social-networks"><!-- Facebook --><div class="social-network"><div data-share="true" data-show-faces="false" data-action="like" data-width="310" data-layout="box_count" data-href="http://www.blogstack.info/" class="fb-like"></div></div><!-- Google+ --><div class="social-network"><div class="g-plusone" data-href="http://www.blogstack.info/" data-size="tall"></div></div></div></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts"></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigSkycraper"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts_0"></section></div></div></aside></div></div></div><footer><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="footer"><a href="/">Blog Stack</a> por <a href="https://twitter.com/picodotdev/">pico.dev</a> está publicado bajo la licencia de software libre <a href="http://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public</a> en <a href="https://github.com/picodotdev/blog-stack">GitHub <span class="entypo-social"></span></a>.<br/>
El contenido agregado conserva la licencia de su bitácora.<br/>
«Powered by» <a href="https://github.com/picodotdev/blogstack">Blog Stack</a>, <a href="http://tapestry.apache.org/">Apache Tapestry</a>, <a href="https://www.openshift.com/">OpenShift</a>, <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://www.oracle.com/es/technologies/java/overview/index.html">Java</a> y más software libre o de código abierto, inspirado en <a href="http://octopress.org/">Octopress</a>.<br/><span class="copyleft">©</span> pico.dev 2014
</div></div></div></div></footer><div id="fb-root"></div><script type="text/javascript">var require = {
  "waitSeconds" : 300,
  "shim" : {
    "t5/core/typeahead" : [
      "jquery"
    ],
    "bootstrap/affix" : [
      "bootstrap/transition"
    ],
    "bootstrap/alert" : [
      "bootstrap/transition"
    ],
    "bootstrap/modal" : [
      "bootstrap/transition"
    ],
    "bootstrap/tab" : [
      "bootstrap/transition"
    ],
    "bootstrap/transition" : [
      "jquery"
    ],
    "bootstrap/button" : [
      "bootstrap/transition"
    ],
    "bootstrap/scrollspy" : [
      "bootstrap/transition"
    ],
    "bootstrap/collapse" : [
      "bootstrap/transition"
    ],
    "bootstrap/dropdown" : [
      "bootstrap/transition"
    ],
    "bootstrap/tooltip" : [
      "bootstrap/transition"
    ],
    "bootstrap/carousel" : [
      "bootstrap/transition"
    ],
    "bootstrap/popover" : [
      "bootstrap/tooltip"
    ]
  },
  "baseUrl" : "/modules"
};
</script><script src="/assets/tapestry5/require.js" type="text/javascript"></script><script src="/assets/tapestry5/underscore-1.5.2.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/scriptaculous.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/effects.js" type="text/javascript"></script><script src="/assets/tapestry5/t53-compatibility.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery-noconflict.js" type="text/javascript"></script><script type="text/javascript">require(["t5/core/pageinit"], function(pi) { pi([], [
  "app/analytics",
  [
    "app/karmacracy:init",
    {
      "selector" : "#widget",
      "id" : 1019,
      "url" : "http://www.blogstack.info/post/arquitecturajava/2014/10/usando-java-session-en-aplicaciones-web"
    }
  ],
  "app/facebook",
  "app/googleplus",
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts",
      "source" : "arquitecturajava",
      "name" : "Arquitectura Java"
    }
  ],
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts_0",
      "source" : "blogstack",
      "name" : "Blog Stack"
    }
  ],
  [
    "app/adsensem:init",
    {
      "blogstack" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlot" : "1397019380"
      }
    }
  ]
]); });</script></body></html>