<!DOCTYPE html><html data-debug-enabled="true" data-locale="es_ES" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="Apache Tapestry Framework (version 5.4-beta-16)" name="generator"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta pagina="Post"/><title>Utilizando JPA NamedQueries | Arquitectura Java</title><!-- Resources --><link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/><link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link title="Portada" type="application/atom+xml" rel="alternate" href="/feed.atom.xml"/><link type="image/png" rel="icon" href="/assets/images/favicon.png"/><meta content="Post" name="tapestry-page-name"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/bootstrap/css/bootstrap.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/exception-frame.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry-console.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tree.css"/><link type="text/css" rel="stylesheet" href="/assets/css/core.css"/></head><body data-page-initialized="false"><script type="text/javascript">document.write("<div class=\"pageloading-mask\"><div></div></div>");</script><header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><h1><a class="blogstack" href="/"><span class="glyphicon glyphicon-th"></span> Blog <span class="stack">Stack</span></a></h1></div><div class="col-xs-12 col-sm-12 col-md-6"><nav role="navigation"><ul class="list-unstyled list-inline"><li><a class="header" href="/">Inicio</a></li><li><a class="header" href="/archive">Archivo</a></li><li><a class="header" href="/faq">Preguntas frecuentes</a></li><li><a class="header" href="/faq#aggregate">¿Quieres agregar tu bitácora?</a></li></ul></nav></div><div class="col-xs-6 col-sm-6 col-md-2"><a title="Fuente RSS, ¡suscríbete a BS!" alt="Fuente RSS" class="header" href="/feed.atom.xml"><span class="header icon entypo"></span></a><a title="Twitter, ¡sigue a BS!" alt="Twitter" class="header" href="http://twitter.com/blogstackinfo"><span class="header icon entypo-social"></span></a></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><h4>Un poco más que un agregador/planeta de bitácoras sobre programación, desarrollo, software libre, gnu/linux, tecnología, ...</h4></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="imagen-cabecera"><div class="imagen"><div class="col-xs-12 col-sm-12 col-md-12" id="billboard"></div></div></div></div></div></div></header><div class="container-fluid content"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8 content"><article itemtype="http://schema.org/BlogPosting" itemscope=""><a id="content"></a><header><h2><a href="/post/arquitecturajava/2015/01/utilizando-jpa-namedqueries"><span itemprop="headline">Utilizando JPA NamedQueries</span></a></h2></header><section class="post-data"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div><span>Escrito por <span itemprop="author">Cecilio Álvarez Caules</span> en la bitácora <a href="http://www.arquitecturajava.com/">Arquitectura Java</a>, <a href="http://www.arquitecturajava.com/utilizando-jpa-namedqueries/"><span itemprop="sameAs">artículo original</span></a></span></div><div><span datetime="2015-01-15T09:21" itemprop="datePublished">Publicado el jueves, 15 de enero de 2015 a las 09:21 UTC</span></div><div><span>
Etiquetado como
sin-categoria</span></div></div></div></section><div class="text-justify post-content"><div class="share-this only-twitter"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/arquitecturajava/2015/01/utilizando-jpa-namedqueries" st_title="Utilizando JPA NamedQueries | Arquitectura Java"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><span itemprop="name"><p>JPA es algo con lo que trabajamos de forma habitual. Una parte del trabajo que tenemos que realizar es construir el modelo de dominio que normalmente lleva una esfuerzo inicial importante . Sin embargo cuando estamos construyendo la aplicaci&oacute;n el modelo de dominio suele estar ya asentado y el mayor esfuerzo de desarrollo pasa por construir las diferentes consultas a realizar contra el modelo.</p> 
<p>&nbsp;</p> 
<p><a href="http://www.arquitecturajava.com/wp-content/uploads/consultas.gif"><img src="http://www.arquitecturajava.com/wp-content/uploads/consultas.gif" alt="consultas" width="403" height="148" /></a></p> 
<h2>Consultas</h2> 
<p>Uno de los problemas que nos podemos encontrar cuando construimos las consultas es que varios&nbsp;desarrolladores van a trabajar en el mismo proyecto construyendo consultas. Con lo cual puede que acabemos con consultas repetidas en distintas partes del c&oacute;digo .</p> 
<p><a href="http://www.arquitecturajava.com/wp-content/uploads/actores.gif"><img src="http://www.arquitecturajava.com/wp-content/uploads/actores.gif" alt="actores" width="408" height="272" /></a></p> 
<p>&nbsp;</p> 
<p>Para evitar este problema podemos apoyarnos <strong>en JPA NamedQueries</strong> &nbsp;que nos permiten definir las consultas a nivel de clase de dominio evitando las repeticiones.</p> 
<p><a href="http://www.arquitecturajava.com/wp-content/uploads/namedQuery.gif"><img src="http://www.arquitecturajava.com/wp-content/uploads/namedQuery.gif" alt="namedQuery" width="315" height="391" /></a></p> 
<p>Vamos a verlo a trav&eacute;s de un ejemplo en c&oacute;digo:</p> 
<pre>

package com.arquitecturajava;

import java.io.Serializable;

import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
@Entity
@NamedQueries({
@NamedQuery(name=&quot;AlumnosNombre&quot;, query=&quot;select a from Alumno a where a.nombre=:nombre&quot;)
})
public class Alumno implements Serializable{

private static final long serialVersionUID = 1L;

@Id
private String dni;
private String nombre;
private String apellidos;
private int edad;

public Alumno() {
super();
}

public Alumno(String dni, String nombre, String apellidos, int edad) {
super();
this.dni = dni;
this.nombre = nombre;
this.apellidos = apellidos;
this.edad = edad;
}

public String getDni() {
return dni;
}
public void setDni(String dni) {
this.dni = dni;
}
public String getNombre() {
return nombre;
}
public void setNombre(String nombre) {
this.nombre = nombre;
}
public String getApellidos() {
return apellidos;
}
public void setApellidos(String apellidos) {
this.apellidos = apellidos;
}
public int getEdad() {
return edad;
}
public void setEdad(int edad) {
this.edad = edad;
}
}

&amp;nbsp;

</pre> 
<p>En este caso hemos definido una clase Alumno y una NamedQuery denominada “AlumnosNombre” que nos busca a los alumnos por nombre. Una vez hecho esto podemos usar JPA y realizar la consulta en un programa sencilla.</p> 
<pre>

package com.arquitecturajava.main;

import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.TypedQuery;

import com.arquitecturajava.Alumno;
public class Principal003SeleccionAlumnosWhereNamed2 {

public static void main(String[] args) {

EntityManagerFactory emf =
Persistence.createEntityManagerFactory(&quot;UnidadCurso&quot;);
EntityManager em = emf.createEntityManager();
TypedQuery&lt;Alumno&gt; consultaAlumnos= em.createNamedQuery(&quot;seleccionarAlumnosNombre&quot;, Alumno.class);
consultaAlumnos.setParameter(&quot;nombre&quot;, &quot;miguel&quot;);
List&lt;Alumno&gt; lista= consultaAlumnos.getResultList();

System.out.println(&quot;*************Alumnos*********&quot;);
for (Alumno a :lista) {

System.out.println(a.getNombre()+&quot;,&quot; +a.getApellidos());

}

em.close();
System.out.println(&quot;termino&quot;);

}

}

</pre> 
<p>En este caso hemos usado el EntityManager y su m&eacute;todo createNamedQuery para referenciar a la consulta que hemos definido a nivel de la clase Alumno a trav&eacute;s de las anotaciones.</p> 
<p><a href="http://www.arquitecturajava.com/wp-content/uploads/resultado4.png"><img src="http://www.arquitecturajava.com/wp-content/uploads/resultado4.png" alt="resultado" width="214" height="80" /></a></p> 
<p>Otros art&iacute;culos relacionados<a title="Ejemplo de JPA , Introducci&oacute;n (I)" href="http://www.arquitecturajava.com/ejemplo-de-jpa/">: Introducci&oacute;n a JPA</a> , <a title="JPA @ OneToMany" href="http://www.arquitecturajava.com/jpa-onetomany/">JPA OneToMany</a>, <a title="Libro:Arquitectura Java JPA (Domain Driven Design)" href="http://www.arquitecturajava.com/libroarquitectura-java-jpa-domain-driven-design/">Libro de JPA</a></p> 
<p>La entrada <a href="http://www.arquitecturajava.com/utilizando-jpa-namedqueries/">Utilizando JPA NamedQueries</a> aparece primero en <a href="http://www.arquitecturajava.com">Arquitectura Java</a>.</p></span></div><section><a id="share"></a><h1>Compartir</h1><div class="share-this"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/arquitecturajava/2015/01/utilizando-jpa-namedqueries" st_title="Utilizando JPA NamedQueries | Arquitectura Java"></span><span displayText="Facebook" class="st_facebook_vcount" st_url="http://www.blogstack.info/post/arquitecturajava/2015/01/utilizando-jpa-namedqueries" st_title="Utilizando JPA NamedQueries | Arquitectura Java"></span><span displayText="Google +" class="st_googleplus_vcount" st_url="http://www.blogstack.info/post/arquitecturajava/2015/01/utilizando-jpa-namedqueries" st_title="Utilizando JPA NamedQueries | Arquitectura Java"></span><span displayText="LinkedIn" class="st_linkedin_vcount" st_url="http://www.blogstack.info/post/arquitecturajava/2015/01/utilizando-jpa-namedqueries" st_title="Utilizando JPA NamedQueries | Arquitectura Java"></span><span displayText="Meneame" class="st_meneame_vcount" st_url="http://www.blogstack.info/post/arquitecturajava/2015/01/utilizando-jpa-namedqueries" st_title="Utilizando JPA NamedQueries | Arquitectura Java"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div id="widget"></div></section><hr/></article></div><div class="col-xs-12 col-sm-12 col-md-4"><aside><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigRectangle"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section><h3>Redes sociales</h3><p>¿Te gusta Blog Stack? ¡Compártelo!</p><div class="social-networks"><!-- Facebook --><div class="social-network"><div data-share="true" data-show-faces="false" data-action="like" data-width="310" data-layout="box_count" data-href="http://www.blogstack.info/" class="fb-like"></div></div><!-- Google+ --><div class="social-network"><div class="g-plusone" data-href="http://www.blogstack.info/" data-size="tall"></div></div></div></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts"></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigSkycraper"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts_0"></section></div></div></aside></div></div></div><footer><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="footer"><a href="/">Blog Stack</a> por <a href="https://twitter.com/picodotdev/">pico.dev</a> está publicado bajo la licencia de software libre <a href="http://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public</a> en <a href="https://github.com/picodotdev/blog-stack">GitHub <span class="entypo-social"></span></a>.<br/>
El contenido agregado conserva la licencia de su bitácora.<br/>
«Powered by» <a href="https://github.com/picodotdev/blogstack">Blog Stack</a>, <a href="http://tapestry.apache.org/">Apache Tapestry</a>, <a href="https://www.openshift.com/">OpenShift</a>, <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://www.oracle.com/es/technologies/java/overview/index.html">Java</a> y más software libre o de código abierto, inspirado en <a href="http://octopress.org/">Octopress</a>.<br/><span class="copyleft">©</span> pico.dev 2015
</div></div></div></div></footer><div id="fb-root"></div><script type="text/javascript">var require = {
  "waitSeconds" : 300,
  "shim" : {
    "t5/core/typeahead" : [
      "jquery"
    ],
    "bootstrap/affix" : [
      "bootstrap/transition"
    ],
    "bootstrap/alert" : [
      "bootstrap/transition"
    ],
    "bootstrap/modal" : [
      "bootstrap/transition"
    ],
    "bootstrap/tab" : [
      "bootstrap/transition"
    ],
    "bootstrap/transition" : [
      "jquery"
    ],
    "bootstrap/button" : [
      "bootstrap/transition"
    ],
    "bootstrap/scrollspy" : [
      "bootstrap/transition"
    ],
    "bootstrap/collapse" : [
      "bootstrap/transition"
    ],
    "bootstrap/dropdown" : [
      "bootstrap/transition"
    ],
    "bootstrap/tooltip" : [
      "bootstrap/transition"
    ],
    "bootstrap/carousel" : [
      "bootstrap/transition"
    ],
    "bootstrap/popover" : [
      "bootstrap/tooltip"
    ]
  },
  "baseUrl" : "/modules"
};
</script><script src="/assets/tapestry5/require.js" type="text/javascript"></script><script src="/assets/tapestry5/underscore-1.5.2.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/scriptaculous.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/effects.js" type="text/javascript"></script><script src="/assets/tapestry5/t53-compatibility.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery-noconflict.js" type="text/javascript"></script><script type="text/javascript">require(["t5/core/pageinit"], function(pi) { pi([], [
  "app/analytics",
  [
    "app/karmacracy:init",
    {
      "selector" : "#widget",
      "id" : 1336,
      "url" : "http://www.blogstack.info/post/arquitecturajava/2015/01/utilizando-jpa-namedqueries"
    }
  ],
  "app/facebook",
  "app/googleplus",
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts",
      "source" : "arquitecturajava",
      "name" : "Arquitectura Java"
    }
  ],
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts_0",
      "source" : "blogstack",
      "name" : "Blog Stack"
    }
  ],
  [
    "app/adsensem:init",
    {
      "blogstack" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlot" : "1397019380"
      }
    }
  ]
]); });</script></body></html>