<!DOCTYPE html><html data-debug-enabled="true" data-locale="es_ES" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="Apache Tapestry Framework (version 5.4-beta-16)" name="generator"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta pagina="Post"/><title>Añadir jerarquía a nuestras colecciones de datos en PHP. Creando árboles en PHP | Poesía binaria</title><!-- Resources --><link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/><link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link title="Portada" type="application/atom+xml" rel="alternate" href="/feed.atom.xml"/><link type="image/png" rel="icon" href="/assets/images/favicon.png"/><meta content="Post" name="tapestry-page-name"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/bootstrap/css/bootstrap.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/exception-frame.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry-console.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tree.css"/><link type="text/css" rel="stylesheet" href="/assets/css/core.css"/></head><body data-page-initialized="false"><script type="text/javascript">document.write("<div class=\"pageloading-mask\"><div></div></div>");</script><header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><h1><a class="blogstack" href="/"><span class="glyphicon glyphicon-th"></span> Blog <span class="stack">Stack</span></a></h1></div><div class="col-xs-12 col-sm-12 col-md-6"><nav role="navigation"><ul class="list-unstyled list-inline"><li><a class="header" href="/">Inicio</a></li><li><a class="header" href="/archive">Archivo</a></li><li><a class="header" href="/faq">Preguntas frecuentes</a></li><li><a class="header" href="/faq#aggregate">¿Quieres agregar tu bitácora?</a></li></ul></nav></div><div class="col-xs-6 col-sm-6 col-md-2"><a title="Fuente RSS, ¡suscríbete a BS!" alt="Fuente RSS" class="header" href="/feed.atom.xml"><span class="header icon entypo"></span></a><a title="Twitter, ¡sigue a BS!" alt="Twitter" class="header" href="http://twitter.com/blogstackinfo"><span class="header icon entypo-social"></span></a></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><h4>Un poco más que un agregador/planeta de bitácoras sobre programación, desarrollo, software libre, gnu/linux, tecnología, ...</h4></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="imagen-cabecera"><div class="imagen"><div class="col-xs-12 col-sm-12 col-md-12" id="billboard"></div></div></div></div></div></div></header><div class="container-fluid content"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8 content"><article itemtype="http://schema.org/BlogPosting" itemscope=""><a id="content"></a><header><h2><a href="/post/poesiabinaria/2015/02/anadir-jerarquia-a-nuestras-colecciones-de-datos-en-php-creando-arboles-en-php"><span itemprop="headline">Añadir jerarquía a nuestras colecciones de datos en PHP. Creando árboles en PHP</span></a></h2></header><div class="row labels"><div class="col-md-12"><a class="label" href="/label/php"><img title="php" alt="php" src="/assets/images/labels/php.png"/></a></div></div><section class="post-data"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div><span>Escrito por <span itemprop="author">Gaspar Fernández</span> en la bitácora <a href="http://totaki.com/poesiabinaria/">Poesía binaria</a>, <a href="http://totaki.com/poesiabinaria/2015/02/jerarquia-en-arrays-php/"><span itemprop="sameAs">artículo original</span></a></span></div><div><span datetime="2015-02-05T16:10" itemprop="datePublished">Publicado el jueves, 05 de febrero de 2015 a las 16:10 UTC</span></div><div><span>
Etiquetado como
fotos, peticiones, elementos, jerarquia, complejidad, rendimiento, <a href="/label/php"><span itemprop="articleSection">php</span></a>, arboles, datos, base, coleccion, buildtree, general, categorias</span></div></div></div></section><div class="text-justify post-content"><div class="share-this only-twitter"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/poesiabinaria/2015/02/anadir-jerarquia-a-nuestras-colecciones-de-datos-en-php-creando-arboles-en-php" st_title="Añadir jerarquía a nuestras colecciones de datos en PHP. Creando árboles en PHP | Poesía binaria"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><span itemprop="name"><p><a href="http://totaki.com/poesiabinaria/wp-content/plugins/wordpress-feed-statistics/feed-statistics.php?url=aHR0cDovL3RvdGFraS5jb20vcG9lc2lhYmluYXJpYS93cC1jb250ZW50L3VwbG9hZHMvMjAxNS8wMi8xNDcyNDE5NzgwMF9jMDJiNzk5ZDQ5X2suanBn"><img title="14724197800_c02b799d49_k" src="http://totaki.com/poesiabinaria/wp-content/uploads/2015/02/14724197800_c02b799d49_k-745x558.jpg" alt="" width="745" height="558" /></a></p> 
<p>Es una pr&aacute;ctica muy com&uacute;n categorizar nuestros. Hacer que existan categor&iacute;as/sub-categor&iacute;as/sub-sub-categor&iacute;as sin l&iacute;mite al igual que directorios o carpetas hay en nuestro ordenador necesitamos tener todo clasificado. Es decir, queremos introducir jerarqu&iacute;a en nuestros datos, hacer que unos campos dependan de otros.<br /> Pero cuando guardamos la informaci&oacute;n en base de datos, normalmente se guardar&aacute;n en una tabla con dos dimensiones, por lo que perdemos esa sensaci&oacute;n de que hay unos datos dentro de otros. Lo normal en estos casos, es que en cada fila de nuestra tabla haya un campo extra que apunta al identificador de la entrada que establecemos como padre.</p> 
<p>Por ejemplo, si intentamos introducir categor&iacute;as de pintura, tendremos por ejemplo:</p> 
<ul>
 <li>G&eacute;nero pict&oacute;rico 
  <ul>
   <li>Hist&oacute;rica 
    <ul>
     <li>Prehistoria</li> 
     <li>Edad antigua</li> 
     <li>Edad media</li> 
     <li>Edad moderna</li> 
     <li>Edad contempor&aacute;nea</li> 
    </ul></li> 
   <li>Retrato</li> 
   <li>Paisaje</li> 
   <li>Bodeg&oacute;n</li> 
  </ul></li> 
 <li>T&eacute;cnica 
  <ul>
   <li>&Oacute;leo</li> 
   <li>Cera</li> 
   <li>Acuarela</li> 
  </ul></li> 
 <li>Soporte 
  <ul>
   <li>Lienzo</li> 
   <li>Papel</li> 
   <li>Vidrio</li> 
  </ul></li> 
</ul>
<p>La informaci&oacute;n que tendremos en nuestra tabla de base de datos ser&aacute;:</p> 
<table>
 <tbody>
  <tr>
   <td>ID</td> 
   <td>Nombre</td> 
  </tr>
  <tr>
   <td>1</td> 
   <td>G&eacute;nero</td> 
  </tr>
  <tr>
   <td>2</td> 
   <td>T&eacute;cnica</td> 
  </tr>
  <tr>
   <td>3</td> 
   <td>Soporte</td> 
  </tr>
  <tr>
   <td>4</td> 
   <td>Hist&oacute;rica</td> 
  </tr>
  <tr>
   <td>5</td> 
   <td>Retrato</td> 
  </tr>
  <tr>
   <td>6</td> 
   <td>Paisaje</td> 
  </tr>
  <tr>
   <td>7</td> 
   <td>Bodeg&oacute;n</td> 
  </tr>
  <tr>
   <td>8</td> 
   <td>&Oacute;leo</td> 
  </tr>
  <tr>
   <td>9</td> 
   <td>Cera</td> 
  </tr>
  <tr>
   <td>10</td> 
   <td>Acuarela</td> 
  </tr>
  <tr>
   <td>11</td> 
   <td>Lienzo</td> 
  </tr>
  <tr>
   <td>12</td> 
   <td>Papel</td> 
  </tr>
  <tr>
   <td>13</td> 
   <td>Vidrio</td> 
  </tr>
  <tr>
   <td>14</td> 
   <td>Prehistoria</td> 
  </tr>
  <tr>
   <td>15</td> 
   <td>Edad antigua</td> 
  </tr>
  <tr>
   <td>16</td> 
   <td>Edad media</td> 
  </tr>
  <tr>
   <td>17</td> 
   <td>Edad moderna</td> 
  </tr>
  <tr>
   <td>18</td> 
   <td>Edad contempor&aacute;nea</td> 
  </tr>
 </tbody>
</table>
<p>A&ntilde;adiendo la entrada <strong>padre</strong>, esto quedar&aacute; de la siguiente manera:</p> 
<table>
 <tbody>
  <tr>
   <td>ID</td> 
   <td>Nombre</td> 
   <td>Padre</td> 
  </tr>
  <tr>
   <td>1</td> 
   <td>G&eacute;nero</td> 
   <td>&nbsp;0</td> 
  </tr>
  <tr>
   <td>2</td> 
   <td>T&eacute;cnica</td> 
   <td>&nbsp;0</td> 
  </tr>
  <tr>
   <td>3</td> 
   <td>Soporte</td> 
   <td>&nbsp;0</td> 
  </tr>
  <tr>
   <td>4</td> 
   <td>Hist&oacute;rica</td> 
   <td>&nbsp;1</td> 
  </tr>
  <tr>
   <td>5</td> 
   <td>Retrato</td> 
   <td>&nbsp;1</td> 
  </tr>
  <tr>
   <td>6</td> 
   <td>Paisaje</td> 
   <td>&nbsp;1</td> 
  </tr>
  <tr>
   <td>7</td> 
   <td>Bodeg&oacute;n</td> 
   <td>&nbsp;1</td> 
  </tr>
  <tr>
   <td>8</td> 
   <td>&Oacute;leo</td> 
   <td>&nbsp;2</td> 
  </tr>
  <tr>
   <td>9</td> 
   <td>Cera</td> 
   <td>&nbsp;2</td> 
  </tr>
  <tr>
   <td>10</td> 
   <td>Acuarela</td> 
   <td>&nbsp;2</td> 
  </tr>
  <tr>
   <td>11</td> 
   <td>Lienzo</td> 
   <td>&nbsp;3</td> 
  </tr>
  <tr>
   <td>12</td> 
   <td>Papel</td> 
   <td>&nbsp;3</td> 
  </tr>
  <tr>
   <td>13</td> 
   <td>Vidrio</td> 
   <td>&nbsp;3</td> 
  </tr>
  <tr>
   <td>14</td> 
   <td>Prehistoria</td> 
   <td>&nbsp;4</td> 
  </tr>
  <tr>
   <td>15</td> 
   <td>Edad antigua</td> 
   <td>&nbsp;4</td> 
  </tr>
  <tr>
   <td>16</td> 
   <td>Edad media</td> 
   <td>&nbsp;4</td> 
  </tr>
  <tr>
   <td>17</td> 
   <td>Edad moderna</td> 
   <td>&nbsp;4</td> 
  </tr>
  <tr>
   <td>18</td> 
   <td>Edad contempor&aacute;nea</td> 
   <td>&nbsp;4</td> 
  </tr>
 </tbody>
</table>
<p>Ahora ser&aacute; f&aacute;cil saber de d&oacute;nde <em>cuelga</em> cada subcategor&iacute;a. Podremos traer de base de datos los elementos pertenecientes al g&eacute;nero hist&oacute;rico (id=4) buscando todos los elementos cuyo padre sea 4 y veremos 14, 15, 16, 17 y 18. Tambi&eacute;n sabemos que las categor&iacute;as ra&iacute;z (las primeras que veremos) ser&aacute;n las que <em>cuelgan</em> de 0.</p> 
<p>Lo bueno de esta t&eacute;cnica, es que la tabla puede ir rellen&aacute;ndose en la direcci&oacute;n que sea, es decir, podremos introducir de manera indiferente g&eacute;neros, t&eacute;cnicas, etc (en el ejemplo est&aacute;n por orden para entendernos mejor, pero en la realidad esto puede llegar a ser un caos (t&eacute;cnicas, &eacute;pocas, g&eacute;neros y soportes entremezclados) ya que ser&aacute; la base de datos la que se encargue de traer los datos asociados en cada momento.</p> 
<p>Hacer las consultas es f&aacute;cil, pero ahora queremos tener en PHP un array con esta informaci&oacute;n de forma que la podamos manejar f&aacute;cilmente. Una primera aproximaci&oacute;n a la soluci&oacute;n ser&iacute;a la siguiente:</p> 
<ul>
 <li>Sacamos de la base de datos los elementos que tienen como padre a 0</li> 
 <li>Iteramos en ese array y consultamos en base de datos si cada uno de esos IDs tiene elementos (si tiene hijos, o si hay alg&uacute;n elemento cuyo padre sea el ID que estamos mirando en este momento) 
  <ul>
   <li>Si tiene hijos, creamos una clave llamada ‘elementos’ y metemos ah&iacute; el resultado de la consulta.</li> 
   <li>Repetimos la operaci&oacute;n con cada uno de los elementos que encontramos en la clave ‘elementos’</li> 
  </ul></li> 
</ul>
<p>Lo que nos dar&iacute;a una bonita funci&oacute;n recursiva que debe funcionar muy bien (al menos al principio). El problema est&aacute; en que cuando tengamos muchas categor&iacute;as y &eacute;stas se est&eacute;n consultando muchas veces, sobrecargaremos la base de datos de consultas y &eacute;stas tardar&aacute;n un tiempo precioso en terminar.</p> 
<p>Si ponemos como ejemplo las categor&iacute;as de pintura, el algoritmo para crear ese array de PHP donde almacenaremos todas las categor&iacute;as con su jerarqu&iacute;a ser&iacute;a el siguiente (consultas de base de datos en negrita):</p> 
<ul>
 <li><strong>Pedir a base de datos las categor&iacute;as cuyo padre es 0</strong> (1)</li> 
 <li>Recorremos las categor&iacute;as: 
  <ul>
   <li><strong>Pedir a base de datos las categor&iacute;as cuyo padre es 1</strong> (G&eacute;nero) (2)</li> 
   <li>Recorremos las subcateogr&iacute;as de 1, G&eacute;nero: 
    <ul>
     <li><strong>Pedir a base de datos las categor&iacute;as cuyo padre es 4</strong> (Hist&oacute;rica) (3)</li> 
     <li>Recorremos las subcategor&iacute;as de 4, Hist&oacute;rica: 
      <ul>
       <li><strong>Pedir a base de datos las categor&iacute;as cuyos padres son: 14, 15, 16, 17, 18</strong>(8)</li> 
      </ul></li> 
     <li><strong>Pedir a base de datos las categor&iacute;as cuyos padres son: 5, 6, 7</strong> (11)</li> 
    </ul></li> 
   <li>Recorremos las subcateogr&iacute;as de 2, T&eacute;cnica: 
    <ul>
     <li><strong>Pedir a base de datos las categor&iacute;as cuyos padres son: 8, 9, 10</strong> (14)</li> 
    </ul></li> 
   <li>Recorremos las subcateogr&iacute;as de 3, Soporte: 
    <ul>
     <li><strong>Pedir a base de datos las categor&iacute;as cuyos padres son: 11, 12, 13</strong> (17)</li> 
    </ul></li> 
  </ul></li> 
</ul>
<p>Lo que hace un total de 17 consultas a base de datos. Lo cual es inviable. Debemos de saber que es mucho m&aacute;s r&aacute;pido pedir una cantidad de datos grande de una vez que hacer 17 peticiones peque&ntilde;as (lo segundo casi casi tarda 17 veces m&aacute;s). No es cuesti&oacute;n de pedir datos que no necesitamos, pero si por ejemplo queremos dibujar un &aacute;rbol con las categor&iacute;as s&iacute; que necesitamos tenerlas todas en memoria por lo que <strong>es mucho m&aacute;s r&aacute;pido pedir una sola vez la tabla completa de subcategor&iacute;as</strong> y trabajarla para obtener nuestro array final.</p> 
<p>Para ello, podemos utilizar m&uacute;ltiples algoritmos, aunque uno muy r&aacute;pido es el siguiente:</p> 
<div style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;height:300px;">
 <table>
  <tbody>
   <tr>
    <td>
     <div>
      1
      <br />2
      <br />3
      <br />4
      <br />5
      <br />6
      <br />7
      <br />8
      <br />9
      <br />10
      <br />11
      <br />12
      <br />13
      <br />14
      <br />15
      <br />16
      <br />17
      <br />18
      <br />19
      <br />20
      <br />21
      <br />22
      <br />23
      <br />24
      <br />25
      <br />26
      <br />27
      <br />28
      <br />29
      <br />30
      <br />31
      <br />32
      <br />33
      <br />34
      <br />35
      <br />36
      <br />37
      <br />38
      <br />39
      <br />40
      <br />41
      <br />42
      <br />43
      <br />44
      <br />45
      <br />46
      <br />47
      <br />48
      <br />49
      <br />50
      <br />51
      <br />52
      <br />53
      <br />54
      <br />55
      <br />56
      <br />57
      <br />58
      <br />59
      <br />60
      <br />61
      <br />62
      <br />63
      <br />64
      <br />65
      <br />66
      <br />67
      <br />68
      <br />69
      <br />70
      <br />71
      <br />72
      <br />73
      <br />74
      <br />75
      <br />76
      <br />77
      <br />78
      <br />79
      <br />80
      <br />81
      <br />82
      <br />83
      <br />
     </div></td>
    <td>
     <div style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap">
      &lt;!--?php &lt;/p--&gt;
      <br /> 
      <br /> $ex = 
      <a href="http://www.php.net/array">array</a>(
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 1,
      <br /> 'nombre' =&amp;gt; 'G&eacute;nero',
      <br /> 'parentId' =&amp;gt; 0),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 2,
      <br /> 'nombre' =&amp;gt; 'T&eacute;cnica',
      <br /> 'parentId' =&amp;gt; 0),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 3,
      <br /> 'nombre' =&amp;gt; 'Prehistoria',
      <br /> 'parentId' =&amp;gt; 7),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 4,
      <br /> 'nombre' =&amp;gt; 'Edad antigua',
      <br /> 'parentId' =&amp;gt; 7),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 7,
      <br /> 'nombre' =&amp;gt; 'Hist&oacute;rica',
      <br /> 'parentId' =&amp;gt; 1),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 5,
      <br /> 'nombre' =&amp;gt; '&Oacute;leo',
      <br /> 'parentId' =&amp;gt; 2),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 6,
      <br /> 'nombre' =&amp;gt; 'Retrato',
      <br /> 'parentId' =&amp;gt; 1),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 8,
      <br /> 'nombre' =&amp;gt; 'Soporte',
      <br /> 'parentId' =&amp;gt; 0),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 9,
      <br /> 'nombre' =&amp;gt; 'Lienzo',
      <br /> 'parentId' =&amp;gt; 8),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 10,
      <br /> 'nombre' =&amp;gt; 'Edad media',
      <br /> 'parentId' =&amp;gt; 7),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 11,
      <br /> 'nombre' =&amp;gt; 'Paisaje',
      <br /> 'parentId' =&amp;gt; 1),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 12,
      <br /> 'nombre' =&amp;gt; 'Bodeg&oacute;n',
      <br /> 'parentId' =&amp;gt; 1),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 13,
      <br /> 'nombre' =&amp;gt; 'Cera',
      <br /> 'parentId' =&amp;gt; 2),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 14,
      <br /> 'nombre' =&amp;gt; 'Acuarela',
      <br /> 'parentId' =&amp;gt; 2),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 15,
      <br /> 'nombre' =&amp;gt; 'Papel',
      <br /> 'parentId' =&amp;gt; 8),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 16,
      <br /> 'nombre' =&amp;gt; 'Vidrio',
      <br /> 'parentId' =&amp;gt; 8),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 17,
      <br /> 'nombre' =&amp;gt; 'Edad moderna',
      <br /> 'parentId' =&amp;gt; 7),
      <br /> 
      <a href="http://www.php.net/array">array</a>('id' =&amp;gt; 18,
      <br /> 'nombre' =&amp;gt; 'Edad contempor&aacute;nea',
      <br /> 'parentId' =&amp;gt; 7),
      <br /> );
      <br /> 
      <br /> function buildTree($data, $rootId=0)
      <br /> {
      <br /> $tree = 
      <a href="http://www.php.net/array">array</a>('children' =&amp;gt; 
      <a href="http://www.php.net/array">array</a>(),
      <br /> 'root' =&amp;gt; 
      <a href="http://www.php.net/array">array</a>()
      <br /> );
      <br /> foreach ($data as $ndx=&amp;gt;$node)
      <br /> {
      <br /> $id = $node['id'];
      <br /> /* Puede que exista el children creado si los hijos entran antes que el padre */
      <br /> $node['children'] = (
      <a href="http://www.php.net/isset">isset</a>($tree['children'][$id]))?$tree['children'][$id]['children']:
      <a href="http://www.php.net/array">array</a>();
      <br /> $tree['children'][$id] = $node;
      <br /> 
      <br /> if ($node['parentId'] == $rootId)
      <br /> $tree['root'][$id] = &amp;amp;$tree['children'][$id];
      <br /> else
      <br /> {
      <br /> $tree['children'][$node['parentId']]['children'][$id] = &amp;amp;$tree['children'][$id];
      <br /> }
      <br /> 
      <br /> }
      <br /> return $tree;
      <br /> }
      <br /> 
      <br /> 
      <a href="http://www.php.net/print_r">print_r</a>(buildTree($ex));
     </div></td>
   </tr>
  </tbody>
 </table>
</div> 
<p>Esto nos crear&aacute; una estructura con dos &iacute;ndices:</p> 
<ul>
 <li>children</li> 
 <li>root</li> 
</ul>
<p>En el primero de ellos se ir&aacute;n almacenando cada uno de los elementos en bruto y en el segundo nuestra tan ansiada estructura en forma de &aacute;rbol. La esencia de este algoritmo radica en su complejidad O(n) o lo que es lo mismo, realizaremos tantas operaciones como elementos totales haya en nuestra tabla de categor&iacute;as. Con esto, nos quitamos un algoritmo recursivo (y la sobrecarga que produce) y lo hacemos tan sencillo como pasar datos de un lado a otro.<br /> Lo que estamos haciendo aqu&iacute; es <strong>copiar las referencias de cada uno de los elementos de la lista</strong> y no los elementos en s&iacute;. De esta forma, si la referencia de un elemento del &iacute;ndice ‘children’ tiene dos elementos hijos dentro de &eacute;l la copiamos al &iacute;ndice ‘root’, cuando consultemos dentro de root, estaremos viendo los dos hijos; pero si ahora, le a&ntilde;adimos al mismo elemento dentro de children otro hijo, al consultarlo desde ‘root’ veremos este nuevo hijo. Lo mejor es que no se est&aacute;n realizando copias de datos completos, sino de referencias, por lo que, aunque veamos los mismos elementos en ‘root’ y en ‘children’ no est&aacute;n ocupando el doble.</p> 
<p>Por lo general, esta funci&oacute;n <strong>buildTree()</strong> admitir&aacute; un array de elementos, cada uno de esos elementos deber&aacute; ser un array y <strong>obligatoriamente</strong>, debemos tener una clave <em>id</em> y otra clave <em>parentId</em> (luego podremos hacerlo configurable si queremos). Por defecto al ID de la categor&iacute;a o elemento ra&iacute;z ser&aacute; 0.</p> 
<p>He de decir tambi&eacute;n, que en este ejemplo, he revuelto el orden de los elementos, para que veamos que no importa en qu&eacute; posici&oacute;n est&eacute;n, es m&aacute;s, podemos incluso especificar los elementos hijos antes que los elementos padre (muy &uacute;til cuando queremos que vengan en un orden determinado en base de datos).<br /> Foto: <a href="http://totaki.com/poesiabinaria/wp-content/plugins/wordpress-feed-statistics/feed-statistics.php?url=aHR0cHM6Ly93d3cuZmxpY2tyLmNvbS9waG90b3MvMjkyMzM2NDBATjA3LzE0NzI0MTk3ODAwL2luL3Bob3RvbGlzdC04SnR6OVEtOU5vM2loLWI2NkRCWC05akdXamYtOXFybm9aLW9yOG4yai1iQ0RXVHktOVo5OXZSLW9mWEJ1dS1kem40aGstYzFYcXhRLVp6UDgtY0g4SjV1LWhXbzVKWC1kNTREZDkta1E3UmJaLTU3am9kRS04ZjNYWi1vV1RZcGotYUE4Z2dOLXBzV2Jaay1HZnVROS1rR25WSkstbzdNWGhNLWJuSjFvZi1hOW9TcjMtZjJIekxtLTdYdUVWYi1iYVVMcE0tYjRRaWhELXE2OHhOei1oUm1VeUctcDFmeUNILWRROHFBYS1rOTlWTDYtY3VxamtoLW90UFFCci1TVlBBbS01UWZRMjctOThVdHdrLXFzQ3JROS04WkNwdDItYnFYdXBvLWVjN2tKQy1peUNCZXktN1JBVmdlLWh2c1d5aS1lQ0dQcU0tNEpib1gxLWZpQlhBcA==">Robert Couse-Baker</a> (Flickr CC-by)</p> 
<div>
 <iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Ftotaki.com%2Fpoesiabinaria%2F2015%2F02%2Fjerarquia-en-arrays-php%2F&amp;layout=standard&amp;show_faces=true&amp;width=500&amp;action=like&amp;font=segoe+ui&amp;colorscheme=light&amp;height=80" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:80px;"></iframe>
</div> 
<img src="http://totaki.com/poesiabinaria/wp-content/plugins/wordpress-feed-statistics/feed-statistics.php?view=1&amp;post_id=2430" width="1" height="1" style="display: none;" />
<p>La entrada <a href="http://totaki.com/poesiabinaria/2015/02/jerarquia-en-arrays-php/">A&ntilde;adir jerarqu&iacute;a a nuestras colecciones de datos en PHP. Creando &aacute;rboles en PHP</a> aparece primero en <a href="http://totaki.com/poesiabinaria">Poes&iacute;a Binaria</a>.</p></span></div><section><a id="share"></a><h1>Compartir</h1><div class="share-this"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/poesiabinaria/2015/02/anadir-jerarquia-a-nuestras-colecciones-de-datos-en-php-creando-arboles-en-php" st_title="Añadir jerarquía a nuestras colecciones de datos en PHP. Creando árboles en PHP | Poesía binaria"></span><span displayText="Facebook" class="st_facebook_vcount" st_url="http://www.blogstack.info/post/poesiabinaria/2015/02/anadir-jerarquia-a-nuestras-colecciones-de-datos-en-php-creando-arboles-en-php" st_title="Añadir jerarquía a nuestras colecciones de datos en PHP. Creando árboles en PHP | Poesía binaria"></span><span displayText="Google +" class="st_googleplus_vcount" st_url="http://www.blogstack.info/post/poesiabinaria/2015/02/anadir-jerarquia-a-nuestras-colecciones-de-datos-en-php-creando-arboles-en-php" st_title="Añadir jerarquía a nuestras colecciones de datos en PHP. Creando árboles en PHP | Poesía binaria"></span><span displayText="LinkedIn" class="st_linkedin_vcount" st_url="http://www.blogstack.info/post/poesiabinaria/2015/02/anadir-jerarquia-a-nuestras-colecciones-de-datos-en-php-creando-arboles-en-php" st_title="Añadir jerarquía a nuestras colecciones de datos en PHP. Creando árboles en PHP | Poesía binaria"></span><span displayText="Meneame" class="st_meneame_vcount" st_url="http://www.blogstack.info/post/poesiabinaria/2015/02/anadir-jerarquia-a-nuestras-colecciones-de-datos-en-php-creando-arboles-en-php" st_title="Añadir jerarquía a nuestras colecciones de datos en PHP. Creando árboles en PHP | Poesía binaria"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div id="widget"></div></section><hr/></article></div><div class="col-xs-12 col-sm-12 col-md-4"><aside><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section><h3>¡Suscríbete!</h3><ul class="list-unstyled"><li><a href="/label/php/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta php</a></li></ul></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigRectangle"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section><h3>Redes sociales</h3><p>¿Te gusta Blog Stack? ¡Compártelo!</p><div class="social-networks"><!-- Facebook --><div class="social-network"><div data-share="true" data-show-faces="false" data-action="like" data-width="310" data-layout="box_count" data-href="http://www.blogstack.info/" class="fb-like"></div></div><!-- Google+ --><div class="social-network"><div class="g-plusone" data-href="http://www.blogstack.info/" data-size="tall"></div></div></div></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts"></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigSkycraper"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts_0"></section></div></div></aside></div></div></div><footer><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="footer"><a href="/">Blog Stack</a> por <a href="https://twitter.com/picodotdev/">pico.dev</a> está publicado bajo la licencia de software libre <a href="http://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public</a> en <a href="https://github.com/picodotdev/blog-stack">GitHub <span class="entypo-social"></span></a>.<br/>
El contenido agregado conserva la licencia de su bitácora.<br/>
«Powered by» <a href="https://github.com/picodotdev/blogstack">Blog Stack</a>, <a href="http://tapestry.apache.org/">Apache Tapestry</a>, <a href="https://www.openshift.com/">OpenShift</a>, <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://www.oracle.com/es/technologies/java/overview/index.html">Java</a> y más software libre o de código abierto, inspirado en <a href="http://octopress.org/">Octopress</a>.<br/><span class="copyleft">©</span> pico.dev 2015
</div></div></div></div></footer><div id="fb-root"></div><script type="text/javascript">var require = {
  "waitSeconds" : 300,
  "shim" : {
    "t5/core/typeahead" : [
      "jquery"
    ],
    "bootstrap/affix" : [
      "bootstrap/transition"
    ],
    "bootstrap/alert" : [
      "bootstrap/transition"
    ],
    "bootstrap/modal" : [
      "bootstrap/transition"
    ],
    "bootstrap/tab" : [
      "bootstrap/transition"
    ],
    "bootstrap/transition" : [
      "jquery"
    ],
    "bootstrap/button" : [
      "bootstrap/transition"
    ],
    "bootstrap/scrollspy" : [
      "bootstrap/transition"
    ],
    "bootstrap/collapse" : [
      "bootstrap/transition"
    ],
    "bootstrap/dropdown" : [
      "bootstrap/transition"
    ],
    "bootstrap/tooltip" : [
      "bootstrap/transition"
    ],
    "bootstrap/carousel" : [
      "bootstrap/transition"
    ],
    "bootstrap/popover" : [
      "bootstrap/tooltip"
    ]
  },
  "baseUrl" : "/modules"
};
</script><script src="/assets/tapestry5/require.js" type="text/javascript"></script><script src="/assets/tapestry5/underscore-1.5.2.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/scriptaculous.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/effects.js" type="text/javascript"></script><script src="/assets/tapestry5/t53-compatibility.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery-noconflict.js" type="text/javascript"></script><script type="text/javascript">require(["t5/core/pageinit"], function(pi) { pi([], [
  "app/analytics",
  [
    "app/karmacracy:init",
    {
      "selector" : "#widget",
      "id" : 1428,
      "url" : "http://www.blogstack.info/post/poesiabinaria/2015/02/anadir-jerarquia-a-nuestras-colecciones-de-datos-en-php-creando-arboles-en-php"
    }
  ],
  "app/facebook",
  "app/googleplus",
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts",
      "source" : "poesiabinaria",
      "name" : "Poesía binaria"
    }
  ],
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts_0",
      "source" : "blogstack",
      "name" : "Blog Stack"
    }
  ],
  [
    "app/adsensem:init",
    {
      "blogstack" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlot" : "1397019380"
      }
    }
  ]
]); });</script></body></html>