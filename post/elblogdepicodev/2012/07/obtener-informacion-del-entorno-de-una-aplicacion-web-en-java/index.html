<!DOCTYPE html><html data-debug-enabled="true" data-locale="es_ES" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="Apache Tapestry Framework (version 5.4-beta-3)" name="generator"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta pagina="Post"/><title>Obtener información del entorno de una aplicación web en Java | El blog de pico.dev</title><!-- Resources --><link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/><link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link title="Portada" type="application/atom+xml" rel="alternate" href="/atom.xml"/><link type="image/png" rel="icon" href="/assets/images/favicon.png"/><meta content="Post" name="tapestry-page-name"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/bootstrap/css/bootstrap.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/exception-frame.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry-console.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tree.css"/><link type="text/css" rel="stylesheet" href="/assets/css/core.css"/></head><body data-page-initialized="false"><header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><h1><a class="blogstack" href="/"><span class="glyphicon glyphicon-th"></span> Blog <span class="stack">Stack</span></a></h1></div><div class="col-xs-12 col-sm-12 col-md-8" id="horizontalSkycraper"></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><h4>Un poco más que un agregador/planeta de bitácoras sobre programación, desarrollo, software libre, gnu/linux, tecnología, ...</h4></div></div></div></header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><nav role="navigation"><ul class="nav nav-pills menu"><li><a href="/">Inicio</a></li><li><a href="/archive">Archivo</a></li><li><a href="/faq">Preguntas frecuentes</a></li></ul></nav></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8 content"><article itemtype="http://schema.org/BlogPosting" itemscope=""><a id="content"></a><header><h2><a href="/post/elblogdepicodev/2012/07/obtener-informacion-del-entorno-de-una-aplicacion-web-en-java"><span itemprop="headline">Obtener información del entorno de una aplicación web en Java</span></a></h2></header><section class="post-data"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div><span>Escrito por <span itemprop="author">pico.dev</span> en la bitácora <a href="http://elblogdepicodev.blogspot.com.es/">El blog de pico.dev</a>, <a href="http://elblogdepicodev.blogspot.com/2012/07/obtener-informacion-del-entorno-de-una.html"><span itemprop="sameAs">entrada original</span></a></span></div><div><span datetime="2012-07-27T19:36" itemprop="datePublished">Publicado el viernes, 27 de julio de 2012 a las 19:36 UTC</span></div><div><span datetime="2012-07-27T19:36" itemprop="dateModified">Actualizado el viernes, 27 de julio de 2012 a las 19:36 UTC</span></div><div><span>
Etiquetado como
<a href="/label/planeta-codigo"><span itemprop="articleSection">planeta-codigo</span></a>
,
<a href="/label/programacion"><span itemprop="articleSection">programacion</span></a>
,
<a href="/label/java"><span itemprop="articleSection">java</span></a></span></div></div></div></section><div class="text-justify post-content"><div class="share-this only-twitter"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2012/07/obtener-informacion-del-entorno-de-una-aplicacion-web-en-java" st_via="blogstack" st_title="Obtener información del entorno de una aplicación web en Java | El blog de pico.dev"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><span itemprop="name"><div style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;">
 <img alt="Java" height="200" src="http://2.bp.blogspot.com/-hC2-QuC33AU/TBeztET3lAI/AAAAAAAAAZ8/EzZnNZw5do0/s200/java.png" title="Java" width="107" />
</div>Hace un tiempo coment&eacute; algunas ventajas que obtenemos al tener un sistema de logging en una aplicaci&oacute;n y una combinaci&oacute;n de librer&iacute;as que podr&iacute;amos utilizar para este prop&oacute;sito 
<a href="http://elblogdepicodev.blogspot.com.es/2012/04/librerias-de-logging-para-java-slf4j.html">[1]</a>. Una vez que tenemos un sistema de logging en una aplicaci&oacute;n podemos sacarle mucho provecho, como obtener alguna informaci&oacute;n b&aacute;sica del entorno de ejecuci&oacute;n.
<br />
<br />La raz&oacute;n de obtener la mayor informaci&oacute;n del entorno de ejecuci&oacute;n es m&aacute;s para el entorno de pruebas o producci&oacute;n que para el entorno en el que desarrollamos, ya que estos primeros pueden llevar alguna configuraci&oacute;n especial que no solemos revisar o est&aacute;n fuera de nuestro control aunque en los &uacute;ltimos tambi&eacute;n puede ser interesante si las hay varias personas que colaboran con posiblemente diferentes sistemas operativos instalados y configuraciones. Tener a nuestra disposici&oacute;n esta informaci&oacute;n nos puede permitir darnos cuenta de la causa de algun comportamiento extra&ntilde;o. Alg&uacute;n ejemplo de informaci&oacute;n que nos puede ser de utilidad es la hora del sistema, si trabajamos con fechas la zona horaria en la que est&aacute; configurado o la codificaci&oacute;n de caracteres por defecto.
<br />
<br />Vamos a verlo en el caso de una aplicaci&oacute;n web. En las aplicaciones web Java tenemos a nuestra disposici&oacute;n dos interfaces que podemos implementar y ser notificados cuando ocurran ciertos eventos en la aplicaci&oacute;n como son cuando se inicia, cuando se va a terminar, cuando se crea una sesi&oacute;n y cuando se destruye una sesi&oacute;n. Ahora que estamos interesandos en obtener informaci&oacute;n del sistema vamos a ver unos ejemplos de clases 
<a href="http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html">ServletContextListener</a> y 
<a href="http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionListener.html">HttpSessionListener</a> que podr&iacute;amos utilizar para obtener informaci&oacute;n.
<br />
<br />Mediante la interfaz ServletContextListener y sus m&eacute;todos contextInitialized y contextDestroyed podremos obtener una referencia a un objeto 
<a href="http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html">ServletContext</a> y podremos acceder a los m&eacute;todos que proporciona para por ejemplo conocer los par&aacute;metros de inicializaci&oacute;n de la aplicaci&oacute;n si esta la parametrizamos de esta manera. En el siguiente ejemplo se saca al log la siguiente informaci&oacute;n: unas trazas de cabecera para saber donde empieza en la salida del log cada inicio de la aplicaci&oacute;n, el nombre de contexto de la aplicaci&oacute;n, las propiedades del sistema (incluyendo la zona horaria y la codificaci&oacute;n de caracteres por defecto), la informaci&oacute;n del servidor sobre el que se ejecuta la aplicaci&oacute;n y la versi&oacute;n de la Java Servlet API, los nodos del arbol JNDI y un enumerado que identificar&aacute; el servidor de aplicaciones sobre el que se ejecuta la aplicaci&oacute;n.
<br />
<br />
<div>
 <pre>package es.com.blogspot.elblogdepicodev.misc;<br /><br />import java.util.Enumeration;<br />import java.util.Iterator;<br />import java.util.LinkedHashMap;<br />import java.util.Map;<br /><br />import javax.naming.Context;<br />import javax.naming.InitialContext;<br />import javax.naming.NameClassPair;<br />import javax.naming.NamingEnumeration;<br />import javax.naming.NamingException;<br />import javax.servlet.ServletContext;<br />import javax.servlet.ServletContextEvent;<br />import javax.servlet.ServletContextListener;<br /><br />import org.slf4j.Logger;<br />import org.slf4j.LoggerFactory;<br /><br />import es.com.blogspot.elblogdepicodev.Entorno.Servidor;<br /><br />/**<br /> * Clase que recibe los eventos de inicio y fin de la aplicaci&oacute;n web.<br /> */<br />public class ContextListener implements ServletContextListener {<br /><br /> private static Logger logger;<br /><br /> public static ServletContext SERVLET_CONTEXT;<br /><br /> @Override<br /> public void contextInitialized(ServletContextEvent sce) {<br />  SERVLET_CONTEXT = sce.getServletContext();<br /><br />  // Configurar el entorno<br />  try {<br />   Utilidades.setupEntorno();<br />  } catch (Exception e) {<br />   e.printStackTrace();<br />  }<br /><br />  logger = LoggerFactory.getLogger(ContextListener.class);<br /><br />  logger.info(&quot;&quot;);<br />  logger.info(&quot;--- -.-. . -. ... ..- .-. .- -.. --- -.-. . -. ... ..- .-. .- -.. --- -.-. . -. ... ..- .-. .- -.. ---&quot;);<br />  logger.info(&quot;--- -.-. . -. ... ..- .-. .- -.. --- -.-. . -. ... ..- .-. .- -.. --- -.-. . -. ... ..- .-. .- -.. ---&quot;);<br />  logger.info(&quot;--- -.-. . -. ... ..- .-. .- -.. --- -.-. . -. ... ..- .-. .- -.. --- -.-. . -. ... ..- .-. .- -.. ---&quot;);<br /><br />  {<br />   try {<br />    logger.info(&quot;Iniciando aplicaci&oacute;n web [&quot; + sce.getServletContext().getServletContextName() + &quot;]...&quot;);<br />    logger.info(&quot;Propiedades del sistema:&quot;);<br /><br />    SecurityManager sm = System.getSecurityManager();<br />    Enumeration e = System.getProperties().keys();<br />    while (e.hasMoreElements()) {<br />     String key = (String) e.nextElement();<br />     try {<br />      if (sm != null) {<br />       sm.checkPropertyAccess(key);<br />      }<br />      logger.info(key + &quot;: &quot; + System.getProperties().get(key));<br />     } catch (SecurityException se) {<br />      logger.info(key + &quot;: [No hay permisos]&quot;);<br />     }<br />    }<br />   } catch (Exception e) {<br />    logger.warn(e.getMessage(), e);<br />   }<br />  }<br /><br />  {<br />   logger.info(&quot;Propiedades del entorno:&quot;);<br />   logger.info(&quot;Server info: &quot; + sce.getServletContext().getServerInfo());<br />   logger.info(&quot;Java Servlet API version: &quot; + sce.getServletContext().getMajorVersion() + &quot;.&quot; + sce.getServletContext().getMinorVersion());<br />  }<br /><br />  {<br />   // Obtener los nodos del &aacute;rbol JNDI<br />   Map enviroment = null;<br />   try {<br />    enviroment = new LinkedHashMap();<br />    buildEnv(new InitialContext(), Constantes.JNDI_EVANDTI, enviroment);<br />   } catch (Exception e) {<br />    logger.error(e.getMessage(), e);<br />   }<br /><br />   logger.info(&quot;Propiedades de entorno para la aplicacion web:&quot;);<br />   Iterator it = enviroment.keySet().iterator();<br />   while (it.hasNext()) {<br />    String key = (String) it.next();<br />    logger.info(&quot;{}: {}&quot;, new Object[] { key, enviroment.get(key) });<br />   }<br />  }<br /><br />  {<br />   logger.info(&quot;Propiedades din&aacute;micas:&quot;);<br />   Servidor servidor = getServidor(SERVLET_CONTEXT);<br />   Entorno.setPropiedadDinamica(Entorno.PROP_DINAMICA_SERVIDOR, servidor);<br /><br />   Iterator it = Entorno.getPropiedadesDinamicas().iterator();<br />   while (it.hasNext()) {<br />    String propiedad = (String) it.next();<br />    Object valor = Entorno.getPropiedadDinamica(propiedad);<br />    logger.info(&quot;{}: {}&quot;, propiedad, valor);<br />   }<br />  }<br /><br />  logger.info(&quot;Iniciando aplicacion con la configuracion del entorno de &laquo;{}&raquo;&quot;, Entorno.getEntorno().toString().toLowerCase());<br /> }<br /><br /> @Override<br /> public void contextDestroyed(ServletContextEvent sce) {<br />  logger.info(&quot;Finalizando aplicaci&oacute;n...&quot;);<br /> }<br /><br />    /**<br />     * A&ntilde;ade en un Map los nodos de &aacute;rbol JNDI configurados en el servidor.<br />     */<br /> private void buildEnv(Context c, String name, Map env) throws NamingException {<br />  NamingEnumeration ne = c.list(name);<br />  while (ne.hasMoreElements()) {<br />   NameClassPair n = (NameClassPair) ne.next();<br />   String x = name + &quot;/&quot; + n.getName();<br />   Object o = c.lookup(x);<br />   env.put(x, o);<br />   if (o instanceof Context) {<br />    buildEnv(c, x, env);<br />   }<br />  }<br /> }<br /><br /> /**<br />  * Devuelve un enum del servidor sobre el que se est&aacute; ejecutando la aplicaci&oacute;n.<br />     */<br /> private static Servidor getServidor(ServletContext sc) {<br />  String si = sc.getServerInfo();<br /><br />  if (si.contains(Constantes.SERVIDOR_TOMCAT)) {<br />   return Servidor.TOMCAT;<br />  } else if (si.contains(Constantes.SERVIDOR_JBOSS)) {<br />   return Servidor.JBOSS;<br />  } else {<br />   return Servidor.DESCONOCIDO;<br />  }<br /> }<br />}</pre>
</div>
<br />Esto ser&iacute;a un ejemplo de salida de esta clase ContextListener:
<br />
<br />
<div>
 <pre>2012-05-04 21:03:33,031 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener <br />2012-05-04 21:03:33,037 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener --- -.-. . -. ... ..- .-. .- -.. --- -.-. . -. ... ..- .-. .- -.. --- -.-. . -. ... ..- .-. .- -.. ---<br />2012-05-04 21:03:33,038 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener --- -.-. . -. ... ..- .-. .- -.. --- -.-. . -. ... ..- .-. .- -.. --- -.-. . -. ... ..- .-. .- -.. ---<br />2012-05-04 21:03:33,038 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener --- -.-. . -. ... ..- .-. .- -.. --- -.-. . -. ... ..- .-. .- -.. --- -.-. . -. ... ..- .-. .- -.. ---<br />2012-05-04 21:03:33,038 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener Iniciando aplicaci&oacute;n web [TapestryCensurado]...<br />2012-05-04 21:03:33,038 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener Propiedades del sistema:<br />2012-05-04 21:03:33,038 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.runtime.name: OpenJDK Runtime Environment<br />2012-05-04 21:03:33,038 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener sun.boot.library.path: /usr/lib/jvm/java-6-openjdk/jre/lib/amd64<br />2012-05-04 21:03:33,038 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.vm.version: 20.0-b12<br />2012-05-04 21:03:33,038 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener shared.loader: <br />2012-05-04 21:03:33,038 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.vm.vendor: Sun Microsystems Inc.<br />2012-05-04 21:03:33,038 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.vendor.url: http://java.sun.com/<br />2012-05-04 21:03:33,038 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener path.separator: :<br />2012-05-04 21:03:33,038 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener tomcat.util.buf.StringCache.byte.enabled: true<br />2012-05-04 21:03:33,038 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.util.logging.config.file: /home/picodotdev/archivos/apache-tomcat-7.0.27/conf/logging.properties<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.vm.name: OpenJDK 64-Bit Server VM<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener file.encoding.pkg: sun.io<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener sun.java.launcher: SUN_STANDARD<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener user.country: ES<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener sun.os.patch.level: unknown<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.vm.specification.name: Java Virtual Machine Specification<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener user.dir: /home/picodotdev/archivos/apache-tomcat-7.0.27/bin<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.runtime.version: 1.6.0_24-b24<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.awt.graphicsenv: sun.awt.X11GraphicsEnvironment<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.endorsed.dirs: /home/picodotdev/archivos/apache-tomcat-7.0.27/endorsed<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener os.arch: amd64<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.io.tmpdir: /home/picodotdev/archivos/apache-tomcat-7.0.27/temp<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener line.separator: <br /><br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.vm.specification.vendor: Sun Microsystems Inc.<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.naming.factory.url.pkgs: org.apache.naming<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.util.logging.manager: org.apache.juli.ClassLoaderLogManager<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener os.name: Linux<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener sun.jnu.encoding: UTF-8<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener tomcat.util.scan.DefaultJarScanner.jarsToSkip: bootstrap.jar,commons-daemon.jar,tomcat-juli.jar,annotations-api.jar,el-api.jar,jsp-api.jar,servlet-api.jar,catalina.jar,catalina-ant.jar,catalina-ha.jar,catalina-tribes.jar,jasper.jar,jasper-el.jar,ecj-*.jar,tomcat-api.jar,tomcat-util.jar,tomcat-coyote.jar,tomcat-dbcp.jar,tomcat-i18n-en.jar,tomcat-i18n-es.jar,tomcat-i18n-fr.jar,tomcat-i18n-ja.jar,tomcat-juli-adapters.jar,catalina-jmx-remote.jar,catalina-ws.jar,tomcat-jdbc.jar,commons-beanutils*.jar,commons-codec*.jar,commons-collections*.jar,commons-dbcp*.jar,commons-digester*.jar,commons-fileupload*.jar,commons-httpclient*.jar,commons-io*.jar,commons-lang*.jar,commons-logging*.jar,commons-math*.jar,commons-pool*.jar,jstl.jar,geronimo-spec-jaxrpc*.jar,wsdl4j*.jar,ant.jar,ant-junit*.jar,aspectj*.jar,jmx.jar,h2*.jar,hibernate*.jar,httpclient*.jar,jmx-tools.jar,jta*.jar,log4j*.jar,mail*.jar,slf4j*.jar,xercesImpl.jar,xmlParserAPIs.jar,xml-apis.jar,dnsns.jar,ldapsec.jar,localedata.jar,sunjce_provider.jar,sunmscapi.jar,sunpkcs11.jar,jhall.jar,tools.jar,sunec.jar,zipfs.jar,apple_provider.jar,AppleScriptEngine.jar,CoreAudio.jar,dns_sd.jar,j3daudio.jar,j3dcore.jar,j3dutils.jar,jai_core.jar,jai_codec.jar,mlibwrapper_jai.jar,MRJToolkit.jar,vecmath.jar,junit.jar,junit-*.jar,ant-launcher.jar<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.library.path: /usr/lib/jvm/java-6-openjdk/jre/lib/amd64/server:/usr/lib/jvm/java-6-openjdk/jre/lib/amd64:/usr/lib/jvm/java-6-openjdk/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib<br />2012-05-04 21:03:33,039 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.specification.name: Java Platform API Specification<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.class.version: 50.0<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener sun.management.compiler: HotSpot 64-Bit Tiered Compilers<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener os.version: 3.3.4-2-ARCH<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener user.home: /home/picodotdev<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener catalina.useNaming: true<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener user.timezone: Europe/Madrid<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.awt.printerjob: sun.print.PSPrinterJob<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener file.encoding: UTF-8<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.specification.version: 1.6<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener catalina.home: /home/picodotdev/archivos/apache-tomcat-7.0.27<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.class.path: /home/picodotdev/archivos/apache-tomcat-7.0.27/bin/bootstrap.jar:/home/picodotdev/archivos/apache-tomcat-7.0.27/bin/tomcat-juli.jar<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener user.name: picodotdev<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.naming.factory.initial: org.apache.naming.java.javaURLContextFactory<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener package.definition: sun.,java.,org.apache.catalina.,org.apache.coyote.,org.apache.tomcat.,org.apache.jasper.<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.vm.specification.version: 1.0<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener sun.java.command: org.apache.catalina.startup.Bootstrap start<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.home: /usr/lib/jvm/java-6-openjdk/jre<br />2012-05-04 21:03:33,040 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener sun.arch.data.model: 64<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener user.language: es<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.specification.vendor: Sun Microsystems Inc.<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.vm.info: mixed mode<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.version: 1.6.0_24<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.ext.dirs: /usr/lib/jvm/java-6-openjdk/jre/lib/ext:/usr/java/packages/lib/ext<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener sun.boot.class.path: /usr/lib/jvm/java-6-openjdk/jre/lib/resources.jar:/usr/lib/jvm/java-6-openjdk/jre/lib/rt.jar:/usr/lib/jvm/java-6-openjdk/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-6-openjdk/jre/lib/jsse.jar:/usr/lib/jvm/java-6-openjdk/jre/lib/jce.jar:/usr/lib/jvm/java-6-openjdk/jre/lib/charsets.jar:/usr/lib/jvm/java-6-openjdk/jre/lib/netx.jar:/usr/lib/jvm/java-6-openjdk/jre/lib/plugin.jar:/usr/lib/jvm/java-6-openjdk/jre/lib/rhino.jar:/usr/lib/jvm/java-6-openjdk/jre/lib/modules/jdk.boot.jar:/usr/lib/jvm/java-6-openjdk/jre/classes<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener server.loader: <br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.vendor: Sun Microsystems Inc.<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener catalina.base: /home/picodotdev/archivos/apache-tomcat-7.0.27<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener file.separator: /<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java.vendor.url.bug: http://java.sun.com/cgi-bin/bugreport.cgi<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener common.loader: ${catalina.base}/lib,${catalina.base}/lib/*.jar,${catalina.home}/lib,${catalina.home}/lib/*.jar<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener sun.io.unicode.encoding: UnicodeLittle<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener sun.cpu.endian: little<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener package.access: sun.,org.apache.catalina.,org.apache.coyote.,org.apache.tomcat.,org.apache.jasper.<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener sun.desktop: gnome<br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener sun.cpu.isalist: <br />2012-05-04 21:03:33,041 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener Propiedades del entorno:<br />2012-05-04 21:03:33,042 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener Server info: Apache Tomcat/7.0.27<br />2012-05-04 21:03:33,042 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener Java Servlet API version: 3.0<br />2012-05-04 21:03:33,107 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener Propiedades de entorno para la aplicacion web:<br />2012-05-04 21:03:33,107 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java:/comp/env/com: org.apache.naming.NamingContext@49b9ef36<br />2012-05-04 21:03:33,108 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java:/comp/env/com/censurado: org.apache.naming.NamingContext@4e07e80a<br />2012-05-04 21:03:33,108 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java:/comp/env/com/censurado/mail: org.apache.naming.NamingContext@6913108b<br />2012-05-04 21:03:33,108 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java:/comp/env/com/censurado/mail/censurado: javax.mail.Session@62a34b91<br />2012-05-04 21:03:33,108 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java:/comp/env/com/censurado/jdbc: org.apache.naming.NamingContext@4eb64f2e<br />2012-05-04 21:03:33,108 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener java:/comp/env/com/censurado/jdbc/censurado: org.apache.tomcat.dbcp.dbcp.BasicDataSource@23087d61<br />2012-05-04 21:03:33,108 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener Propiedades din&aacute;micas:<br />2012-05-04 21:03:33,108 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener dinamica.servidor: TOMCAT<br />2012-05-04 21:03:33,108 INFO                                        es.com.blogspot.elblogdepicodev.misc.ContextListener Iniciando aplicacion con la configuracion del entorno de &laquo;desarrollo&raquo;</pre>
</div>
<br />La siguiente clase HttpSessionListener es muy b&aacute;sica pero nos puede permitir conocer si en alg&uacute;n momento se est&aacute;n creando muchas sesiones de usuario y podr&iacute;amos acceder a m&aacute;s informaci&oacute;n a travles de la interfaz 
<a href="http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html">HttpSession</a> que podemos obtener del objeto 
<a href="http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionEvent.html">HttpSessionEvent</a> que recibimos en el listener.
<br />
<br />
<div>
 <pre>package es.com.blogspot.elblogdepicodev.misc;<br /><br />import javax.servlet.http.HttpSessionEvent;<br />import javax.servlet.http.HttpSessionListener;<br /><br />import org.slf4j.Logger;<br />import org.slf4j.LoggerFactory;<br /><br />/**<br /> * Clase que recibe los eventos de creaci&oacute;n y destrucci&oacute;n de las sesiones de los<br /> * usuarios.<br /> */<br />public class SessionListener implements HttpSessionListener {<br /><br /> private static Logger logger = LoggerFactory.getLogger(SessionListener.class);<br /><br /> @Override<br /> public void sessionCreated(HttpSessionEvent se) {<br />  logger.info(&quot;Sesion creada&quot;);<br /> }<br /><br /> @Override<br /> public void sessionDestroyed(HttpSessionEvent se) {<br />  logger.info(&quot;Sesion destruida&quot;);<br /> }<br />}</pre>
</div>
<br />Referencia:
<br />[1] 
<a href="http://elblogdepicodev.blogspot.com.es/2012/04/librerias-de-logging-para-java-slf4j.html">Librer&iacute;as de logging para Java (slf4j, log4j, java.util.logging, logback, MentaLog)-slf4j.html</a>
<br />
<a href="http://elblogdepicodev.blogspot.com.es/2011/10/configuracion-de-entorno-en-java-con.html">Configuraci&oacute;n de entorno en Java con ayuda de Groovy</a></span></div><section><a id="share"></a><h1>Compartir</h1><div class="share-this"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2012/07/obtener-informacion-del-entorno-de-una-aplicacion-web-en-java" st_via="blogstack" st_title="Obtener información del entorno de una aplicación web en Java | El blog de pico.dev"></span><span displayText="Facebook" class="st_facebook_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2012/07/obtener-informacion-del-entorno-de-una-aplicacion-web-en-java" st_title="Obtener información del entorno de una aplicación web en Java | El blog de pico.dev"></span><span displayText="Google +" class="st_googleplus_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2012/07/obtener-informacion-del-entorno-de-una-aplicacion-web-en-java" st_title="Obtener información del entorno de una aplicación web en Java | El blog de pico.dev"></span><span displayText="LinkedIn" class="st_linkedin_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2012/07/obtener-informacion-del-entorno-de-una-aplicacion-web-en-java" st_title="Obtener información del entorno de una aplicación web en Java | El blog de pico.dev"></span><span displayText="Meneame" class="st_meneame_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2012/07/obtener-informacion-del-entorno-de-una-aplicacion-web-en-java" st_title="Obtener información del entorno de una aplicación web en Java | El blog de pico.dev"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div id="widget"></div></section><section><a id="comments"></a><h1>Comentar</h1><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = "elblogdepicodev";
var disqus_title = "Obtener información del entorno de una aplicación web en Java";
var disqus_url = "http://elblogdepicodev.blogspot.com/2012/07/obtener-informacion-del-entorno-de-una.html";
</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></section><hr/></article></div><aside class="col-xs-12 col-sm-12 col-md-4"><section><h3>Redes sociales</h3><p>¿Te gusta Blog Stack? ¡Compártelo con tus amigos!</p><div class="social-networks"><!-- Facebook --><div data-share="true" data-show-faces="false" data-action="like" data-width="310" data-layout="standard" data-href="http://www.blogstack.info/" class="fb-like"></div><!-- Google+ --><g:plusone size="standard" annotation="inline" href="http://www.blogstack.info/" width="310"></g:plusone></div></section><section><h3>¡Suscríbete!</h3><ul class="list-unstyled"><li><a href="/label/planeta-codigo/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta planeta-codigo</a></li><li><a href="/label/programacion/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta programacion</a></li><li><a href="/label/java/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta java</a></li></ul></section><div id="bigRectangle"></div><section id="lastPosts"></section><div class="row"><div class="col-xs-3 col-md-2"><div id="wideSkycraper"></div></div></div><section id="lastPosts_0"></section></aside></div></div><footer><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="footer"><a href="/">Blog Stack</a> por <a href="https://twitter.com/picodotdev/">pico.dev</a> está publicado bajo la licencia de software libre <a href="http://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public</a>.<br/>
El contenido agregado conserva la licencia de su bitácora.<br/>
«Powered by» <a href="https://github.com/picodotdev/blogstack">Blog Stack</a>, <a href="http://tapestry.apache.org/">Apache Tapestry</a>, <a href="https://www.openshift.com/">OpenShift</a>, <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://www.oracle.com/es/technologies/java/overview/index.html">Java</a> y más software libre o de código abierto, inspirado en <a href="http://octopress.org/">Octopress</a>.<br/><span class="copyleft">©</span> pico.dev 2014
</div></div></div></div></footer><div id="fb-root"></div><script type="text/javascript">var require = {
  "waitSeconds" : 300,
  "shim" : {
    "t5/core/typeahead" : [
      "jquery"
    ],
    "bootstrap/affix" : [
      "bootstrap/transition"
    ],
    "bootstrap/alert" : [
      "bootstrap/transition"
    ],
    "bootstrap/modal" : [
      "bootstrap/transition"
    ],
    "bootstrap/tab" : [
      "bootstrap/transition"
    ],
    "bootstrap/transition" : [
      "jquery"
    ],
    "bootstrap/button" : [
      "bootstrap/transition"
    ],
    "bootstrap/scrollspy" : [
      "bootstrap/transition"
    ],
    "bootstrap/collapse" : [
      "bootstrap/transition"
    ],
    "bootstrap/dropdown" : [
      "bootstrap/transition"
    ],
    "bootstrap/tooltip" : [
      "bootstrap/transition"
    ],
    "bootstrap/carousel" : [
      "bootstrap/transition"
    ],
    "bootstrap/popover" : [
      "bootstrap/tooltip"
    ]
  },
  "baseUrl" : "/modules"
};
</script><script src="/assets/tapestry5/require.js" type="text/javascript"></script><script src="/assets/tapestry5/underscore-1.5.2.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/scriptaculous.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/effects.js" type="text/javascript"></script><script src="/assets/tapestry5/t53-compatibility.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery-noconflict.js" type="text/javascript"></script><script type="text/javascript">require(["t5/core/pageinit"], function(pi) { pi([], [
  "app/analytics",
  [
    "app/karmacracy:init",
    {
      "selector" : "#widget",
      "id" : 94,
      "url" : "http://www.blogstack.info/post/elblogdepicodev/2012/07/obtener-informacion-del-entorno-de-una-aplicacion-web-en-java"
    }
  ],
  "app/disqus",
  "app/facebook",
  "app/googleplus",
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts",
      "source" : "elblogdepicodev",
      "name" : "El blog de pico.dev"
    }
  ],
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts_0",
      "source" : "blogstack",
      "name" : "Blog Stack"
    }
  ],
  [
    "app/adsensem:init",
    {
      "blogstack" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlotHorizontalSkycraper" : "1397019380",
        "adSlotBigRectangle" : "2873752587",
        "adSlotWideSkycraper" : "1896546988"
      },
      "ad" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlotHorizontalSkycraper" : "1397019380",
        "adSlotBigRectangle" : "2873752587",
        "adSlotWideSkycraper" : "1896546988"
      }
    }
  ]
]); });</script></body></html>