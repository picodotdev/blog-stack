<!DOCTYPE html><html data-debug-enabled="true" data-locale="es_ES" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="Apache Tapestry Framework (version 5.4-beta-3)" name="generator"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta pagina="Post"/><title>JodaTime y como integrarlo con Hibernate | El blog de pico.dev</title><!-- Resources --><link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/><link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link title="Portada" type="application/atom+xml" rel="alternate" href="/atom.xml"/><link type="image/png" rel="icon" href="/assets/images/favicon.png"/><meta content="Post" name="tapestry-page-name"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/bootstrap/css/bootstrap.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/exception-frame.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry-console.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tree.css"/><link type="text/css" rel="stylesheet" href="/assets/css/core.less"/></head><body data-page-initialized="false"><header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><h1><a class="blogstack" href="/"><span class="glyphicon glyphicon-th"></span> Blog <span class="stack">Stack</span></a></h1></div><div class="col-xs-12 col-sm-12 col-md-8" id="horizontalSkycraper"></div><div class="col-xs-12 col-sm-12 col-md-12"><h4>Un poco más que un agregador/planeta de bitácoras sobre programación, desarrollo, software libre, gnu/linux, tecnología, ...</h4></div></div></div></header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><nav role="navigation"><ul class="nav nav-pills menu"><li><a href="/">Inicio</a></li><li><a href="/faq">Preguntas frecuentes</a></li></ul></nav></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8 content"><article><header><h2><a href="/post/elblogdepicodev/2012/08/jodatime-y-como-integrarlo-con-hibernate">JodaTime y como integrarlo con Hibernate</a></h2></header><section class="post-data"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div><span>Bitácora <a href="http://elblogdepicodev.blogspot.com.es/">El blog de pico.dev</a></span>, <span>Autor pico.dev</span>, <span><a href="http://elblogdepicodev.blogspot.com/2012/08/jodatime-y-como-integrarlo-con-hibernate.html">Entrada original</a></span></div><div><span>Publicado el viernes, 03 de agosto de 2012 a las 15:36 UTC</span></div><div><span>Actualizado el viernes, 03 de agosto de 2012 a las 17:58 UTC</span></div><div><span>
Etiquetado como
<a href="/label/planeta-codigo">planeta-codigo</a>
,
<a href="/label/programacion">programacion</a>
,
<a href="/label/java">java</a></span></div></div></div></section><div class="text-justify post-content"><div class="share-this only-twitter"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2012/08/jodatime-y-como-integrarlo-con-hibernate" st_via="blogstack" st_title="JodaTime y como integrarlo con Hibernate | El blog de pico.dev"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;">
 <img alt="Java" height="200" src="http://2.bp.blogspot.com/-hC2-QuC33AU/TBeztET3lAI/AAAAAAAAAZ8/EzZnNZw5do0/s200/java.png" title="Java" width="107" />
</div>Las clases proporcionadas en la API de Java para trabajar con fechas tienen varios defectos. 
<a href="http://joda-time.sourceforge.net/">JodaTime</a> es una librer&iacute;a alternativa a las clases del JDK que trata de arreglarlos o no tenerlos, sus caracter&iacute;sticas son las siguientes: 
<br />
<ul>
 <div style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;">
  <img alt="Hibernate" src="http://4.bp.blogspot.com/-NW8tZ9bOLc0/Tr1-LwGV1KI/AAAAAAAAA_E/Ix83vOC01Nk/s1600/hibernate.png" title="Hibernate" />
 </div>
 <li>F&aacute;cil de usar: dispone de m&eacute;todos para acceder de forma sencilla al a&ntilde;o o al d&iacute;a del a&ntilde;o entre otros.</li>
 <li>M&aacute;s f&aacute;cil de exterder: se le pueden a&ntilde;adir nuevos calendarios de forma m&aacute;s sencilla que la necesaria en la API de Java.</li>
 <li>Conjunto de caracter&iacute;sticas completo: proporciona mayor funcionalidad para el c&aacute;lculo de fechas.</li>
 <li>Interoperabilidad sencilla: es f&aacute;cil de realizar conversiones entre el JDK y JodaTime.</li>
 <li>Mejor rendimiento: solo realiza las operaciones minimas necesarias.</li>
 <li>Documentaci&oacute;n completa: tiene una <a href="http://joda-time.sourceforge.net/userguide.html">gu&iacute;a de usuario</a> y una <a href="http://joda-time.sourceforge.net/api-release/index.html">API en javadoc</a></li>
 <li>Madurez: est&aacute; ampliamente probada desde su inicio de desarrollo en el 2002.</li>
 <li>C&oacute;digo abierto: tiene una <a href="http://joda-time.sourceforge.net/license.html">licencia Apache</a>.</li>
</ul>Aparte de estas caracter&iacute;sticas una de las m&aacute;s destacadas es que facilita la automatizaci&oacute;n de casos de pruebas que dependan de fechas ya que podemos establecer que la fecha altual de joda time sea una que est&eacute; en el pasado o en el futuro de forma sencilla (esto es haciendo new JodaTime() en vez de tener la fecha del sistema podemos hacer que la fecha sea la que queramos). Solo por esto ya merece la pena usarla aunque hay 
<a href="https://forums.oracle.com/forums/thread.jspa?threadID=1982257&amp;start=0&amp;tstart=0">otras razones</a>. Adem&aacute;s de poder representar fechas con JodaTime pueden ser representados otros conceptos: 
<br />
<ul>
 <li><a href="http://joda-time.sourceforge.net/key_instant.html">Instante</a>: Representa un instante en el tiempo medido en milisegundos transcurridos desde el 1970-01-01T00:00Z.</li>
 <li><a href="http://joda-time.sourceforge.net/key_partial.html">Parcial</a>: Un parcial no contiene contiene todos los campos pero a&ntilde;adiendoselos se puede obtener un instante (parcial + campos faltantes + zona horaria = instante).</li>
 <li><a href="http://joda-time.sourceforge.net/key_interval.html">Intervalo</a>: Representa el periodo de tiempo de un instante a otro instante.</li>
 <li><a href="http://joda-time.sourceforge.net/key_duration.html">Duracion</a>: Representa una duraci&oacute;n de tiempo medido en milisegundos, instante + duracion = instante.</li>
 <li><a href="http://joda-time.sourceforge.net/key_period.html">Periodo</a>: Representa un perido de tiempo medido en terminos de campos como a&ntilde;os, meses, d&iacute;as u horas. Un periodo de tiempo puede ser inexacto en t&eacute;rminos de tiempo ya que tiene en cuenta cosas como los a&ntilde;os bisiestos o los cambios de hora.</li>
</ul>Adem&aacute;s puede se integrada perfectamente con Hibernate de tal forma que en nuestras entidades de dominio podamos tener por ejemplo propiedades del tipo 
<a href="http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html">DateTime</a> 
<a href="http://joda-time.sourceforge.net/contrib/hibernate/userguide.html">entre otras</a>, evintandonos conversiones entre nuestro modelo y la representaci&oacute;n con la que realizamos los c&aacute;lculos y operaciones. Lo primero que deberemos hacer para tener esta integraci&oacute;n entre Hibernate y JodaTime es incluir la propia librer&iacute;a de JodaTime y el soporte para Hibernate como dependencias a nuestro proyecto. Son las siguientes: 
<br />
<ul>
 <li>joda-time:joda-time:2.1</li>
 <li>joda-time:joda-time-hibernate:1.3</li>
</ul>La librer&iacute;a joda-time-hibernate proporciona soporte para la versi&oacute;n 3.6 de hibernate, si usamos hibernate 4 deberemos usar usertype: 
<br />
<ul>
 <li>org.jadira.usertype:usertype.parent:3.0.0.CR1</li>
</ul>Ya usemos hibernate 3.6 o hibernate 4 y una u otra librer&iacute;a su uso es muy similar en ambas y se hace a trav&eacute;s de anotaciones, aunque tambien se puede hacer a traves de los ficheros de mapeo de hibernate, las anotaciones son m&aacute;s recomendables y son de la siguiente forma: 
<br />
<br />
<div>
 <pre>...<br />import org.joda.time.DateTime;<br />...<br />@Type(type = &quot;org.joda.time.contrib.hibernate.PersistentDateTime&quot;)<br />private DateTime fecha;<br />...</pre>
</div>
<br />No hay m&aacute;s que usar la anotaci&oacute;n @Type, es as&iacute; de sencillo y una migraci&oacute;n de los Date del JDK a DateTime de JodaTime no de deber&iacute;a ser muy complicada con la ayuda de un buen editor.
<br />
<br />Si queremos establecer la fecha actual en el pasado o en el futuro podemos hacer uso del m&eacute;todo de utilidad 
<a href="http://joda-time.sourceforge.net/api-release/org/joda/time/DateTimeUtils.html#setCurrentMillisFixed(long)">DateTimeUtils.setCurrentMillisFixed</a>.
<br />
<br />Referencia:
<br />
<a href="http://joda-time.sourceforge.net/contrib/hibernate/index.html">http://joda-time.sourceforge.net/contrib/hibernate/index.html</a>
<br />
<a href="https://forums.oracle.com/forums/thread.jspa?threadID=1982257&amp;start=0&amp;tstart=0">https://forums.oracle.com/forums/thread.jspa?threadID=1982257&amp;start=0&amp;tstart=0</a>
<br />
<a href="http://joda-time.sourceforge.net/contrib/hibernate/userguide.html">http://joda-time.sourceforge.net/contrib/hibernate/userguide.html</a>
<br />
<a href="http://usertype.sourceforge.net/">http://usertype.sourceforge.net/</a></div><section><h1>Compartir</h1><div class="share-this"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2012/08/jodatime-y-como-integrarlo-con-hibernate" st_via="blogstack" st_title="JodaTime y como integrarlo con Hibernate | El blog de pico.dev"></span><span displayText="Facebook" class="st_facebook_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2012/08/jodatime-y-como-integrarlo-con-hibernate" st_title="JodaTime y como integrarlo con Hibernate | El blog de pico.dev"></span><span displayText="Google +" class="st_googleplus_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2012/08/jodatime-y-como-integrarlo-con-hibernate" st_title="JodaTime y como integrarlo con Hibernate | El blog de pico.dev"></span><span displayText="LinkedIn" class="st_linkedin_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2012/08/jodatime-y-como-integrarlo-con-hibernate" st_title="JodaTime y como integrarlo con Hibernate | El blog de pico.dev"></span><span displayText="Meneame" class="st_meneame_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2012/08/jodatime-y-como-integrarlo-con-hibernate" st_title="JodaTime y como integrarlo con Hibernate | El blog de pico.dev"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div id="widget"></div></section><section><h1>Comentar</h1><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = "elblogdepicodev";
var disqus_title = "JodaTime y como integrarlo con Hibernate";
var disqus_url = "http://elblogdepicodev.blogspot.com/2012/08/jodatime-y-como-integrarlo-con-hibernate.html";
</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></section><hr/></article></div><aside class="col-xs-12 col-sm-12 col-md-4"><section><h3>Redes sociales</h3><p>¿Te gusta Blog Stack? ¡Compártelo con tus amigos!</p><div class="social-networks"><!-- Facebook --><div data-share="true" data-show-faces="false" data-action="like" data-width="310" data-layout="standard" data-href="http://www.blogstack.info/" class="fb-like"></div><!-- Google+ --><g:plusone size="standard" annotation="inline" href="http://www.blogstack.info/" width="310"></g:plusone></div></section><section><h3>¡Suscríbete!</h3><ul class="list-unstyled"><li><a href="/label/planeta-codigo/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta planeta-codigo</a></li><li><a href="/label/programacion/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta programacion</a></li><li><a href="/label/java/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta java</a></li></ul></section><div id="bigRectangle"></div><section id="lastPosts"></section><div class="row"><div class="col-xs-3 col-md-2"><div id="wideSkycraper"></div></div></div><section id="lastPosts_0"></section></aside></div></div><footer><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="footer"><a href="/">Blog Stack</a> por <a href="https://twitter.com/picodotdev/">pico.dev</a> está publicado bajo la licencia <a href="http://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public</a>.<br/>
El contenido agregado conserva la licencia de su bitácora.<br/>
«Powered by» <a href="https://github.com/picodotdev/blogstack">Blog Stack</a>, <a href="http://tapestry.apache.org/">Apache Tapestry</a>, <a href="https://www.openshift.com/">OpenShift</a>, <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://www.oracle.com/es/technologies/java/overview/index.html">Java</a> y más software libre o de código abierto, inspirado en <a href="http://octopress.org/">Octopress</a>.<br/><span class="copyleft">©</span> pico.dev 2014
</div></div></div></div></footer><div id="fb-root"></div><script type="text/javascript">var require = {
  "waitSeconds" : 300,
  "shim" : {
    "t5/core/typeahead" : [
      "jquery"
    ],
    "bootstrap/affix" : [
      "bootstrap/transition"
    ],
    "bootstrap/alert" : [
      "bootstrap/transition"
    ],
    "bootstrap/modal" : [
      "bootstrap/transition"
    ],
    "bootstrap/tab" : [
      "bootstrap/transition"
    ],
    "bootstrap/transition" : [
      "jquery"
    ],
    "bootstrap/button" : [
      "bootstrap/transition"
    ],
    "bootstrap/scrollspy" : [
      "bootstrap/transition"
    ],
    "bootstrap/collapse" : [
      "bootstrap/transition"
    ],
    "bootstrap/dropdown" : [
      "bootstrap/transition"
    ],
    "bootstrap/tooltip" : [
      "bootstrap/transition"
    ],
    "bootstrap/carousel" : [
      "bootstrap/transition"
    ],
    "bootstrap/popover" : [
      "bootstrap/tooltip"
    ]
  },
  "baseUrl" : "/modules"
};
</script><script src="/assets/tapestry5/require.js" type="text/javascript"></script><script src="/assets/tapestry5/underscore-1.5.2.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/scriptaculous.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/effects.js" type="text/javascript"></script><script src="/assets/tapestry5/t53-compatibility.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery-noconflict.js" type="text/javascript"></script><script type="text/javascript">require(["t5/core/pageinit"], function(pi) { pi([], [
  "app/analytics",
  [
    "app/karmacracy:init",
    {
      "selector" : "#widget",
      "id" : 93,
      "url" : "http://www.blogstack.info/post/elblogdepicodev/2012/08/jodatime-y-como-integrarlo-con-hibernate"
    }
  ],
  "app/disqus",
  "app/facebook",
  "app/googleplus",
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts",
      "source" : "elblogdepicodev",
      "name" : "El blog de pico.dev"
    }
  ],
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts_0",
      "source" : "blogstack",
      "name" : "Blog Stack"
    }
  ],
  [
    "app/adsensem:init",
    {
      "blogstack" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlotHorizontalSkycraper" : "1397019380",
        "adSlotBigRectangle" : "2873752587",
        "adSlotWideSkycraper" : "1896546988"
      }
    }
  ]
]); });</script></body></html>