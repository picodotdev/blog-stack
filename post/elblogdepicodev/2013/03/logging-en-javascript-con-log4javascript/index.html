<!DOCTYPE html><html data-debug-enabled="true" data-locale="es_ES" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="Apache Tapestry Framework (version 5.4-beta-16)" name="generator"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta pagina="Post"/><title>Logging en Javascript con log4javascript | El blog de pico.dev</title><!-- Resources --><link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/><link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link title="Portada" type="application/atom+xml" rel="alternate" href="/feed.atom.xml"/><link type="image/png" rel="icon" href="/assets/images/favicon.png"/><meta content="Post" name="tapestry-page-name"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/bootstrap/css/bootstrap.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/exception-frame.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry-console.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tree.css"/><link type="text/css" rel="stylesheet" href="/assets/css/core.css"/></head><body data-page-initialized="false"><script type="text/javascript">document.write("<div class=\"pageloading-mask\"><div></div></div>");</script><header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><h1><a class="blogstack" href="/"><span class="glyphicon glyphicon-th"></span> Blog <span class="stack">Stack</span></a></h1></div><div class="col-xs-12 col-sm-12 col-md-8"><nav role="navigation"><ul class="list-unstyled list-inline"><li><a href="/">Inicio</a></li><li><a href="/archive">Archivo</a></li><li><a href="/faq">Preguntas frecuentes</a></li><li><a href="/faq#aggregate">¿Quieres agregar tu bitácora?</a></li></ul></nav></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><h4>Un poco más que un agregador/planeta de bitácoras sobre programación, desarrollo, software libre, gnu/linux, tecnología, ...</h4></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="imagen-cabecera"><div class="imagen"><div class="col-xs-12 col-sm-12 col-md-12" id="billboard"></div></div></div></div></div></div></header><div class="container-fluid content"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8 content"><article itemtype="http://schema.org/BlogPosting" itemscope=""><a id="content"></a><header><h2><a href="/post/elblogdepicodev/2013/03/logging-en-javascript-con-log4javascript"><span itemprop="headline">Logging en Javascript con log4javascript</span></a></h2></header><div class="row labels"><div class="col-md-12"><a class="label" href="/label/programacion"><img title="programacion" alt="programacion" src="/assets/images/labels/programacion.png"/></a><a class="label" href="/label/javascript"><img title="javascript" alt="javascript" src="/assets/images/labels/javascript.png"/></a></div></div><section class="post-data"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div><span>Escrito por <span itemprop="author">pico.dev</span> en la bitácora <a href="http://elblogdepicodev.blogspot.com.es/">El blog de pico.dev</a>, <a href="http://elblogdepicodev.blogspot.com/2013/03/logging-en-javascript-con-log4javascript.html"><span itemprop="sameAs">artículo original</span></a></span></div><div><span datetime="2013-03-28T11:38" itemprop="datePublished">Publicado el jueves, 28 de marzo de 2013 a las 11:38 UTC</span></div><div><span datetime="2013-05-03T19:29" itemprop="dateModified">Actualizado el viernes, 03 de mayo de 2013 a las 19:29 UTC</span></div><div><span>
Etiquetado como
planeta-codigo, <a href="/label/programacion"><span itemprop="articleSection">programacion</span></a>, <a href="/label/javascript"><span itemprop="articleSection">javascript</span></a></span></div></div></div></section><div class="text-justify post-content"><div class="share-this only-twitter"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2013/03/logging-en-javascript-con-log4javascript" st_title="Logging en Javascript con log4javascript | El blog de pico.dev"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><span itemprop="name"><div style="clear: both; text-align: center;"></div>
<div style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;">
 <img alt="log4javascript" src="http://1.bp.blogspot.com/-lHJfQZVRCUg/UVQmPlNDywI/AAAAAAAACdQ/vqyWfQ-UWfA/s1600/log4javascript.png" title="log4javascript" />
</div>En esta serie de art&iacute;culos que estoy escribiendo sobre varias librer&iacute;as y herramientas relacionadas con el lenguaje de programaci&oacute;n Javascript como 
<a href="http://elblogdepicodev.blogspot.com.es/2013/03/introduccion-y-ejemplo-de-requirejs.html">RequireJS</a>, 
<a href="http://elblogdepicodev.blogspot.com.es/2013/03/introduccion-y-ejemplo-de-mustache.html">Mustache</a> y Backbone en esta ocasi&oacute;n voy a hablar de una librer&iacute;a de logging para javascript que tambi&eacute;n puede hacernos la vida m&aacute;s sencilla como programadores.
<br />
<br />Sistemas de trazas hay muchos para Java y otros muchos lenguajes pero en el entorno de las aplicaciones web estos suelen usarse en la parte del servidor de las aplicaciones. Sin embargo, en el cliente tambi&eacute;n puede producirse errores y nos puede interesar tener informaci&oacute;n para averiguar la causa de forma que podamos solucionarlos m&aacute;s r&aacute;pidamente o simplemente para tener un registro de lo que se ha ido haciendo en este caso en el cliente. Una librer&iacute;a de logging en el cliente tambi&eacute;n nos puede servir para tener informaci&oacute;n de errores en el navegador que de otra forma nos pasar&iacute;an desapercibidos si solo tenemos trazas en el servidor, con la librer&iacute;a de trazas que explicar&eacute; en esta entrada podemos enviar las trazas de error al servidor de forma muy sencilla. Adem&aacute;s, nos puede servir de utilidad en el momento de desarrollo del c&oacute;digo javascript.
<br />
<br />Por los motivos anteriores aunque no lo consideremos imprescindible nos puede resultar muy interesante la librer&iacute;a 
<a href="http://log4javascript.org/">log4javascript</a>. Los conceptos que emplea son muy parecidos a 
<a href="http://logging.apache.org/log4j/1.2/">log4j</a> con lo que si programamos en java aprenderemos f&aacute;cil y r&aacute;pidamente a usarla, en cualquier otro caso no nos llevar&aacute; mucho tiempo aprender.
<br />
<br />Lo primero que deberemos hacer es descargarla y una vez descomprimido el paquete incluirla en el c&oacute;digo html de nuestra p&aacute;gina con, haciendo uso de RequireJS:
<br />
<br />
<script src="https://gist.github.com/picodotdev/5262408.js?file=Log4javascript.html"></script>
<noscript>
 <a href="https://gist.github.com/picodotdev/5262408/raw/Log4javascript.html">Log4javascript.html</a>
 <br />
</noscript> Posteriormente deberemos usarla definiendo los appenders que determinar&aacute;n a donde se env&iacute;an las trazas, a los appenders les asociaremos un layout que determinar&aacute; el formato de la traza y el nivel m&iacute;nimo que ha de tener la traza (&laquo;threshold&raquo;) para ser emitido. log4javascript proporciona varios appenders seg&uacute;n nuestras preferencias o necesidades:
<br />
<ul>
 <li><a href="http://log4javascript.org/docs/manual.html#alertappender">AlertAppender</a>: muestra las trazas usando la funci&oacute;n alert del navegador.</li>
 <li><a href="http://log4javascript.org/docs/manual.html#ajaxappender">AjaxAppender</a>: realiza una petici&oacute;n ajax al servidor enviando la traza generada en el navegador, con este appender podremos tener el registro de lo que sucede en los clientes. Se ha de indicar el path de la URL que procesar&aacute; las trazas en el servidor.</li>
 <li><a href="http://log4javascript.org/docs/manual.html#popupappender">PopUpAppender</a>: muestra las trazas en una ventana emergente en la que se pueden filtrar las trazas y en la que cada nivel aparece con un color distinto para reconocerlas m&aacute;s f&aacute;cilmente.</li>
 <li><a href="http://log4javascript.org/docs/manual.html#inpageappender">InPageAppender</a>: muestra la misma consola del PopUpAppender pero de forma incrustada en el pie de la p&aacute;gina.</li>
 <li><a href="http://log4javascript.org/docs/manual.html#browserconsoleappender">BrowserConsoleAppender</a>: muestra los mensajes en la consola de depuraci&oacute;n con los mensajes de javascript que incorporan los navegadores.</li>
</ul>Con el siguiente bloque de c&oacute;digo inicializamos el sistema de trazas, la variable log4j ser&aacute; la que utilicemos para emitir las trazas. En el ejemplo utilizamos el appender PopUpAppender con un layout que nos mostrar&aacute; la hora, el nivel de la traza y el mensaje, el threshold del&nbsp;PopUpAppender&nbsp;es INFO con lo que todo mensaje con nivel menor prioridad como TRACE o DEBUG no aparecer&aacute;n en el appender, para el caso de AjaxAppender el threshold ser&aacute; ERROR de modo que tampoco aparecer&aacute;n en el las trazas INFO y WARN. Al emitir las trazas indicamos el mensaje m&aacute;s adecuado que consideremos m&aacute;s nos pueda ayudar y con el nivel de trazas seg&uacute;n la importancia que tenga el mensaje, este nivel de trazas nos permitir&aacute; filtrarlos seg&uacute;n su nivel en el popup:
<br />
<br />
<script src="https://gist.github.com/picodotdev/5262408.js?file=main.js"></script>
<noscript>
 <a href="https://gist.github.com/picodotdev/5262408/raw/main.js">main.js</a>
 <br />
</noscript> El resultado que obtenemos en la consola emergente es el siguiente, los mensajes de nivel de trace y debug no aparecen por el threshold del appender PopupAppender.
<br />
<br />
<div style="clear: both; text-align: center;"></div>
<div style="clear: both; text-align: center;">
 <a href="http://2.bp.blogspot.com/-GATX44BETck/UVQomj_6oRI/AAAAAAAACdg/TXXDJmMCIKo/s1600/log4javascript-1.png"><img height="136" src="http://2.bp.blogspot.com/-GATX44BETck/UVQomj_6oRI/AAAAAAAACdg/TXXDJmMCIKo/s400/log4javascript-1.png" width="400" /></a>
</div>
<br />Como los ejemplos de RequireJS y Mustache el 
<a href="https://github.com/picodotdev/elblogdepicodev">c&oacute;digo fuente completo</a> lo puedes encontrar en mi repositorio de GitHib.
<br />
<br />Referencia:
<br />
<br />
<a href="http://elblogdepicodev.blogspot.com.es/2013/03/introduccion-y-ejemplo-de-requirejs.html">Introducci&oacute;n y ejemplo de RequireJS</a>
<br />
<a href="http://elblogdepicodev.blogspot.com.es/2013/03/introduccion-y-ejemplo-de-mustache.html">Introducci&oacute;n y ejemplo de Mustache</a>
<br />
<a href="http://elblogdepicodev.blogspot.com.es/2013/04/capturar-errores-de-javascript.html">Capturar errores de Javascript</a>
<br />
<div>
 <a href="http://elblogdepicodev.blogspot.com.es/2013/04/optimizar-modulos-de-requirejs.html">Optimizar m&oacute;dulos de RequireJS y archivos Javascript</a>
 <br />
 <a href="http://elblogdepicodev.blogspot.com/2013/04/introduccion-y-ejemplo-de-backbonejs.html">Introducci&oacute;n y ejemplo de Backbone.js</a>
 <br />
 <a href="http://elblogdepicodev.blogspot.com.es/2013/04/ejemplo-lista-de-tareas-con-backbone.html">Ejemplo lista de tareas con Backbone, RESTEasy y Tapestry</a>
 <br />
 <a href="http://ejemplo%20de%20pruebas%20unitarias%20en%20javascript%20con%20jasmine%20y%20sinon/">Ejemplo de pruebas unitarias en javascript con Jasmine y Sinon</a>
</div></span></div><section><a id="share"></a><h1>Compartir</h1><div class="share-this"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2013/03/logging-en-javascript-con-log4javascript" st_title="Logging en Javascript con log4javascript | El blog de pico.dev"></span><span displayText="Facebook" class="st_facebook_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2013/03/logging-en-javascript-con-log4javascript" st_title="Logging en Javascript con log4javascript | El blog de pico.dev"></span><span displayText="Google +" class="st_googleplus_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2013/03/logging-en-javascript-con-log4javascript" st_title="Logging en Javascript con log4javascript | El blog de pico.dev"></span><span displayText="LinkedIn" class="st_linkedin_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2013/03/logging-en-javascript-con-log4javascript" st_title="Logging en Javascript con log4javascript | El blog de pico.dev"></span><span displayText="Meneame" class="st_meneame_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2013/03/logging-en-javascript-con-log4javascript" st_title="Logging en Javascript con log4javascript | El blog de pico.dev"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div id="widget"></div></section><section><a id="comments"></a><h1>Comentar</h1><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = "elblogdepicodev";
var disqus_title = "Logging en Javascript con log4javascript";
var disqus_url = "http://elblogdepicodev.blogspot.com/2013/03/logging-en-javascript-con-log4javascript.html";
</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></section><hr/></article></div><aside class="col-xs-12 col-sm-12 col-md-4"><section><h3>Redes sociales</h3><p>¿Te gusta Blog Stack? ¡Compártelo con tus amigos!</p><div class="social-networks"><!-- Facebook --><div data-share="true" data-show-faces="false" data-action="like" data-width="310" data-layout="standard" data-href="http://www.blogstack.info/" class="fb-like"></div><!-- Google+ --><g:plusone size="standard" annotation="inline" href="http://www.blogstack.info/" width="310"></g:plusone></div></section><section><h3>¡Suscríbete!</h3><ul class="list-unstyled"><li><a href="/label/programacion/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta programacion</a></li><li><a href="/label/javascript/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta javascript</a></li></ul></section><div id="bigRectangle"></div><section id="lastPosts"></section><div class="row"><div class="col-xs-3 col-md-2"><div id="wideSkycraper"></div></div></div><section id="lastPosts_0"></section></aside></div></div><footer><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="footer"><a href="/">Blog Stack</a> por <a href="https://twitter.com/picodotdev/">pico.dev</a> está publicado bajo la licencia de software libre <a href="http://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public</a>.<br/>
El contenido agregado conserva la licencia de su bitácora.<br/>
«Powered by» <a href="https://github.com/picodotdev/blogstack">Blog Stack</a>, <a href="http://tapestry.apache.org/">Apache Tapestry</a>, <a href="https://www.openshift.com/">OpenShift</a>, <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://www.oracle.com/es/technologies/java/overview/index.html">Java</a> y más software libre o de código abierto, inspirado en <a href="http://octopress.org/">Octopress</a>.<br/><span class="copyleft">©</span> pico.dev 2014
</div></div></div></div></footer><div id="fb-root"></div><script type="text/javascript">var require = {
  "waitSeconds" : 300,
  "shim" : {
    "t5/core/typeahead" : [
      "jquery"
    ],
    "bootstrap/affix" : [
      "bootstrap/transition"
    ],
    "bootstrap/alert" : [
      "bootstrap/transition"
    ],
    "bootstrap/modal" : [
      "bootstrap/transition"
    ],
    "bootstrap/tab" : [
      "bootstrap/transition"
    ],
    "bootstrap/transition" : [
      "jquery"
    ],
    "bootstrap/button" : [
      "bootstrap/transition"
    ],
    "bootstrap/scrollspy" : [
      "bootstrap/transition"
    ],
    "bootstrap/collapse" : [
      "bootstrap/transition"
    ],
    "bootstrap/dropdown" : [
      "bootstrap/transition"
    ],
    "bootstrap/tooltip" : [
      "bootstrap/transition"
    ],
    "bootstrap/carousel" : [
      "bootstrap/transition"
    ],
    "bootstrap/popover" : [
      "bootstrap/tooltip"
    ]
  },
  "baseUrl" : "/modules"
};
</script><script src="/assets/tapestry5/require.js" type="text/javascript"></script><script src="/assets/tapestry5/underscore-1.5.2.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/scriptaculous.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/effects.js" type="text/javascript"></script><script src="/assets/tapestry5/t53-compatibility.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery-noconflict.js" type="text/javascript"></script><script type="text/javascript">require(["t5/core/pageinit"], function(pi) { pi([], [
  "app/analytics",
  [
    "app/karmacracy:init",
    {
      "selector" : "#widget",
      "id" : 59,
      "url" : "http://www.blogstack.info/post/elblogdepicodev/2013/03/logging-en-javascript-con-log4javascript"
    }
  ],
  "app/disqus",
  "app/facebook",
  "app/googleplus",
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts",
      "source" : "elblogdepicodev",
      "name" : "El blog de pico.dev"
    }
  ],
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts_0",
      "source" : "blogstack",
      "name" : "Blog Stack"
    }
  ],
  [
    "app/adsensem:init",
    {
      "blogstack" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlotBillboard" : "1397019380",
        "adSlotHorizontalSkycraper" : "1397019380",
        "adSlotBigRectangle" : "2873752587",
        "adSlotWideSkycraper" : "1896546988"
      },
      "ad" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlotBillboard" : "1397019380",
        "adSlotHorizontalSkycraper" : "1397019380",
        "adSlotBigRectangle" : "2873752587",
        "adSlotWideSkycraper" : "1896546988"
      }
    }
  ]
]); });</script></body></html>