<!DOCTYPE html><html data-debug-enabled="true" data-locale="es_ES" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="Apache Tapestry Framework (version 5.4-beta-16)" name="generator"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta pagina="Post"/><title>Devolver xml, json o html con RESTEasy | El blog de pico.dev</title><!-- Resources --><link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/><link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link title="Portada" type="application/atom+xml" rel="alternate" href="/feed.atom.xml"/><link type="image/png" rel="icon" href="/assets/images/favicon.png"/><meta content="Post" name="tapestry-page-name"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/bootstrap/css/bootstrap.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/exception-frame.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry-console.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tree.css"/><link type="text/css" rel="stylesheet" href="/assets/css/core.css"/></head><body data-page-initialized="false"><script type="text/javascript">document.write("<div class=\"pageloading-mask\"><div></div></div>");</script><header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><h1><a class="blogstack" href="/"><span class="glyphicon glyphicon-th"></span> Blog <span class="stack">Stack</span></a></h1></div><div class="col-xs-12 col-sm-12 col-md-8" id="horizontalSkycraper"></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><h4>Un poco más que un agregador/planeta de bitácoras sobre programación, desarrollo, software libre, gnu/linux, tecnología, ...</h4></div></div></div></header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><nav role="navigation"><ul class="nav nav-pills menu"><li><a href="/">Inicio</a></li><li><a href="/archive">Archivo</a></li><li><a href="/faq">Preguntas frecuentes</a></li></ul></nav></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8 content"><article itemtype="http://schema.org/BlogPosting" itemscope=""><a id="content"></a><header><h2><a href="/post/elblogdepicodev/2013/02/devolver-xml-json-o-html-con-resteasy"><span itemprop="headline">Devolver xml, json o html con RESTEasy</span></a></h2></header><section class="post-data"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div><span>Escrito por <span itemprop="author">pico.dev</span> en la bitácora <a href="http://elblogdepicodev.blogspot.com.es/">El blog de pico.dev</a>, <a href="http://elblogdepicodev.blogspot.com/2013/02/devolver-xml-json-o-html-con-resteasy.html"><span itemprop="sameAs">artículo original</span></a></span></div><div><span datetime="2013-02-22T17:36" itemprop="datePublished">Publicado el viernes, 22 de febrero de 2013 a las 17:36 UTC</span></div><div><span datetime="2013-03-01T22:30" itemprop="dateModified">Actualizado el viernes, 01 de marzo de 2013 a las 22:30 UTC</span></div><div><span>
Etiquetado como
planeta-codigo, <a href="/label/programacion"><span itemprop="articleSection">programacion</span></a>, <a href="/label/software"><span itemprop="articleSection">software</span></a>, <a href="/label/java"><span itemprop="articleSection">java</span></a></span></div></div></div></section><div class="text-justify post-content"><div class="share-this only-twitter"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2013/02/devolver-xml-json-o-html-con-resteasy" st_title="Devolver xml, json o html con RESTEasy | El blog de pico.dev"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><span itemprop="name"><div style="clear: both; text-align: center;"></div>
<div style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;">
 <img alt="RESTEasy" src="http://4.bp.blogspot.com/-KSg4_P3c29c/URWSVgCfoNI/AAAAAAAACUs/4-wR1eFK_JY/s1600/resteasy.png" title="RESTEasy" />
</div>En esta serie de art&iacute;culos sobre los 
<a href="http://es.wikipedia.org/wiki/Representational_State_Transfer">servicios web REST</a> hemos visto hasta el momento como hacer un 
<a href="http://elblogdepicodev.blogspot.com.es/2013/02/ejemplo-sencillo-de-web-service-con-resteasy.html">programa sencillo Hola Mundo con RESTEasy</a> y 
<a href="http://elblogdepicodev.blogspot.com.es/2013/02/cliente-javascript-y-java-de-servicio-web-resteasy.html">como crear un cliente Java y Javascript de ese servicio web</a> para consumirlo desde javascript en una aplicaci&oacute;n web y desde un programa java usando la librer&iacute;a 
<a href="http://www.jboss.org/resteasy/">RESTEasy</a>. En un servicio web REST podemos devolver datos en varios formatos, ya sea texto plano, html, json o xml, en esta entrada veremos como devolver datos en los dos &uacute;ltimos y que anotaciones usar para que las cabeceras devueltas en la petici&oacute;n sean las correctas, que ventajas nos puede aporta y que problemas nos puede resolver.
<br />
<br />Antes unos peque&ntilde;os apuntes de porque nos puede interesar devolver json o xml. Unos de los motivos es que a medida que las aplicaciones web est&aacute;n ganando en complejidad estas est&aacute;n tendiendo a delegar en el cliente la parte de visualizaci&oacute;n en vez de ser el servidor el que devuelva html formateado directamente. Adem&aacute;s de evitar cierta carga de proceso en el servidor y delegarla en los clientes ofreciendo una interfaz REST de la apliccaci&oacute;n permitimos que terceros desarrollen sus propias aplicaciones y se integren consumiendo los servicios que ofrecemos.
<br />
<br />Una vez explicadas algunas ventajas, veamos el ejemplo de como devolver json o xml en el servicio REST, en el siguiente c&oacute;digo el servicio HelloWorldResource devolver&aacute; los datos de un objeto a trav&eacute;s de los m&eacute;todos getMensajeJSON y getMensajeXML. Los m&eacute;todos del servicio puede anotarse con @Produces indicando el formato de los datos que se devuelve, en la clase 
<a href="http://docs.jboss.org/resteasy/docs/2.3.5.Final/javadocs/javax/ws/rs/core/MediaType.html">MediaType</a> hay constantes para muchos formatos. Si el formato en el que devolvemos los datos no est&aacute; definido en la clase MediaType podemos definir uno espec&iacute;fico con @Produces(&quot;text/html&quot;):
<br />
<br />
<script src="https://gist.github.com/picodotdev/5014791.js?file=HelloWorldResource.java"></script>
<noscript>
 <a href="https://gist.github.com/picodotdev/5014791/raw/HelloWorldResource.java">HelloWorldResource.java</a>
 <br />
</noscript> 
<script src="https://gist.github.com/picodotdev/5014791.js?file=HelloWorldResourceImpl.java"></script>
<noscript>
 <a href="https://gist.github.com/picodotdev/5014791/raw/HelloWorldResourceImpl.java">HelloWorldResourceImpl.java</a>
 <br />
</noscript> La anotaci&oacute;n @Produces es muy importante en el servicio REST ya que los m&eacute;todos getMensajeJSON y getMensajeXML tienen especificada la misma ruta de petici&oacute;n en la etiqueta @Path, &iquest;como sabe entonces el servicio REST en que formato se han devolver los datos si la URL solicitada es la misma para ambos casos? La respuesta es empleando la informaci&oacute;n enviada en las cabeceras del protocolo http, m&aacute;s concretamente empleando la cabecera Accept que en este protocolo indica en que formato quiere el cliente los datos. En muchas aplicaciones es habitual encontrarse en que se realizan peticiones al servidor especificando como Accept text/html y resulta que el servidor devuelve los datos en formato json, xml u otro, la aplicaci&oacute;n funcionar&aacute; bien pero lo hace empleando el protocolo http de forma incorrecta, esto no ocurre con los servicios REST que en funci&oacute;n de lo que se solicita en la petici&oacute;n as&iacute; es el formato de los datos devueltos. En la siguiente imagen pude verse la cabecera Accept de la petici&oacute;n enviada por el cliente javascript.
<br />
<br />
<div style="clear: both; text-align: center;">
 <a href="http://1.bp.blogspot.com/-YIctwFeTat0/USlEU72EuyI/AAAAAAAACZI/8FLBG04qHTg/s1600/resteasy-cabeceras.png"><img height="98" src="http://1.bp.blogspot.com/-YIctwFeTat0/USlEU72EuyI/AAAAAAAACZI/8FLBG04qHTg/s320/resteasy-cabeceras.png" width="320" /></a>
</div>
<br />En el ejemplo se devuelve una clase POJO con varios atributos que usa las anotaciones @XmlRootElement, @XmlElement, @XmlAttribute para indicar los datos y la forma de los datos a generar como resultado:
<br />
<br />
<script src="https://gist.github.com/picodotdev/5014791.js?file=Mensaje.java"></script>
<noscript>
 <a href="https://gist.github.com/picodotdev/5014791/raw/Mensaje.java">Mensaje.java</a>
 <br />
</noscript> Para el cliente java desde el punto de vista del que lo usa la comunicaci&oacute;n con el servidor y el formato en el que se transmiten los mensajes es transparente.
<br />
<br />
<script src="https://gist.github.com/picodotdev/5014791.js?file=HelloWorldResourceClient.java"></script>
<noscript>
 <a href="https://gist.github.com/picodotdev/5014791/raw/HelloWorldResourceClient.java">HelloWorldResourceClient.java</a>
 <br />
</noscript> 
<br />
<div style="clear: both; text-align: center;">
 <a href="http://1.bp.blogspot.com/-V16FRw94ofo/USeqiiz_TKI/AAAAAAAACX0/dz2VCU3GPzQ/s1600/resteasy-cliente-java.png"><img height="124" src="http://1.bp.blogspot.com/-V16FRw94ofo/USeqiiz_TKI/AAAAAAAACX0/dz2VCU3GPzQ/s320/resteasy-cliente-java.png" width="320" /></a>
</div>En el cliente javascript si usamos el formato json nos ser&aacute; m&aacute;s c&oacute;modo tratarlo en el navegador: 
<script src="https://gist.github.com/picodotdev/5014791.js?file=helloworld-resteasy.jsp"></script>
<noscript>
 <a href="https://gist.github.com/picodotdev/5014791/raw/helloworld-resteasy.jsp">helloworld-resteasy.jsp</a>
 <br />
</noscript> En las siguientes im&aacute;genes las peticiones que se realizan desde el navegador con el cliente javascript, en la columna type se puede ver el tipo de datos devuelto en las peticiones:
<br />
<br />
<div style="clear: both; text-align: center;">
 <a href="http://2.bp.blogspot.com/-BaEJsmw9qTs/UTEEHQipYvI/AAAAAAAACaw/hTnw7rHWMag/s1600/resteasy-peticiones.png"><img height="86" src="http://2.bp.blogspot.com/-BaEJsmw9qTs/UTEEHQipYvI/AAAAAAAACaw/hTnw7rHWMag/s200/resteasy-peticiones.png" width="200" /></a>
 <a href="http://4.bp.blogspot.com/-R7tqp6Qhxj4/UTEEHahvVAI/AAAAAAAACas/_uBRpi4w9sw/s1600/resteasy-json.png"><img height="70" src="http://4.bp.blogspot.com/-R7tqp6Qhxj4/UTEEHahvVAI/AAAAAAAACas/_uBRpi4w9sw/s200/resteasy-json.png" width="200" /></a>
</div>
<br />Para que el ejemplo funcione deberemos incluir las dependencias org.jboss.resteasy:resteasy-jaxb-provider:2.3.5.Final y org.jboss.resteasy:resteasy-jettison-provider:2.3.5.Final.
<br />
<br />
<script src="https://gist.github.com/picodotdev/5014791.js?file=build.gradle"></script>
<noscript>
 <a href="https://gist.github.com/picodotdev/5014791/raw/build.gradle">build.gradle</a>
 <br />
</noscript> Para finalizar, comentar que la combinaci&oacute;n de ofrecer en la aplicaci&oacute;n una API REST junto con librer&iacute;as como 
<a href="http://backbonejs.org/">Backbone.js</a> que proporcionan un Modelo-Vista-Controlador (MVC) en el navegador accediendo al servidor para consumir el servicio puede dar lugar a aplicaciones m&aacute;s flexibles y f&aacute;ciles de desarrollar entre otras cosas. Y esa es la tendencia hacia la que est&aacute;n evolucionado las aplicaciones web a medida que el propio lenguaje javascript y los navegadores aumentan sus capacidades.
<br />
<br />En el siguiente enlace puedes encontrar el 
<a href="https://github.com/picodotdev/elblogdepicodev/tree/master/HelloWorldRESTEasy">c&oacute;digo fuente completo</a> de este ejemplo y probarlo tu mismo en un servidor de aplicaciones como Tomcat. La siguiente entrada ser&aacute; como 
<a href="http://elblogdepicodev.blogspot.com.es/2013/03/integracion-tapestry-con-resteasy.htm.html">integrar RESTEasy con un framework de desarrollo web como Apache Tapestry</a>.
<br />
<br />Referencia:
<br />
<a href="http://www.jboss.org/resteasy">http://www.jboss.org/resteasy</a>
<br />
<a href="http://backbonejs.org/">http://backbonejs.org</a>
<br />
<a href="https://github.com/picodotdev/elblogdepicodev/tree/master/HelloWorldRESTEasy">C&oacute;digo fuente completo del ejemplo Hola Mundo con RESTEasy</a></span></div><section><a id="share"></a><h1>Compartir</h1><div class="share-this"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2013/02/devolver-xml-json-o-html-con-resteasy" st_title="Devolver xml, json o html con RESTEasy | El blog de pico.dev"></span><span displayText="Facebook" class="st_facebook_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2013/02/devolver-xml-json-o-html-con-resteasy" st_title="Devolver xml, json o html con RESTEasy | El blog de pico.dev"></span><span displayText="Google +" class="st_googleplus_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2013/02/devolver-xml-json-o-html-con-resteasy" st_title="Devolver xml, json o html con RESTEasy | El blog de pico.dev"></span><span displayText="LinkedIn" class="st_linkedin_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2013/02/devolver-xml-json-o-html-con-resteasy" st_title="Devolver xml, json o html con RESTEasy | El blog de pico.dev"></span><span displayText="Meneame" class="st_meneame_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2013/02/devolver-xml-json-o-html-con-resteasy" st_title="Devolver xml, json o html con RESTEasy | El blog de pico.dev"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div id="widget"></div></section><section><a id="comments"></a><h1>Comentar</h1><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = "elblogdepicodev";
var disqus_title = "Devolver xml, json o html con RESTEasy";
var disqus_url = "http://elblogdepicodev.blogspot.com/2013/02/devolver-xml-json-o-html-con-resteasy.html";
</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></section><hr/></article></div><aside class="col-xs-12 col-sm-12 col-md-4"><section><h3>Redes sociales</h3><p>¿Te gusta Blog Stack? ¡Compártelo con tus amigos!</p><div class="social-networks"><!-- Facebook --><div data-share="true" data-show-faces="false" data-action="like" data-width="310" data-layout="standard" data-href="http://www.blogstack.info/" class="fb-like"></div><!-- Google+ --><g:plusone size="standard" annotation="inline" href="http://www.blogstack.info/" width="310"></g:plusone></div></section><section><h3>¡Suscríbete!</h3><ul class="list-unstyled"><li><a href="/label/programacion/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta programacion</a></li><li><a href="/label/software/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta software</a></li><li><a href="/label/java/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta java</a></li></ul></section><div id="bigRectangle"></div><section id="lastPosts"></section><div class="row"><div class="col-xs-3 col-md-2"><div id="wideSkycraper"></div></div></div><section id="lastPosts_0"></section></aside></div></div><footer><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="footer"><a href="/">Blog Stack</a> por <a href="https://twitter.com/picodotdev/">pico.dev</a> está publicado bajo la licencia de software libre <a href="http://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public</a>.<br/>
El contenido agregado conserva la licencia de su bitácora.<br/>
«Powered by» <a href="https://github.com/picodotdev/blogstack">Blog Stack</a>, <a href="http://tapestry.apache.org/">Apache Tapestry</a>, <a href="https://www.openshift.com/">OpenShift</a>, <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://www.oracle.com/es/technologies/java/overview/index.html">Java</a> y más software libre o de código abierto, inspirado en <a href="http://octopress.org/">Octopress</a>.<br/><span class="copyleft">©</span> pico.dev 2014
</div></div></div></div></footer><div id="fb-root"></div><script type="text/javascript">var require = {
  "waitSeconds" : 300,
  "shim" : {
    "t5/core/typeahead" : [
      "jquery"
    ],
    "bootstrap/affix" : [
      "bootstrap/transition"
    ],
    "bootstrap/alert" : [
      "bootstrap/transition"
    ],
    "bootstrap/modal" : [
      "bootstrap/transition"
    ],
    "bootstrap/tab" : [
      "bootstrap/transition"
    ],
    "bootstrap/transition" : [
      "jquery"
    ],
    "bootstrap/button" : [
      "bootstrap/transition"
    ],
    "bootstrap/scrollspy" : [
      "bootstrap/transition"
    ],
    "bootstrap/collapse" : [
      "bootstrap/transition"
    ],
    "bootstrap/dropdown" : [
      "bootstrap/transition"
    ],
    "bootstrap/tooltip" : [
      "bootstrap/transition"
    ],
    "bootstrap/carousel" : [
      "bootstrap/transition"
    ],
    "bootstrap/popover" : [
      "bootstrap/tooltip"
    ]
  },
  "baseUrl" : "/modules"
};
</script><script src="/assets/tapestry5/require.js" type="text/javascript"></script><script src="/assets/tapestry5/underscore-1.5.2.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/scriptaculous.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/effects.js" type="text/javascript"></script><script src="/assets/tapestry5/t53-compatibility.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery-noconflict.js" type="text/javascript"></script><script type="text/javascript">require(["t5/core/pageinit"], function(pi) { pi([], [
  "app/analytics",
  [
    "app/karmacracy:init",
    {
      "selector" : "#widget",
      "id" : 64,
      "url" : "http://www.blogstack.info/post/elblogdepicodev/2013/02/devolver-xml-json-o-html-con-resteasy"
    }
  ],
  "app/disqus",
  "app/facebook",
  "app/googleplus",
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts",
      "source" : "elblogdepicodev",
      "name" : "El blog de pico.dev"
    }
  ],
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts_0",
      "source" : "blogstack",
      "name" : "Blog Stack"
    }
  ],
  [
    "app/adsensem:init",
    {
      "blogstack" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlotHorizontalSkycraper" : "1397019380",
        "adSlotBigRectangle" : "2873752587",
        "adSlotWideSkycraper" : "1896546988"
      },
      "ad" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlotHorizontalSkycraper" : "1397019380",
        "adSlotBigRectangle" : "2873752587",
        "adSlotWideSkycraper" : "1896546988"
      }
    }
  ]
]); });</script></body></html>