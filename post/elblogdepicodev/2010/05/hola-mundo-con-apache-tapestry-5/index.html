<!DOCTYPE html><html data-debug-enabled="true" data-locale="es_ES" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="Apache Tapestry Framework (version 5.4-beta-16)" name="generator"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta pagina="Post"/><title>Hola mundo con Apache Tapestry 5 | El blog de pico.dev</title><!-- Resources --><link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/><link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link title="Portada" type="application/atom+xml" rel="alternate" href="/feed.atom.xml"/><link type="image/png" rel="icon" href="/assets/images/favicon.png"/><meta content="Post" name="tapestry-page-name"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/bootstrap/css/bootstrap.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/exception-frame.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tapestry-console.css"/><link type="text/css" rel="stylesheet" href="/assets/tapestry5/tree.css"/><link type="text/css" rel="stylesheet" href="/assets/css/core.css"/></head><body data-page-initialized="false"><script type="text/javascript">document.write("<div class=\"pageloading-mask\"><div></div></div>");</script><header><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><h1><a class="blogstack" href="/"><span class="glyphicon glyphicon-th"></span> Blog <span class="stack">Stack</span></a></h1></div><div class="col-xs-12 col-sm-12 col-md-6"><nav role="navigation"><ul class="list-unstyled list-inline"><li><a class="header" href="/">Inicio</a></li><li><a class="header" href="/archive">Archivo</a></li><li><a class="header" href="/faq">Preguntas frecuentes</a></li><li><a class="header" href="/faq#aggregate">¿Quieres agregar tu bitácora?</a></li></ul></nav></div><div class="col-xs-6 col-sm-6 col-md-2"><a title="Fuente RSS, ¡suscríbete a BS!" alt="Fuente RSS" class="header" href="/feed.atom.xml"><span class="header icon entypo"></span></a><a title="Twitter, ¡sigue a BS!" alt="Twitter" class="header" href="http://twitter.com/blogstackinfo"><span class="header icon entypo-social"></span></a></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><h4>Un poco más que un agregador/planeta de bitácoras sobre programación, desarrollo, software libre, gnu/linux, tecnología, ...</h4></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="imagen-cabecera"><div class="imagen"><div class="col-xs-12 col-sm-12 col-md-12" id="billboard"></div></div></div></div></div></div></header><div class="container-fluid content"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8 content"><article itemtype="http://schema.org/BlogPosting" itemscope=""><a id="content"></a><header><h2><a href="/post/elblogdepicodev/2010/05/hola-mundo-con-apache-tapestry-5"><span itemprop="headline">Hola mundo con Apache Tapestry 5</span></a></h2></header><div class="row labels"><div class="col-md-12"><a class="label" href="/label/programacion"><img title="programacion" alt="programacion" src="/assets/images/labels/programacion.png"/></a><a class="label" href="/label/java"><img title="java" alt="java" src="/assets/images/labels/java.png"/></a><a class="label" href="/label/tapestry"><img title="tapestry" alt="tapestry" src="/assets/images/labels/tapestry.png"/></a></div></div><section class="post-data"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div><span>Escrito por <span itemprop="author">pico.dev</span> en la bitácora <a href="http://elblogdepicodev.blogspot.com.es/">El blog de pico.dev</a>, <a href="http://elblogdepicodev.blogspot.com/2010/05/hola-mundo-con-apache-tapestry-5.html"><span itemprop="sameAs">artículo original</span></a></span></div><div><span datetime="2011-02-19T00:10" itemprop="dateModified">Actualizado el sábado, 19 de febrero de 2011 a las 00:10 UTC</span></div><div><span>
Etiquetado como
<a href="/label/programacion"><span itemprop="articleSection">programacion</span></a>, <a href="/label/tapestry"><span itemprop="articleSection">tapestry</span></a>, <a href="/label/java"><span itemprop="articleSection">java</span></a></span></div></div></div></section><div class="text-justify post-content"><div class="share-this only-twitter"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2010/05/hola-mundo-con-apache-tapestry-5" st_title="Hola mundo con Apache Tapestry 5 | El blog de pico.dev"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><span itemprop="name"><div style="clear: both; text-align: center;">
 <img alt="Apache Tapestry" src="http://1.bp.blogspot.com/_9zOwWD_PYL8/S-2l0Qxom1I/AAAAAAAAAOg/t4TfjsOh4WQ/s320/tapestry-banner.gif" title="Apache Tapestry" />
</div>
<br />Hace unos d&iacute;as publiqu&eacute; una entrada en la que hice el t&iacute;pico programa 
<a href="http://elblogdepicodev.blogspot.com/2010/05/hola-mundo-con-apache-tapestry.html">Hola Mundo con Apache Tapestry en su versi&oacute;n 4.1</a> (T4).
<br />
<br />En esta entrada pretendo realizar el mismo ejemplo pero esta vez mediante Apache Tapestry 5.1 (T5) en el que veremos que tiene notables diferencias sobre T4, sin embargo, es suficientemente sencillo para que no necesite muchas explicaciones. El ejemplo consist&iacute;a en una p&aacute;gina con una imagen, dos componentes uno que mostraba un texto y otro un reloj que se actualiza cada segundo mediante javascript.
<br />
<br />Mediante estas dos entradas se puede comparar como ha evolucionado este framework y cuales han sido algunos de sus principales cambios, adem&aacute;s de ver un peque&ntilde;o ejemplo de como son las cosas en T5.
<br />
<br />Entre los cambios m&aacute;s notables de una versi&oacute;n a otra es que en T5 se establece como requisito a partir de ahora el uso de Java 5 (de modo que si en un proyecto tenemos como requisito el utilizar un JDK 1.4 entonces tendremos que usar T4) con todas las nuevas caracter&iacute;sticas que esta evoluci&oacute;n de Java aporta, entre ellas ahora en T5 se hace un uso intensivo de las anotaciones lo que le permite eliminar los archivos jwc que eran requeridos en T4 para especificar los componentes y hace a&uacute;n m&aacute;s sencillo la escritura de los componentes. Otro de los cambios m&aacute;s notables de T5 es que los componentes y p&aacute;ginas ya no tiene porque ser abstractas ni tienen que heredar de una determinada clase de Tapestry sino que son simplemente POJOs lo que es &uacute;til a la hora de hacer casos de prueba automatizados.
<br />
<br />Veamos como es en T5 el componente HolaMundo que ahora s&oacute;lo consta del archivo HolaMundo.java:
<br />
<br />
<div>
 <pre>package com.blogspot.elblogdepicodev.tapestry.helloWorld.components;<br /><br />import org.apache.tapestry5.MarkupWriter;<br /><br />public class HolaMundo {<br /><br />    protected boolean beginRender(MarkupWriter writer) {<br />     writer.write(&quot;Hola mundo Tapestry !!!&quot;);<br />  return false;<br /> }<br />}</pre>
</div>
<br />El componente Reloj tambi&eacute;n ha cambiado tanto en la parte java como en el javascript que tiene asociado:
<br />
<br />Reloj.java
<br />
<br />
<div>
 <pre>package com.blogspot.elblogdepicodev.tapestry.helloWorld.components;<br /><br />import org.apache.tapestry5.Asset;<br />import org.apache.tapestry5.ComponentResources;<br />import org.apache.tapestry5.MarkupWriter;<br />import org.apache.tapestry5.RenderSupport;<br />import org.apache.tapestry5.annotations.Environmental;<br />import org.apache.tapestry5.annotations.Path;<br />import org.apache.tapestry5.annotations.SupportsInformalParameters;<br />import org.apache.tapestry5.ioc.annotations.Inject;<br /><br />@SupportsInformalParameters<br />public class Reloj {<br /><br />    @Inject<br />    @Path(&quot;classpath:com/blogspot/elblogdepicodev/tapestry/helloWorld/components/Reloj.js&quot;)<br />    private Asset script;<br /><br />    @Environmental<br />    private RenderSupport renderSupport;<br />    <br />    @Inject<br />    private ComponentResources componentResources;<br /><br />    protected void setupRender() {<br />        renderSupport.addScriptLink(script);<br />    }<br /><br />    protected boolean beginRender(MarkupWriter writer) {<br />        String id = componentResources.getId();<br />        <br />        writer.element(&quot;span&quot;, &quot;id&quot;, id);<br />        componentResources.renderInformalParameters(writer);<br /> return false;<br />    }<br /><br />    protected boolean afterRender(MarkupWriter writer) {<br />        String id = componentResources.getId();<br /><br />        writer.end();<br />        renderSupport.addScript(&quot;var %s = new Reloj('%s');&quot;, id, id);       <br /> return true;<br />    }<br />}</pre>
</div>
<br />Reloj.js
<br />
<br />
<div>
 <pre>Reloj = function(id) {<br />    new PeriodicalExecuter(function(pe) {<br />        $(id).update(new Date().toString());<br />    }, 1);<br />}</pre>
</div>
<br />Veamos tambi&eacute;n como es la plantilla de la p&aacute;gina Index.tml:
<br />
<br />
<div>
 <pre>&lt;html xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_1_0.xsd&quot;&gt;<br />&lt;head&gt;<br /> &lt;title&gt;Hola mundo Tapestry !!!&lt;/title&gt;<br />&lt;/head&gt;<br /><br />&lt;body style=&quot;font-family: Verdana; font-size: 10px;&quot;&gt;<br />    &lt;img src=&quot;${context:images/tapestry-banner.gif}&quot;/&gt;<br />    &lt;br/&gt;<br />    &lt;br/&gt;<br /><br />    &lt;b&gt;&lt;t:holaMundo/&gt;&lt;/b&gt;<br />    &lt;br/&gt;<br />    &lt;br/&gt;<br />    &lt;t:reloj t:id=&quot;reloj&quot;/&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;</pre>
</div>
<br />Otro de los cambios en T5 es que ahora es un filtro el que procesa las peticiones de la aplicaci&oacute;n en vez de un servlet como era en T4. Esto lo podemos ver en fichero web.xml:
<br />
<br />
<div>
 <pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;<br />&lt;!DOCTYPE web-app PUBLIC &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot; &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot; &gt;<br /><br />&lt;web-app&gt;<br /> &lt;display-name&gt;HelloWorldTapestry&lt;/display-name&gt;<br /> &lt;description&gt;Aplicaci&oacute;n Hola Mundo con Tapestry5&lt;/description&gt;<br /> <br /> &lt;context-param&gt;<br />  &lt;!-- The only significant configuration for Tapestry 5, this informs Tapestry<br />   of where to look for pages, components and mixins. --&gt;<br />  &lt;param-name&gt;tapestry.app-package&lt;/param-name&gt;<br />        &lt;param-value&gt;com.blogspot.elblogdepicodev.tapestry.helloWorld&lt;/param-value&gt;<br /> &lt;/context-param&gt;<br />    <br /> &lt;filter&gt;<br />  &lt;filter-name&gt;app&lt;/filter-name&gt;<br />  &lt;filter-class&gt;org.apache.tapestry5.TapestryFilter&lt;/filter-class&gt;<br /> &lt;/filter&gt;<br />          <br /> &lt;filter-mapping&gt;<br />  &lt;filter-name&gt;app&lt;/filter-name&gt;<br />  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;<br /> &lt;/filter-mapping&gt;<br /><br /> &lt;session-config&gt;<br />  &lt;session-timeout&gt;30&lt;/session-timeout&gt;<br /> &lt;/session-config&gt;<br /><br /> &lt;welcome-file-list&gt;<br />  &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;<br /> &lt;/welcome-file-list&gt;<br />&lt;/web-app&gt;</pre>
</div>
<br />Adem&aacute;s en el web.xml se indicar&aacute; mediante el par&aacute;metro de contexto tapestry.app-package el paquete en el que T5 buscar&aacute; las clases de los componentes, paginas y servicios.
<br />
<br />Dado que la orientaci&oacute;n de T5 ha sido eliminar los XML de configuraci&oacute;n por anotaciones el fichero para la inyecci&oacute;n de dependencias (hivemind.xml) tambien ha sido sustituido por una clase en el paquete services, AppModule. En esta clase ser&aacute; donde definamos nuestros servicios y contribuciones.
<br />
<br />La p&aacute;gina de inicio de la aplicaci&oacute;n tiene la siguiente URL: http://localhost:8080/HelloWorldTapestry5/Index
<br />
<br />Para construir la aplicaci&oacute;n he utilizado ant, basta con ejecutar desde la linea de comandos:
<br />
<br />
<div>
 <pre>Para Linux: $ ./ant.sh resolve package<br />Para Windows: &gt; ./ant.cmd resolve package</pre>
</div>
<br />Tal vez a la hora de obtener las dependencias con Ivy os de un mensaje de error indicando que no se ha podido obtener la 
<a href="http://sourceforge.net/projects/jboss/files/Javassist/">librer&iacute;a javassist</a>, si es el caso deber&eacute;is obtenerla manualmente y copiarla al directorio .ivy2/javassist/javassist/3.9.0.GA/jar del directorio home (para Linux) o Documents and Settings (para Windows)&nbsp;del usuario.
<br />
<br />El resultado de la aplicaci&oacute;n en funcionamiento es:
<br />
<br />
<div style="clear: both; text-align: center;">
 <a href="http://3.bp.blogspot.com/_9zOwWD_PYL8/S_7Ex6TPT6I/AAAAAAAAAQQ/18qlbZ1clC0/s1600/apache-tapestry-5.png"><img alt="Aplicaci&oacute;n HelloWorldTapestry funcionando" src="http://3.bp.blogspot.com/_9zOwWD_PYL8/S_7Ex6TPT6I/AAAAAAAAAQQ/18qlbZ1clC0/s320/apache-tapestry-5.png" title="Aplicaci&oacute;n HelloWorldTapestry funcionando" /></a>
</div>
<br />Si quieres conocer m&aacute;s en detalle las caracter&iacute;sticas de este excelente framework puedes consultar el siguiente enlace:
<br />
<br />
<a href="http://elblogdepicodev.blogspot.com/2010/05/documentacion-sobre-apache-tapestry.html">Documentaci&oacute;n sobre Apache Tapestry</a>
<br />
<a href="https://docs.google.com/uc?id=0B4yquUFv3csrNjFmOGRhZTUtMDY5MS00MjFiLTkxNmUtNzE4MmVjMjZiODJm&amp;export=download&amp;authkey=CIqYwMYO&amp;hl=es">C&oacute;digo fuente ejemplo Hola Mundo con Apache Tapestry 5</a></span></div><section><a id="share"></a><h1>Compartir</h1><div class="share-this"><span displayText="Tweet" class="st_twitter_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2010/05/hola-mundo-con-apache-tapestry-5" st_title="Hola mundo con Apache Tapestry 5 | El blog de pico.dev"></span><span displayText="Facebook" class="st_facebook_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2010/05/hola-mundo-con-apache-tapestry-5" st_title="Hola mundo con Apache Tapestry 5 | El blog de pico.dev"></span><span displayText="Google +" class="st_googleplus_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2010/05/hola-mundo-con-apache-tapestry-5" st_title="Hola mundo con Apache Tapestry 5 | El blog de pico.dev"></span><span displayText="LinkedIn" class="st_linkedin_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2010/05/hola-mundo-con-apache-tapestry-5" st_title="Hola mundo con Apache Tapestry 5 | El blog de pico.dev"></span><span displayText="Meneame" class="st_meneame_vcount" st_url="http://www.blogstack.info/post/elblogdepicodev/2010/05/hola-mundo-con-apache-tapestry-5" st_title="Hola mundo con Apache Tapestry 5 | El blog de pico.dev"></span></div><script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script><script type="text/javascript">stLight.options({publisher: "ur-3b2014fd-82e-9968-7e00-5ee51fb88bb2", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script><div id="widget"></div></section><section><a id="comments"></a><h1>Comentar</h1><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = "elblogdepicodev";
var disqus_title = "Hola mundo con Apache Tapestry 5";
var disqus_url = "http://elblogdepicodev.blogspot.com/2010/05/hola-mundo-con-apache-tapestry-5.html";
</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></section><hr/></article></div><div class="col-xs-12 col-sm-12 col-md-4"><aside><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section><h3>¡Suscríbete!</h3><ul class="list-unstyled"><li><a href="/label/programacion/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta programacion</a></li><li><a href="/label/tapestry/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta tapestry</a></li><li><a href="/label/java/feed.atom.xml"><span class="fa fa-rss"></span> Fuente de la etiqueta java</a></li></ul></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigRectangle"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section><h3>Redes sociales</h3><p>¿Te gusta Blog Stack? ¡Compártelo!</p><div class="social-networks"><!-- Facebook --><div class="social-network"><div data-share="true" data-show-faces="false" data-action="like" data-width="310" data-layout="box_count" data-href="http://www.blogstack.info/" class="fb-like"></div></div><!-- Google+ --><div class="social-network"><div class="g-plusone" data-href="http://www.blogstack.info/" data-size="tall"></div></div></div></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts"></section></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div id="bigSkycraper"></div></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><section id="lastPosts_0"></section></div></div></aside></div></div></div><footer><div class="container-fluid"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><div class="footer"><a href="/">Blog Stack</a> por <a href="https://twitter.com/picodotdev/">pico.dev</a> está publicado bajo la licencia de software libre <a href="http://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public</a> en <a href="https://github.com/picodotdev/blog-stack">GitHub <span class="entypo-social"></span></a>.<br/>
El contenido agregado conserva la licencia de su bitácora.<br/>
«Powered by» <a href="https://github.com/picodotdev/blogstack">Blog Stack</a>, <a href="http://tapestry.apache.org/">Apache Tapestry</a>, <a href="https://www.openshift.com/">OpenShift</a>, <a href="https://pages.github.com/">GitHub Pages</a>, <a href="http://www.oracle.com/es/technologies/java/overview/index.html">Java</a> y más software libre o de código abierto, inspirado en <a href="http://octopress.org/">Octopress</a>.<br/><span class="copyleft">©</span> pico.dev 2015
</div></div></div></div></footer><div id="fb-root"></div><script type="text/javascript">var require = {
  "waitSeconds" : 300,
  "shim" : {
    "t5/core/typeahead" : [
      "jquery"
    ],
    "bootstrap/affix" : [
      "bootstrap/transition"
    ],
    "bootstrap/alert" : [
      "bootstrap/transition"
    ],
    "bootstrap/modal" : [
      "bootstrap/transition"
    ],
    "bootstrap/tab" : [
      "bootstrap/transition"
    ],
    "bootstrap/transition" : [
      "jquery"
    ],
    "bootstrap/button" : [
      "bootstrap/transition"
    ],
    "bootstrap/scrollspy" : [
      "bootstrap/transition"
    ],
    "bootstrap/collapse" : [
      "bootstrap/transition"
    ],
    "bootstrap/dropdown" : [
      "bootstrap/transition"
    ],
    "bootstrap/tooltip" : [
      "bootstrap/transition"
    ],
    "bootstrap/carousel" : [
      "bootstrap/transition"
    ],
    "bootstrap/popover" : [
      "bootstrap/tooltip"
    ]
  },
  "baseUrl" : "/modules"
};
</script><script src="/assets/tapestry5/require.js" type="text/javascript"></script><script src="/assets/tapestry5/underscore-1.5.2.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/prototype.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/scriptaculous.js" type="text/javascript"></script><script src="/assets/tapestry5/scriptaculous_1_9_0/effects.js" type="text/javascript"></script><script src="/assets/tapestry5/t53-compatibility.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery.js" type="text/javascript"></script><script src="/assets/tapestry5/jquery-noconflict.js" type="text/javascript"></script><script type="text/javascript">require(["t5/core/pageinit"], function(pi) { pi([], [
  "app/analytics",
  [
    "app/karmacracy:init",
    {
      "selector" : "#widget",
      "id" : 187,
      "url" : "http://www.blogstack.info/post/elblogdepicodev/2010/05/hola-mundo-con-apache-tapestry-5"
    }
  ],
  "app/disqus",
  "app/facebook",
  "app/googleplus",
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts",
      "source" : "elblogdepicodev",
      "name" : "El blog de pico.dev"
    }
  ],
  [
    "app/lastPosts:init",
    {
      "id" : "lastPosts_0",
      "source" : "blogstack",
      "name" : "Blog Stack"
    }
  ],
  [
    "app/adsensem:init",
    {
      "blogstack" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlot" : "1397019380"
      },
      "ad" : {
        "adClient" : "ca-pub-3533636310991304",
        "adSlot" : "1397019380"
      }
    }
  ]
]); });</script></body></html>