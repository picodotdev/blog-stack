<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">
    
    <property name="schema" value="blogstack"/>
    <property name="selectMaxIdAdsense" value="(select max(id) from ${schema}.adsense)"/>
    <property name="selectMaxIdImportSource" value="(select max(id) from ${schema}.import_source)"/>
    <property name="selectMaxIdNewsletter" value="(select max(id) from ${schema}.newsletter)"/>
    
    <changeSet id="1" author="picodotdev">
        <comment>Creación de la base de datos inicial (01-05-2014)</comment>
        <sql>create schema ${schema}</sql>
        <createTable tableName="indexation" schemaName="${schema}">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="creationDate" type="DATETIME" />
        </createTable>
        <createTable tableName="adsense" schemaName="${schema}">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="adsenseAdClient" type="VARCHAR(32)" />
            <column name="adsenseSlotBigRectangle" type="VARCHAR(16)" />
            <column name="adsenseSlotWideSkycraper" type="VARCHAR(16)" />
            <column name="adsenseSlotHorizontalSkycraper" type="VARCHAR(16)" />
        </createTable>
        <createTable tableName="import_source" schemaName="${schema}">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="creationDate" type="DATETIME" />
            <column name="updateDate" type="DATETIME" />
        </createTable>        
        <createTable tableName="source" schemaName="${schema}">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="creationDate" type="DATETIME" />
            <column name="updateDate" type="DATETIME" />
            <column name="name" type="VARCHAR(256)" />
            <column name="alias" type="VARCHAR(32)" />
            <column name="pageUrl" type="VARCHAR(2048)">
                <constraints unique="true"/>
            </column>
            <column name="url" type="VARCHAR(2048)">
                <constraints unique="true"/>
            </column>
            <column name="author" type="VARCHAR(64)" />
            <column name="email" type="VARCHAR(128)" />
            <column name="disqusShortname" type="VARCHAR(32)" />
            <column name="adsense_id" type="BIGINT">
                <constraints references="${schema}.adsense(id)" foreignKeyName="source_adsense_id"/>
            </column>
            <column name="importsource_id" type="BIGINT">
                <constraints references="${schema}.import_source(id)" foreignKeyName="source_importsource_id"/>
            </column>
        </createTable>
        <createTable tableName="post" schemaName="blogstack">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="creationDate" type="DATETIME" />
            <column name="updateDate" type="DATETIME" />
            <column name="publishDate" type="DATETIME" />
            <column name="date" type="DATETIME" />
            <column name="url" type="VARCHAR(2048)">
                <constraints unique="true"/>
            </column>
            <column name="hash" type="VARCHAR(24)"/>
            <column name="title" type="VARCHAR(256)" />
            <column name="author" type="VARCHAR(64)" />
            <column name="contentCompressed" type="BLOB" />
            <column name="indexation_id" type="BIGINT">
                <constraints references="${schema}.indexation(id)" foreignKeyName="post_indexation_id"/>
            </column>
            <column name="source_id" type="BIGINT">
                <constraints references="${schema}.source(id)" foreignKeyName="post_source_id"/>
            </column>
        </createTable>
        <createTable tableName="label" schemaName="${schema}">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="creationDate" type="DATETIME" />
            <column name="name" type="VARCHAR(128)" />
            <column name="hash" type="VARCHAR(24)" />
        </createTable>
        <createTable tableName="posts_indexations" schemaName="${schema}">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="post_id" type="BIGINT">
                <constraints references="${schema}.post(id)" foreignKeyName="posts_indexations_post_id"/>
            </column>
            <column name="indexation_id" type="BIGINT">
                <constraints references="${schema}.indexation(id)" foreignKeyName="posts_indexations_indexation_id"/>
            </column>
        </createTable>
        <createTable tableName="posts_labels" schemaName="${schema}">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="post_id" type="BIGINT">
                <constraints references="${schema}.post(id)" foreignKeyName="posts_labels_post_id"/>
            </column>
            <column name="label_id" type="BIGINT">
                <constraints references="${schema}.label(id)" foreignKeyName="posts_labels_label_id"/>
            </column>
        </createTable>        
        <createIndex indexName="url_source_idx" tableName="source" unique="true" schemaName="${schema}">
            <column name="url"/>
        </createIndex>
        <createIndex indexName="url_post_idx" tableName="post" unique="true" schemaName="${schema}">
            <column name="url"/>
        </createIndex>
        <createIndex indexName="hash_post_idx" tableName="post" unique="true" schemaName="${schema}">
            <column name="hash"/>
        </createIndex>
        <createIndex indexName="name_label_idx" tableName="label" unique="true" schemaName="${schema}">
            <column name="name"/>
        </createIndex>
    </changeSet>
    <changeSet id="2" author="picodotdev">
        <comment>Fuentes propias iniciales (01-05-2014)</comment>
        <insert tableName="adsense" schemaName="${schema}">
            <column name="adsenseAdClient" value="ca-pub-3533636310991304" />
            <column name="adsenseSlotBigRectangle" value="2873752587" />
            <column name="adsenseSlotWideSkycraper" value="1896546988" />
            <column name="adsenseSlotHorizontalSkycraper" value="1397019380" />
        </insert>
        <insert tableName="import_source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
        </insert>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Blog Bitix"/>
            <column name="alias" value="blogbitix"/>
            <column name="pageUrl" value="http://picodotdev.github.io/blog-bitix/"/>
            <column name="url" value="http://picodotdev.github.io/blog-bitix/categories/blog-stack/atom.xml"/>
            <column name="author" value="pico.dev"/>
            <column name="email" value="pico.dev@gmail.com"/>
            <column name="disqusShortname" value="blog-bitix"/>
            <column name="adsense_id" valueComputed="${selectMaxIdAdsense}"/>
            <column name="importsource_id" valueComputed="${selectMaxIdImportSource}"/>
        </insert>
        <insert tableName="adsense" schemaName="${schema}">
            <column name="adsenseAdClient" value="ca-pub-3533636310991304" />
            <column name="adsenseSlotBigRectangle" value="2873752587" />
            <column name="adsenseSlotWideSkycraper" value="1896546988" />
            <column name="adsenseSlotHorizontalSkycraper" value="1397019380" />
        </insert>
        <insert tableName="import_source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
        </insert>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="El blog de pico.dev"/>
            <column name="alias" value="elblogdepicodev"/>
            <column name="pageUrl" value="http://elblogdepicodev.blogspot.com.es/"/>
            <column name="url" value="https://www.blogger.com/feeds/2347950092468997900/posts/default"/>
            <column name="author" value="pico.dev"/>
            <column name="email" value="pico.dev@gmail.com"/>
            <column name="disqusShortname" value="elblogdepicodev"/>
            <column name="adsense_id" valueComputed="${selectMaxIdAdsense}"/>
            <column name="importsource_id" valueComputed="${selectMaxIdImportSource}"/>
        </insert>
    </changeSet>
    <changeSet id="3" author="picodotdev">
        <comment>Añadidos campos para poder filtar contenido agregado (08-05-2014)</comment>
        <addColumn tableName="source" schemaName="${schema}">
            <column name="enabled" type="boolean"/>
        </addColumn>
        <addColumn tableName="post" schemaName="${schema}">
            <column name="visible" type="boolean"/>
        </addColumn>
        <addColumn tableName="label" schemaName="${schema}">
            <column name="enabled" type="boolean"/>
            <column name="visible" type="boolean"/>
        </addColumn>
        <update tableName="source" schemaName="${schema}">
            <column name="enabled" valueBoolean="true"/>
        </update>
        <update tableName="post" schemaName="${schema}">
            <column name="visible" valueBoolean="true"/>
        </update>
        <update tableName="label" schemaName="${schema}">
            <column name="enabled" valueBoolean="true"/>
            <column name="visible" valueBoolean="true"/>
        </update>
        <update tableName="source" schemaName="${schema}">
            <column name="enabled" valueBoolean="false"/>
            <where>alias = 'elblogdepicodev'</where>
        </update>
    </changeSet>
    <changeSet id="4" author="picodotdev">
        <comment>Agregación de fuente (08-05-2014)</comment>
        <insert tableName="adsense" schemaName="${schema}">
            <column name="adsenseAdClient" value="ca-pub-1362235464953379" />
            <column name="adsenseSlotBigRectangle" value="5825737840" />
            <column name="adsenseSlotWideSkycraper" value="5825737840" />
            <column name="adsenseSlotHorizontalSkycraper" value="5825737840" />
        </insert>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Ocho bits hacen un byte"/>
            <column name="alias" value="ochobitshacenunbyte"/>
            <column name="pageUrl" value="http://www.ochobitshacenunbyte.com/"/>
            <column name="url" value="http://www.ochobitshacenunbyte.com/feed/atom/"/>
            <column name="author" value="David Penya"/>
            <column name="email" value="info@ochobitshacenunbyte.com"/>
            <column name="adsense_id" valueComputed="${selectMaxIdAdsense}"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="6" author="picodotdev">
        <comment>Corrección de la fuente agregada (08-05-2014)</comment>
        <update tableName="source" schemaName="${schema}">
            <column name="url" value="http://www.ochobitshacenunbyte.com/tag/blog-stack/feed/atom/"/>
            <where>alias = 'ochobitshacenunbyte'</where>
        </update>
    </changeSet>        
    <changeSet id="7" author="picodotdev">
        <comment>Agregación de fuente (11-05-2014)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Laborategia"/>
            <column name="alias" value="laborategia"/>
            <column name="pageUrl" value="http://laborategia.net/"/>
            <column name="url" value="http://laborategia.net/tag/blog-stack/feed/atom/"/>
            <column name="author" value="Dabid Martinez"/>
            <column name="email" value="dabid@laborategia.net"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>    
    <changeSet id="8" author="picodotdev">
        <comment>Agregación de fuente (11-05-2014) (2)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Victorhck in the free world"/>
            <column name="alias" value="victorhckinthefreeworld"/>
            <column name="pageUrl" value="https://victorhckinthefreeworld.wordpress.com/"/>
            <column name="url" value="https://victorhckinthefreeworld.wordpress.com/tag/blog-stack/feed/atom/"/>
            <column name="author" value="Victor Hck"/>
            <column name="email" value="correohck@gmail.com"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="9" author="picodotdev">
        <comment>Agregación de fuente (12-05-2014)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Koalite"/>
            <column name="alias" value="koalite"/>
            <column name="pageUrl" value="http://blog.koalite.com/"/>
            <column name="url" value="http://blog.koalite.com/feed/"/>
            <column name="author" value="Juan María Hernández"/>
            <column name="email" value="juan.hernandez.arroyo@gmail.com"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="La sombra del helicóptero"/>
            <column name="alias" value="lasombradelhelicoptero"/>
            <column name="pageUrl" value="http://www.lasombradelhelicoptero.com"/>
            <column name="url" value="http://www.lasombradelhelicoptero.com/feeds/posts/default/"/>
            <column name="author" value="Enrique Bravo"/>
            <column name="email" value="ebravo@openmailbox.org"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Placer digital"/>
            <column name="alias" value="placerdigital"/>
            <column name="pageUrl" value="http://placerdigital.net"/>
            <column name="url" value="http://placerdigital.net/tag/blog-stack/feed/atom/"/>
            <column name="author" value="Ricardo Barra"/>
            <column name="email" value="chuqui@gmail.com"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="10" author="picodotdev">
        <comment>Agregación de fuente (13-05-2014)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Cuaderno de software"/>
            <column name="alias" value="cuadernodesoftware"/>
            <column name="pageUrl" value="http://www.programania.net/"/>
            <column name="url" value="http://feeds.feedburner.com/Programania/"/>
            <column name="author" value="Luís Artola"/>
            <column name="email" value="luisartola@programania.es"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="11" author="picodotdev">
        <comment>Agregación de fuente (15-05-2014)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Arquitectura Java"/>
            <column name="alias" value="arquitecturajava"/>
            <column name="pageUrl" value="http://www.arquitecturajava.com/"/>
            <column name="url" value="http://www.arquitecturajava.com/feed/"/>
            <column name="author" value="Cecilio Álvarez"/>
            <column name="email" value="contacto@arquitecturajava.com"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="12" author="picodotdev">
        <comment>Actualización de etiquetas (17-05-2014)</comment>
        <update tableName="label" schemaName="${schema}">
            <column name="enabled" valueBoolean="false"/>
        </update>
        <update tableName="label" schemaName="${schema}">
            <column name="enabled" valueBoolean="true"/>
            <where>name in ('programacion', 'software', 'tecnologia', 'arch-linux', 'hardware', 'software-libre', 'tapestry', 'java', 'javascript', 'raspberrypi', 'gnome', 'bash', 'software-privativo', 'desempaquetado', 'microsoft', 'apple', 'php', 'minix', 'google', 'android', 'ubuntu', 'juegos', 'linux', 'sistemas-operativos', 'fsf', 'gnu', 'mysql', 'netbsd', 'openbsd', 'postgresql', 'unix', 'apache', 'debian', 'msdos', 'kvm', 'qemu', 'opensuse', 'desarrollo', 'redhat', 'c', 'css', 'html', 'python', 'centos', 'fedora', 'firefox', 'nube', 'xfce', 'richard-stallman', 'windows', 'seguridad', 'lenguaje', 'navegadores', 'mozilla', 'desarrollo-de-software', 'kernel')</where>
        </update>
    </changeSet>
    <changeSet id="13" author="picodotdev">
        <comment>Agregación de fuente (18-05-2014)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Navegapolis"/>
            <column name="alias" value="navegapolis"/>
            <column name="pageUrl" value="http://navegapolis.com/"/>
            <column name="url" value="http://feeds.feedburner.com/navegapolis"/>
            <column name="author" value="Juan Palacio"/>
            <column name="email" value="jpalacio@navegapolis.net"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="14" author="picodotdev">
        <comment>Agregación de fuente (18-05-2014) (2)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Una sinfonía en C#"/>
            <column name="alias" value="unasinfoniadecsharp"/>
            <column name="pageUrl" value="http://www.leomicheloni.com/"/>
            <column name="url" value="http://www.leomicheloni.com/syndication.axd?format=atom"/>
            <column name="author" value="Leonardo Micheloni"/>
            <column name="email" value="leonardogabrielmicheloni@gmail.com"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="15" author="picodotdev">
        <comment>Agregación de fuente (19-05-2014)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Variable not found"/>
            <column name="alias" value="variablenotfound"/>
            <column name="pageUrl" value="http://www.variablenotfound.com"/>
            <column name="url" value="http://feeds.feedburner.com/vnf?format=xml"/>
            <column name="author" value="José María Aguilar"/>
            <column name="email" value="josemariaaguilar@gmail.com"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Poesía binaria"/>
            <column name="alias" value="poesiabinaria"/>
            <column name="pageUrl" value="http://totaki.com/poesiabinaria/"/>
            <column name="url" value="http://totaki.com/poesiabinaria/feed/"/>
            <column name="author" value="Gaspar Fernández"/>
            <column name="email" value="blakeyed@totaki.com"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>        
    </changeSet>
    <changeSet id="16" author="picodotdev">
        <comment>Agregación de fuente (21-05-2014)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Kinisoftware"/>
            <column name="alias" value="kinisoftware"/>
            <column name="pageUrl" value="http://kinisoftware.com/"/>
            <column name="url" value="http://kinisoftware.com/feed/"/>
            <column name="author" value="Joaquin Engelmo"/>
            <column name="email" value="kinisoftware@gmail.com"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="17" author="picodotdev">
        <comment>Agregación de fuente (21-05-2014)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="PLEDIN"/>
            <column name="alias" value="pledin"/>
            <column name="pageUrl" value="http://www.josedomingo.org/pledin/"/>
            <column name="url" value="http://www.josedomingo.org/pledin/feed/"/>
            <column name="author" value="Jose Domingo"/>
            <column name="email" value="clasinfo@gmail.com"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="18" author="picodotdev">
        <comment>Ocultación de artículo</comment>
        <update tableName="post" schemaName="${schema}">
            <column name="visible" valueBoolean="false"/>
            <where>id = 478</where>
        </update>
    </changeSet>
    <changeSet id="19" author="picodotdev">
        <comment>Agregación de fuente (04-06-2014)</comment>
        <insert tableName="adsense" schemaName="${schema}">
            <column name="adsenseAdClient" value="ca-pub-1282205667414046" />
            <column name="adsenseSlotBigRectangle" value="2014526355" />
            <column name="adsenseSlotWideSkycraper" value="2014526355" />
            <column name="adsenseSlotHorizontalSkycraper" value="2014526355" />
        </insert>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="El blog de Jose"/>
            <column name="alias" value="elblogdejose"/>
            <column name="pageUrl" value="http://josedeveloper.com/"/>
            <column name="url" value="http://josedeveloper.com/feed/atom/"/>
            <column name="author" value="José Antonio Rodríguez"/>
            <column name="email" value="josearodriguezd@gmail.com"/>
            <column name="adsense_id" valueComputed="${selectMaxIdAdsense}"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="20" author="picodotdev">
        <comment>Agregación de fuente (09-06-2014)</comment>
        <insert tableName="adsense" schemaName="${schema}">
            <column name="adsenseAdClient" value="ca-pub-5967896416715365" />
            <column name="adsenseSlotBigRectangle" value="6843955321" />
            <column name="adsenseSlotWideSkycraper" value="6843955321" />
            <column name="adsenseSlotHorizontalSkycraper" value="6843955321" />
        </insert>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="El blog de Liher"/>
            <column name="alias" value="elblogdeliher"/>
            <column name="pageUrl" value="http://elblogdeliher.com/"/>
            <column name="url" value="http://elblogdeliher.com/feed/atom/"/>
            <column name="author" value="Liher Sanchez"/>
            <column name="email" value="liher@mail.com"/>
            <column name="adsense_id" valueComputed="${selectMaxIdAdsense}"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="21" author="picodotdev">
        <dropTable tableName="source_post" schemaName="public"/>
    </changeSet>
    <changeSet id="22" author="picodotdev">
        <comment>Agregación de fuente (23-09-2014)</comment>
        <insert tableName="adsense" schemaName="${schema}">
            <column name="adsenseAdClient" value="ca-pub-3255217622954305" />
            <column name="adsenseSlotBigRectangle" value="8776737477" />
            <column name="adsenseSlotWideSkycraper" value="8776737477" />
            <column name="adsenseSlotHorizontalSkycraper" value="8776737477" />
        </insert>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="JsiTech"/>
            <column name="alias" value="jsitech"/>
            <column name="pageUrl" value="http://www.jsitech.com/"/>
            <column name="url" value="http://www.jsitech.com/feed/"/>
            <column name="author" value="Jason Soto"/>
            <column name="email" value="jason_soto@jsitech.com"/>
            <column name="adsense_id" valueComputed="${selectMaxIdAdsense}"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="23" author="picodotdev">
        <comment>Actualización de etiquetas (21-09-2014)</comment>
        <update tableName="label" schemaName="${schema}">
            <column name="enabled" valueBoolean="true"/>
            <where>name in ('spring', 'libreoffice', 'iphone', 'mac', 'kde', 'bsd', 'virtualizacion', 'programas', 'asp-net')</where>
        </update>
    </changeSet>
    <changeSet id="24" author="picodotdev">
        <comment>Actualización de fuente (29-09-2014)</comment>
        <update tableName="source" schemaName="${schema}">
            <column name="url" value="http://victorhckinthefreeworld.wordpress.com/feed/"/>
            <where>alias = 'victorhckinthefreeworld'</where>
        </update>
    </changeSet>
    <changeSet id="25" author="picodotdev">
        <comment>Agregación de fuente (02-10-2014)</comment>
        <insert tableName="adsense" schemaName="${schema}">
            <column name="adsenseAdClient" value="ca-pub-3975359868571413" />
            <column name="adsenseSlotBigRectangle" value="3202072766" />
            <column name="adsenseSlotWideSkycraper" value="4678805966" />
            <column name="adsenseSlotHorizontalSkycraper" value="1725339562" />
        </insert>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Codecriticon"/>
            <column name="alias" value="codecriticon"/>
            <column name="pageUrl" value="http://codecriticon.es"/>
            <column name="url" value="http://codecriticon.com/feed/"/>
            <column name="author" value=" Antonio Vidal"/>
            <column name="email" value="lalin1982@gmail.com"/>
            <column name="adsense_id" valueComputed="${selectMaxIdAdsense}"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet> 
    <changeSet id="26" author="picodotdev">
        <comment>Agregación de fuente (05-10-2014)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="El blog de Adrián Arroyo"/>
            <column name="alias" value="elblogdeadrianarroyo"/>
            <column name="pageUrl" value="http://adrianarroyocalle.github.io/blog"/>
            <column name="url" value="http://adrianarroyocalle.github.io/blog/planets/blogstack.xml"/>
            <column name="author" value="Adrián Arroyo"/>
            <column name="email" value="adrian.arroyocalle@gmail.com"/>
            <column name="disqusShortname" value="adrianarroyocallegithub"/>            
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="27" author="picodotdev">
        <comment>Añadido campos para saber si un artículo ha sido compartido en redes sociales (22-11-2014)</comment>
        <addColumn tableName="post" schemaName="${schema}">
            <column name="shared" type="boolean"/>
        </addColumn>
        <update tableName="post" schemaName="${schema}">
            <column name="shared" valueBoolean="true"/>
        </update>
    </changeSet>
    <changeSet id="28" author="picodotdev">
        <comment>Arreglar posts no compartidos al indexarse (24-11-2014)</comment>
        <update tableName="post" schemaName="${schema}">
            <column name="shared" valueBoolean="false"/>
            <where>shared is null</where>
        </update>
    </changeSet>
    <changeSet id="29" author="picodotdev">
        <comment>Actualización de fuente (26-11-2014)</comment>
        <update tableName="source" schemaName="${schema}">
            <column name="url" value="http://www.ochobitshacenunbyte.com/tag/blog-stack/feed/"/>
            <where>alias = 'ochobitshacenunbyte'</where>
        </update>
    </changeSet>
    <changeSet id="30" author="picodotdev">
        <comment>Agregación de fuente (28-11-2014)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="KDE Blog"/>
            <column name="alias" value="kdeblog"/>
            <column name="pageUrl" value="http://www.kdeblog.com/"/>
            <column name="url" value="http://www.kdeblog.com/feed/"/>
            <column name="author" value="Baltasar Ortega"/>
            <column name="email" value="baltolkien@gmail.com"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="31" author="picodotdev">
        <comment>Agregación de fuente (12-01-2015)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="Destino DotNet"/>
            <column name="alias" value="destinodotnet"/>
            <column name="pageUrl" value="http://destinodotnet.com/"/>
            <column name="url" value="http://destinodotnet.com/feed/"/>
            <column name="author" value="Joel Martinez"/>
            <column name="email" value="joel@destinodotnet.com"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="32" author="picodotdev">
        <comment>Agregación de fuente (23-01-2015)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="TecnoParanoids"/>
            <column name="alias" value="tecnoparanoids"/>
            <column name="pageUrl" value="http://radioela.org/_TecnoParanoids_.html"/>
            <column name="url" value="http://www.radioela.org/spip.php?page=backend-auteur&amp;id_auteur=44"/>
            <column name="author" value="TecnoParanoids"/>
            <column name="email" value="tecnoparanoids@radioela.org"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="33" author="picodotdev">
        <comment>Agregación de fuente (21-03-2015)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="/etc/cron.d"/>
            <column name="alias" value="etccrond"/>
            <column name="pageUrl" value="http://www.etccrond.es/"/>
            <column name="url" value="http://www.etccrond.es/feeds/posts/default"/>
            <column name="author" value="Eugenio M. Vigo"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="34" author="picodotdev">
        <comment>Creación de boletín (27-03-2015)</comment>
        <createTable tableName="newsletter" schemaName="${schema}">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="creationDate" type="DATETIME" />
        </createTable>
        <addColumn tableName="post" schemaName="${schema}">
            <column name="newsletter_id" type="BIGINT">
                <constraints references="${schema}.newsletter(id)" foreignKeyName="post_newsletter_id"/>
            </column>
        </addColumn>
        <insert tableName="newsletter" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
        </insert>
        <update tableName="post" schemaName="${schema}">
            <column name="newsletter_id" valueComputed="${selectMaxIdNewsletter}"/>
        </update>
    </changeSet>
    <changeSet id="35" author="picodotdev">
        <comment>Agregación de fuente (12-04-2015)</comment>
        <insert tableName="adsense" schemaName="${schema}">
            <column name="adsenseAdClient" value="ca-pub-7127443823639155" />
            <column name="adsenseSlotBigRectangle" value="9038513565" />
            <column name="adsenseSlotWideSkycraper" value="9038513565" />
            <column name="adsenseSlotHorizontalSkycraper" value="9038513565" />
        </insert>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="El blog de abr4xas"/>
            <column name="alias" value="elblogdeabr4xas"/>
            <column name="pageUrl" value="https://blog.abr4xas.org/"/>
            <column name="url" value="http://feeds.feedburner.com/ElBlogDeAbr4xas"/>
            <column name="author" value="Ángel Cruz"/>
            <column name="email" value="me@abr4xas.org"/>
            <column name="adsense_id" valueComputed="${selectMaxIdAdsense}"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="36" author="picodotdev">
        <comment>Actualización de fuente (16-05-2015)</comment>
        <update tableName="source" schemaName="${schema}">
            <column name="url" value="http://picodotdev.github.io/blog-bitix/tags/blog-stack/index.xml"/>
            <where>alias = 'blogbitix'</where>
        </update>
    </changeSet>
    <changeSet id="37" author="picodotdev">
        <comment>Agregación de fuente (21-11-2015)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="SYSADMIT"/>
            <column name="alias" value="sysadmit"/>
            <column name="pageUrl" value="http://www.sysadmit.com"/>
            <column name="url" value="http://www.sysadmit.com/feeds/posts/default?alt=rss"/>
            <column name="author" value="Xavier Genestós"/>
            <column name="email" value="xavier.genestos@gmail.com"/>
            <column name="adsense_id" valueComputed="${selectMaxIdAdsense}"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="38" author="picodotdev">
        <comment>Agregación de fuente (16-01-2016)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="devuanita"/>
            <column name="alias" value="devuanita"/>
            <column name="pageUrl" value="http://devuanita.wordpress.com/"/>
            <column name="url" value="https://devuanita.wordpress.com/feed/"/>
            <column name="author" value="cangrejo"/>
            <column name="email" value="cangrejo@openmailbox.org"/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>
    <changeSet id="39" author="picodotdev">
        <comment>Agregación de fuente (04-03-2016)</comment>
        <insert tableName="source" schemaName="${schema}">
            <column name="creationDate" valueDate="SYSDATE()"/>
            <column name="name" value="altmar"/>
            <column name="alias" value="altmar"/>
            <column name="pageUrl" value="http://www.altmar.es/blog/"/>
            <column name="url" value="http://www.altmar.es/feed/"/>
            <column name="author" value="altmar"/>
            <column name="email" value=""/>
            <column name="enabled" valueBoolean="true"/>
        </insert>
    </changeSet>    
</databaseChangeLog>